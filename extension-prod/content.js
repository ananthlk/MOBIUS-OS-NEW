(()=>{"use strict";var n={56(n,e,i){n.exports=function(n){var e=i.nc;e&&n.setAttribute("nonce",e)}},72(n){var e=[];function i(n){for(var i=-1,t=0;t<e.length;t++)if(e[t].identifier===n){i=t;break}return i}function t(n,t){for(var s={},r=[],a=0;a<n.length;a++){var A=n[a],d=t.base?A[0]+t.base:A[0],c=s[d]||0,l="".concat(d," ").concat(c);s[d]=c+1;var b=i(l),m={css:A[1],media:A[2],sourceMap:A[3],supports:A[4],layer:A[5]};if(-1!==b)e[b].references++,e[b].updater(m);else{var p=o(m,t);t.byIndex=a,e.splice(a,0,{identifier:l,updater:p,references:1})}r.push(l)}return r}function o(n,e){var i=e.domAPI(e);return i.update(n),function(e){if(e){if(e.css===n.css&&e.media===n.media&&e.sourceMap===n.sourceMap&&e.supports===n.supports&&e.layer===n.layer)return;i.update(n=e)}else i.remove()}}n.exports=function(n,o){var s=t(n=n||[],o=o||{});return function(n){n=n||[];for(var r=0;r<s.length;r++){var a=i(s[r]);e[a].references--}for(var A=t(n,o),d=0;d<s.length;d++){var c=i(s[d]);0===e[c].references&&(e[c].updater(),e.splice(c,1))}s=A}}},113(n){n.exports=function(n,e){if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},314(n){n.exports=function(n){var e=[];return e.toString=function(){return this.map(function(e){var i="",t=void 0!==e[5];return e[4]&&(i+="@supports (".concat(e[4],") {")),e[2]&&(i+="@media ".concat(e[2]," {")),t&&(i+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),i+=n(e),t&&(i+="}"),e[2]&&(i+="}"),e[4]&&(i+="}"),i}).join("")},e.i=function(n,i,t,o,s){"string"==typeof n&&(n=[[null,n,void 0]]);var r={};if(t)for(var a=0;a<this.length;a++){var A=this[a][0];null!=A&&(r[A]=!0)}for(var d=0;d<n.length;d++){var c=[].concat(n[d]);t&&r[c[0]]||(void 0!==s&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=s),i&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=i):c[2]=i),o&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=o):c[4]="".concat(o)),e.push(c))}},e}},340(n,e,i){i.d(e,{A:()=>a});var t=i(354),o=i.n(t),s=i(314),r=i.n(s)()(o());r.push([n.id,"/**\n * Sidebar-only styles for Mobius OS (content script injection)\n * IMPORTANT: Must not style host page elements like html/body.\n * Everything is scoped under #mobius-os-sidebar to avoid collisions.\n */\n\n#mobius-os-sidebar,\n#mobius-os-sidebar * {\n  box-sizing: border-box;\n}\n\n#mobius-os-sidebar {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Google Sans', sans-serif;\n  background: #ffffff;\n  color: #0b1220;\n  font-size: 12px;\n  font-weight: 500;\n}\n\n/* Subtle, modern look - matching Mini */\n#mobius-os-sidebar {\n  border-left: 1px solid rgba(11, 18, 32, 0.12);\n  box-shadow: -4px 0 24px rgba(2, 6, 23, 0.08);\n}\n\n#mobius-os-sidebar button,\n#mobius-os-sidebar input,\n#mobius-os-sidebar select {\n  font: inherit;\n}\n\n#mobius-os-sidebar button {\n  cursor: pointer;\n}\n\n#mobius-os-sidebar .top-row,\n#mobius-os-sidebar .second-row,\n#mobius-os-sidebar .tasks-panel,\n#mobius-os-sidebar .chat-input-area,\n#mobius-os-sidebar .record-id-input,\n#mobius-os-sidebar .workflow-buttons,\n#mobius-os-sidebar .footer {\n  padding-left: 14px;\n  padding-right: 14px;\n}\n\n/* Top Row / Header */\n#mobius-os-sidebar .top-row {\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  gap: 8px;\n  padding-top: 8px;\n  padding-bottom: 10px;\n  border-bottom: 1px solid rgba(60, 64, 67, 0.12);\n  background: white;\n  flex-shrink: 0;\n}\n\n#mobius-os-sidebar .header-actions {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin-left: auto;\n  flex-shrink: 0;\n}\n\n#mobius-os-sidebar .header-left {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  flex: 0 1 auto;\n  min-width: 0;\n}\n\n#mobius-os-sidebar .client-logo {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  font-size: 11px;\n  color: #5f6368;\n  min-width: 100px;\n}\n\n#mobius-os-sidebar .client-logo img {\n  width: 24px;\n  height: 24px;\n  border-radius: 4px;\n}\n\n#mobius-os-sidebar .client-logo-svg {\n  width: 24px;\n  height: 24px;\n  flex-shrink: 0;\n}\n\n#mobius-os-sidebar .client-logo-svg svg {\n  width: 100%;\n  height: 100%;\n  display: block;\n}\n\n#mobius-os-sidebar .client-logo-placeholder {\n  width: 24px;\n  height: 24px;\n  background: #e8eaed;\n  border-radius: 4px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 10px;\n  color: #5f6368;\n}\n\n#mobius-os-sidebar .client-name {\n  font-weight: 500;\n  color: #202124;\n}\n\n#mobius-os-sidebar .logo-section {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  flex-wrap: nowrap;\n  min-width: 0;\n}\n\n#mobius-os-sidebar .mobius-logo {\n  width: 32px;\n  height: 32px;\n  position: relative;\n}\n\n#mobius-os-sidebar .mobius-logo svg {\n  width: 100%;\n  height: 100%;\n}\n\n#mobius-os-sidebar .mobius-logo .path-normal {\n  display: none;\n}\n\n#mobius-os-sidebar .mobius-logo .path-processing {\n  display: block;\n}\n\n#mobius-os-sidebar .mobius-logo:not(.status-processing) .path-normal {\n  display: block;\n}\n\n#mobius-os-sidebar .mobius-logo:not(.status-processing) .path-processing {\n  display: none;\n}\n\n#mobius-os-sidebar .logo-label {\n  font-weight: 500;\n  font-size: 12px;\n  color: #202124;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  max-width: 120px;\n}\n\n#mobius-os-sidebar .context-display {\n  flex: 1 1 auto;\n  margin: 0;\n  font-size: 11px;\n  color: #5f6368;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  justify-content: center;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  min-width: 0;\n}\n\n#mobius-os-sidebar .status-indicator {\n  width: 8px;\n  height: 8px;\n  border-radius: 50%;\n  flex-shrink: 0;\n}\n\n#mobius-os-sidebar .status-proceed,\n#mobius-os-sidebar .status-green {\n  background: #16a34a;\n  box-shadow: 0 0 4px rgba(22, 163, 74, 0.6);\n}\n\n#mobius-os-sidebar .status-pending,\n#mobius-os-sidebar .status-yellow {\n  background: #f59e0b;\n  box-shadow: 0 0 4px rgba(245, 158, 11, 0.6);\n}\n\n#mobius-os-sidebar .status-error,\n#mobius-os-sidebar .status-red {\n  background: #dc2626;\n  box-shadow: 0 0 4px rgba(220, 38, 38, 0.6);\n}\n\n#mobius-os-sidebar .status-blue {\n  background: #2563eb;\n  box-shadow: 0 0 4px rgba(37, 99, 235, 0.6);\n}\n\n#mobius-os-sidebar .status-grey {\n  background: #94a3b8;\n  box-shadow: 0 0 4px rgba(148, 163, 184, 0.6);\n}\n\n#mobius-os-sidebar .mode-badge {\n  display: inline-block;\n  padding: 3px 8px;\n  background: rgba(26, 115, 232, 0.10);\n  color: #1a73e8;\n  border-radius: 12px;\n  font-size: 10px;\n  font-weight: 600;\n  margin-left: 8px;\n  text-transform: uppercase;\n}\n\n#mobius-os-sidebar .alert-btn,\n#mobius-os-sidebar .settings-btn {\n  width: 32px;\n  height: 32px;\n  border: 1px solid rgba(60, 64, 67, 0.18);\n  background: white;\n  border-radius: 6px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n#mobius-os-sidebar .alert-btn {\n  font-size: 16px;\n  position: relative;\n  margin-right: 8px;\n}\n\n#mobius-os-sidebar .settings-btn {\n  font-size: 18px;\n}\n\n#mobius-os-sidebar .alert-btn:hover,\n#mobius-os-sidebar .settings-btn:hover {\n  background: #f5f5f5;\n}\n\n/* Collapse button (added to header actions) */\n#mobius-os-sidebar .collapse-btn {\n  width: 32px;\n  height: 32px;\n  border: 1px solid rgba(60, 64, 67, 0.18);\n  background: white;\n  border-radius: 6px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 16px;\n  line-height: 1;\n}\n\n#mobius-os-sidebar .collapse-btn:hover {\n  background: #f5f5f5;\n}\n\n/* Second Row */\n#mobius-os-sidebar .second-row {\n  padding-top: 10px;\n  padding-bottom: 10px;\n  border-bottom: 1px solid rgba(60, 64, 67, 0.12);\n  background: white;\n  flex-shrink: 0;\n}\n\n#mobius-os-sidebar .context-summary {\n  font-size: 12px;\n  color: #202124;\n  margin-bottom: 6px;\n  line-height: 1.4;\n}\n\n#mobius-os-sidebar .quick-action-btn {\n  display: inline-block;\n  padding: 7px 12px;\n  background: #1a73e8;\n  color: white;\n  border-radius: 10px;\n  font-size: 12px;\n  cursor: pointer;\n  border: none;\n}\n\n#mobius-os-sidebar .quick-action-btn:hover {\n  background: #1565c0;\n}\n\n/* Tasks Panel */\n#mobius-os-sidebar .tasks-panel {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  border-bottom: 1px solid rgba(60, 64, 67, 0.12);\n  background: #fff;\n  max-height: 150px;\n  overflow-y: auto;\n  flex-shrink: 0;\n}\n\n#mobius-os-sidebar .tasks-panel-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  cursor: pointer;\n  font-size: 11px;\n  font-weight: 600;\n  color: #5f6368;\n  margin-bottom: 6px;\n}\n\n#mobius-os-sidebar .tasks-panel-content {\n  display: none;\n}\n\n#mobius-os-sidebar .tasks-panel-content.show {\n  display: block;\n}\n\n#mobius-os-sidebar .task-item {\n  display: flex;\n  align-items: flex-start;\n  gap: 8px;\n  padding: 4px 0;\n  font-size: 12px;\n  color: #202124;\n}\n\n#mobius-os-sidebar .task-item.shared {\n  color: #1a73e8;\n}\n\n#mobius-os-sidebar .task-item.backend {\n  color: #5f6368;\n  font-style: italic;\n}\n\n/* Chat Area */\n#mobius-os-sidebar .chat-area {\n  flex: 1;\n  overflow-y: auto;\n  padding: 10px 12px;\n  background: #ffffff;\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  justify-content: flex-end;\n  min-height: 0;\n  flex-shrink: 1;\n}\n\n#mobius-os-sidebar .message {\n  max-width: 75%;\n  padding: 7px 10px;\n  border-radius: 10px;\n  font-size: 11px;\n  line-height: 1.45;\n  color: #0b1220;\n}\n\n#mobius-os-sidebar .system-message {\n  /* Stretch to full width to avoid shrink-to-fit issues with inline-block bubble max-width. */\n  align-self: stretch;\n  width: 100%;\n  background: transparent;\n  border: none;\n  padding: 0;\n  max-width: 100%;\n  color: #0b1220;\n}\n\n#mobius-os-sidebar .message-content {\n  white-space: pre-wrap;\n  word-break: break-word;\n}\n\n/* Compact assistant \"bubble\" */\n#mobius-os-sidebar .system-message .message-content {\n  margin-top: 4px;\n  display: inline-block;\n  background: rgba(11, 18, 32, 0.03);\n  border: 1px solid rgba(11, 18, 32, 0.10);\n  padding: 7px 10px;\n  border-radius: 10px;\n  max-width: 92%;\n}\n\n/* Make tools unobtrusive (Mini-style) */\n#mobius-os-sidebar .system-message .message-header {\n  margin-bottom: 2px;\n}\n\n#mobius-os-sidebar .system-message .message-tools-btn {\n  width: 22px;\n  height: 22px;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  background: rgba(11, 18, 32, 0.03);\n  border-radius: 6px;\n  opacity: 0.0;\n  transition: opacity 0.12s ease, background 0.15s ease;\n}\n\n#mobius-os-sidebar .system-message:hover .message-tools-btn {\n  opacity: 0.85;\n}\n\n#mobius-os-sidebar .system-message .message-tools-btn:hover {\n  opacity: 1;\n  background: rgba(11, 18, 32, 0.06);\n}\n\n#mobius-os-sidebar .user-message {\n  align-self: flex-end;\n  background: #2563eb;\n  color: white;\n}\n\n/* Thinking (minimal, collapsible line) */\n#mobius-os-sidebar .thinking-line {\n  margin: 0 0 6px 0;\n  padding: 0;\n  border: none;\n  background: transparent;\n  color: rgba(91, 102, 122, 0.7);\n  font-size: 11px;\n}\n\n#mobius-os-sidebar .thinking-line summary {\n  list-style: none;\n  cursor: pointer;\n  user-select: none;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  padding: 0;\n}\n\n#mobius-os-sidebar .thinking-line summary::-webkit-details-marker {\n  display: none;\n}\n\n#mobius-os-sidebar .thinking-line summary::after {\n  content: '▸';\n  margin-left: auto;\n  opacity: 0.7;\n}\n\n#mobius-os-sidebar .thinking-line[open] summary::after {\n  content: '▾';\n}\n\n#mobius-os-sidebar .thinking-body {\n  margin-top: 4px;\n  padding-left: 10px;\n  border-left: 2px solid rgba(11, 18, 32, 0.12);\n  white-space: pre-wrap;\n  word-break: break-word;\n}\n\n/* Chat Input */\n#mobius-os-sidebar .chat-input-area {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  border-top: 1px solid rgba(11, 18, 32, 0.08);\n  background: white;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  flex-shrink: 0;\n  width: 100%;\n}\n\n#mobius-os-sidebar .chat-input {\n  flex: 1;\n  width: 100%;\n  min-width: 0;\n  padding: 8px 12px;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  border-radius: 10px;\n  font-size: 11px;\n  outline: none;\n  background: #fff;\n  resize: none;\n  overflow: hidden;\n  line-height: 1.4;\n  -webkit-appearance: none;\n  appearance: none;\n  color: #0b1220;\n}\n\n#mobius-os-sidebar .chat-input::placeholder {\n  color: rgba(91, 102, 122, 0.7);\n}\n\n#mobius-os-sidebar .chat-input:focus {\n  border-color: #2563eb;\n}\n\n/* Message-level tools (system messages) */\n#mobius-os-sidebar .message-header {\n  display: flex;\n  justify-content: flex-end;\n  margin-bottom: 6px;\n}\n\n#mobius-os-sidebar .message-tools {\n  position: relative;\n}\n\n#mobius-os-sidebar .message-tools-btn {\n  width: 22px;\n  height: 22px;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  background: rgba(11, 18, 32, 0.03);\n  border-radius: 6px;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0;\n  line-height: 1;\n}\n\n#mobius-os-sidebar .message-tools-btn:hover {\n  background: rgba(11, 18, 32, 0.06);\n}\n\n#mobius-os-sidebar .message-tools-dropdown {\n  position: absolute;\n  top: 100%;\n  right: 0;\n  margin-top: 6px;\n  background: #fff;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  border-radius: 12px;\n  box-shadow: 0 14px 28px rgba(2, 6, 23, 0.18);\n  display: none;\n  flex-direction: column;\n  min-width: 140px;\n  z-index: 2;\n}\n\n#mobius-os-sidebar .message-tools-dropdown.show {\n  display: flex;\n}\n\n#mobius-os-sidebar .message-tools-item {\n  padding: 10px 12px;\n  border: none;\n  background: white;\n  text-align: left;\n  font-size: 12px;\n  font-weight: 600;\n  color: #0b1220;\n}\n\n#mobius-os-sidebar .message-tools-item:hover {\n  background: rgba(11, 18, 32, 0.04);\n}\n\n/* Chat tools (make compact, not stacked) */\n#mobius-os-sidebar .chat-tools {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n}\n\n#mobius-os-sidebar .chat-tool-btn {\n  width: 22px;\n  height: 22px;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  background: rgba(11, 18, 32, 0.03);\n  border-radius: 6px;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0;\n}\n\n#mobius-os-sidebar .chat-tool-btn:hover {\n  background: rgba(60, 64, 67, 0.06);\n}\n\n#mobius-os-sidebar .tools-menu {\n  position: relative;\n}\n\n#mobius-os-sidebar .tools-dropdown {\n  position: absolute;\n  bottom: 100%;\n  right: 0;\n  margin-bottom: 6px;\n  background: white;\n  border: 1px solid rgba(60, 64, 67, 0.18);\n  border-radius: 10px;\n  box-shadow: 0 10px 24px rgba(0,0,0,0.10);\n  display: none;\n  flex-direction: column;\n  min-width: 140px;\n  z-index: 2;\n}\n\n#mobius-os-sidebar .tools-dropdown.show {\n  display: flex;\n}\n\n#mobius-os-sidebar .tools-dropdown button {\n  padding: 10px 12px;\n  border: none;\n  background: white;\n  text-align: left;\n  font-size: 12px;\n}\n\n#mobius-os-sidebar .tools-dropdown button:hover {\n  background: rgba(60, 64, 67, 0.06);\n}\n\n/* Record ID Input */\n#mobius-os-sidebar .record-id-input {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  border-top: 1px solid rgba(60, 64, 67, 0.12);\n  background: white;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  flex-shrink: 0;\n}\n\n#mobius-os-sidebar .record-id-input label {\n  font-size: 11px;\n  color: #5f6368;\n  font-weight: 600;\n  white-space: nowrap;\n}\n\n#mobius-os-sidebar .record-id-input select {\n  padding: 6px 8px;\n  border: 1px solid rgba(60, 64, 67, 0.18);\n  border-radius: 8px;\n  font-size: 12px;\n  background: #fff;\n}\n\n#mobius-os-sidebar .record-id-input input {\n  flex: 1;\n  padding: 7px 10px;\n  border: 1px solid rgba(60, 64, 67, 0.18);\n  border-radius: 8px;\n  font-size: 12px;\n  outline: none;\n}\n\n/* Workflow Buttons */\n#mobius-os-sidebar .workflow-buttons {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  border-top: 1px solid rgba(60, 64, 67, 0.12);\n  background: #fff;\n  display: flex;\n  gap: 8px;\n  flex-wrap: wrap;\n  flex-shrink: 0;\n}\n\n#mobius-os-sidebar .context-button {\n  padding: 8px 10px;\n  background: rgba(60, 64, 67, 0.06);\n  border: 1px solid rgba(60, 64, 67, 0.10);\n  border-radius: 10px;\n  font-size: 12px;\n}\n\n#mobius-os-sidebar .context-button:hover {\n  background: rgba(60, 64, 67, 0.10);\n}\n\n/* Footer */\n#mobius-os-sidebar .footer {\n  padding-top: 10px;\n  padding-bottom: 10px;\n  border-top: 1px solid rgba(60, 64, 67, 0.12);\n  background: #fff;\n  flex-shrink: 0;\n}\n\n#mobius-os-sidebar .user-details {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 10px;\n  flex-wrap: nowrap;\n}\n\n#mobius-os-sidebar .user-info {\n  font-size: 12px;\n  color: #5f6368;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  min-width: 0;\n}\n\n#mobius-os-sidebar .preferences {\n  display: flex;\n  gap: 10px;\n  font-size: 11px;\n  align-items: center;\n  white-space: nowrap;\n}\n\n#mobius-os-sidebar .preferences-panel {\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n  min-width: 0;\n}\n\n#mobius-os-sidebar .preferences-expanded {\n  display: none;\n  margin-top: 6px;\n}\n\n#mobius-os-sidebar .preferences-expanded.show {\n  display: block;\n}\n\n#mobius-os-sidebar .preference-group {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  justify-content: flex-end;\n  margin-bottom: 6px;\n}\n\n#mobius-os-sidebar .preference-group label {\n  font-size: 11px;\n  color: #5f6368;\n  white-space: nowrap;\n}\n\n#mobius-os-sidebar .preference-group select {\n  padding: 6px 8px;\n  border: 1px solid rgba(60, 64, 67, 0.18);\n  border-radius: 8px;\n  font-size: 12px;\n  background: #fff;\n}\n\n#mobius-os-sidebar .preference-item {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 3px 6px;\n  border-radius: 8px;\n}\n\n#mobius-os-sidebar .preference-item:hover {\n  background: rgba(60, 64, 67, 0.06);\n}\n\n#mobius-os-sidebar .pref-value {\n  color: #1a73e8;\n  font-weight: 600;\n  font-size: 11px;\n}\n\n/* Guidance / Follow-up actions (system message CTA buttons) */\n#mobius-os-sidebar .guidance-actions {\n  margin-top: 8px;\n  padding: 6px 8px;\n  display: flex;\n  gap: 6px;\n  flex-wrap: wrap;\n  align-items: center;\n  border-radius: 10px;\n  border: 1px solid rgba(26, 115, 232, 0.18);\n  background: rgba(26, 115, 232, 0.06);\n}\n\n#mobius-os-sidebar .guidance-action-btn {\n  appearance: none;\n  border: 1px solid rgba(26, 115, 232, 0.28);\n  background: rgba(26, 115, 232, 0.10);\n  color: #174ea6;\n  padding: 5px 10px;\n  border-radius: 999px;\n  font-size: 12px;\n  line-height: 1.2;\n}\n\n#mobius-os-sidebar .guidance-action-btn:hover {\n  background: rgba(26, 115, 232, 0.16);\n  border-color: rgba(26, 115, 232, 0.38);\n}\n\n/**\n * Mini widget styles (scoped; does not affect host page nor #mobius-os-sidebar).\n */\n#mobius-os-mini,\n#mobius-os-mini * {\n  box-sizing: border-box;\n}\n\n#mobius-os-mini {\n  position: fixed !important;\n  z-index: 2147483646 !important;\n  width: 300px;\n  background: #ffffff !important;\n  color: #0b1220 !important;\n  border: 1px solid rgba(11, 18, 32, 0.12) !important;\n  border-radius: 14px !important;\n  box-shadow: 0 16px 34px rgba(2, 6, 23, 0.14) !important;\n  overflow: hidden !important;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Google Sans', sans-serif !important;\n  font-size: 12px !important;\n  font-weight: 500 !important;\n  user-select: none !important;\n}\n\n#mobius-os-mini button,\n#mobius-os-mini input {\n  font: inherit;\n}\n\n#mobius-os-mini .mobius-mini-header {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  padding: 5px 8px;\n  border-bottom: 1px solid rgba(11, 18, 32, 0.08);\n  background: rgba(11, 18, 32, 0.02);\n  cursor: grab;\n  touch-action: none;\n}\n\n#mobius-os-mini .mobius-mini-drag-handle {\n  width: 20px;\n  height: 20px;\n  border-radius: 6px;\n  border: 1px solid rgba(11, 18, 32, 0.10);\n  background: rgba(11, 18, 32, 0.03);\n  display: grid;\n  place-items: center;\n  cursor: grab;\n  flex: 0 0 auto;\n  touch-action: none;\n}\n\n#mobius-os-mini .mobius-mini-drag-handle:active {\n  cursor: grabbing;\n}\n\n#mobius-os-mini .mobius-mini-drag-dots {\n  width: 8px;\n  height: 14px;\n  background:\n    radial-gradient(circle, rgba(11,18,32,0.35) 1.5px, transparent 2px) 0 0/5px 5px;\n  border-radius: 4px;\n}\n\n#mobius-os-mini .mobius-mini-brand {\n  display: inline-flex;\n  align-items: center;\n  gap: 5px;\n  min-width: 0;\n  flex: 1 1 auto;\n}\n\n#mobius-os-mini .mobius-mini-brand .mobius-logo {\n  width: 18px;\n  height: 18px;\n}\n\n/* Client logo in Mini widget */\n#mobius-os-mini .client-logo {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  flex-shrink: 0;\n}\n\n#mobius-os-mini .client-logo.client-logo-compact {\n  gap: 0;\n}\n\n#mobius-os-mini .client-logo img {\n  width: 18px;\n  height: 18px;\n  border-radius: 3px;\n}\n\n#mobius-os-mini .client-logo-svg {\n  width: 18px;\n  height: 18px;\n  flex-shrink: 0;\n}\n\n#mobius-os-mini .client-logo-svg svg {\n  width: 100%;\n  height: 100%;\n  display: block;\n}\n\n#mobius-os-mini .client-logo-placeholder {\n  width: 18px;\n  height: 18px;\n  background: #e8eaed;\n  border-radius: 3px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 8px;\n  color: #5f6368;\n  font-weight: 600;\n}\n\n#mobius-os-mini .client-name {\n  font-size: 9px;\n  font-weight: 500;\n  color: #5f6368;\n  white-space: nowrap;\n}\n\n/* Divider between client logo and Mobius brand */\n#mobius-os-mini .mobius-mini-brand-divider {\n  width: 1px;\n  height: 14px;\n  background: rgba(11, 18, 32, 0.12);\n  margin: 0 2px;\n}\n\n#mobius-os-mini .mobius-logo {\n  width: 18px;\n  height: 18px;\n  position: relative;\n}\n\n#mobius-os-mini .mobius-logo svg {\n  width: 100%;\n  height: 100%;\n}\n\n/* Match sidebar/popup behavior: show only one path depending on status */\n#mobius-os-mini .mobius-logo .path-normal {\n  display: none;\n}\n\n#mobius-os-mini .mobius-logo .path-processing {\n  display: block;\n}\n\n#mobius-os-mini .mobius-logo:not(.status-processing) .path-normal {\n  display: block;\n}\n\n#mobius-os-mini .mobius-logo:not(.status-processing) .path-processing {\n  display: none;\n}\n\n#mobius-os-mini .mobius-mini-brand-text {\n  font-size: 10px;\n  font-weight: 600;\n  color: #0b1220;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n#mobius-os-mini .mobius-mini-menu-btn {\n  width: 22px;\n  height: 22px;\n  border-radius: 6px;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  background: rgba(11, 18, 32, 0.03);\n  cursor: pointer;\n  display: grid;\n  place-items: center;\n  font-weight: 600;\n  font-size: 10px;\n}\n\n#mobius-os-mini .mobius-mini-expand-btn {\n  width: 22px;\n  height: 22px;\n  border-radius: 6px;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  background: rgba(11, 18, 32, 0.03);\n  cursor: pointer;\n  display: grid;\n  place-items: center;\n  font-weight: 600;\n  font-size: 12px;\n  line-height: 1;\n}\n\n#mobius-os-mini .mobius-mini-expand-btn:hover {\n  background: rgba(11, 18, 32, 0.06);\n}\n\n#mobius-os-mini .mobius-mini-minimize-btn {\n  width: 22px;\n  height: 22px;\n  border-radius: 6px;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  background: rgba(11, 18, 32, 0.03);\n  cursor: pointer;\n  display: grid;\n  place-items: center;\n  font-weight: 600;\n  font-size: 14px;\n  line-height: 1;\n  color: #374151;\n}\n\n#mobius-os-mini .mobius-mini-minimize-btn:hover {\n  background: rgba(11, 18, 32, 0.06);\n}\n\n#mobius-os-mini .mobius-mini-menu-btn:hover {\n  background: rgba(11, 18, 32, 0.06);\n}\n\n/* Minimized state - compact pill */\n#mobius-os-mini.mobius-mini-minimized {\n  width: auto !important;\n  min-width: unset !important;\n  max-width: unset !important;\n  padding: 0 !important;\n  border-radius: 20px !important;\n}\n\n#mobius-os-mini.mobius-mini-minimized .mobius-mini-header {\n  padding: 6px 10px;\n  gap: 8px;\n}\n\n#mobius-os-mini.mobius-mini-minimized .mobius-mini-brand {\n  display: none;\n}\n\n#mobius-os-mini.mobius-mini-minimized .mobius-mini-expand-btn,\n#mobius-os-mini.mobius-mini-minimized .mobius-mini-menu-btn {\n  display: none;\n}\n\n#mobius-os-mini.mobius-mini-minimized .mobius-mini-row,\n#mobius-os-mini.mobius-mini-minimized .mobius-mini-attention-row,\n#mobius-os-mini.mobius-mini-minimized .mobius-mini-task-badge-row,\n#mobius-os-mini.mobius-mini-minimized .mobius-mini-note-row {\n  display: none !important;\n}\n\n/* Minimized info - patient name + attention dot (hidden by default) */\n#mobius-os-mini .mobius-mini-minimized-info {\n  display: none;\n  align-items: center;\n  gap: 6px;\n  max-width: 140px;\n}\n\n#mobius-os-mini .mobius-mini-minimized-patient {\n  font-size: 10px;\n  font-weight: 500;\n  color: #374151;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/* Show minimized info only when minimized */\n#mobius-os-mini.mobius-mini-minimized .mobius-mini-minimized-info {\n  display: flex;\n}\n\n#mobius-os-mini .mobius-mini-menu {\n  position: absolute;\n  top: 42px;\n  right: 10px;\n  background: #fff;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  border-radius: 12px;\n  box-shadow: 0 14px 28px rgba(2,6,23,0.18);\n  overflow: visible;\n  z-index: 2147483647;\n  min-width: 140px;\n  pointer-events: auto !important;\n}\n\n#mobius-os-mini .mobius-mini-menu-item {\n  display: block;\n  width: 100%;\n  text-align: left;\n  padding: 10px 12px;\n  border: none;\n  background: #fff;\n  font-size: 12px;\n  font-weight: 600;\n  cursor: pointer;\n  pointer-events: auto !important;\n}\n\n#mobius-os-mini .mobius-mini-menu-item:hover {\n  background: rgba(11, 18, 32, 0.04);\n}\n\n#mobius-os-mini .mobius-mini-menu-item.danger {\n  color: #b3261e;\n}\n\n/* Theme submenu */\n#mobius-os-mini .mobius-mini-theme-trigger {\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  color: #0b1220;\n}\n\n#mobius-os-mini .mobius-mini-theme-trigger:hover {\n  background: rgba(11, 18, 32, 0.04);\n}\n\n#mobius-os-mini .mobius-mini-theme-submenu {\n  background: #f8fafc;\n  border-top: 1px solid rgba(11, 18, 32, 0.08);\n  margin: 0;\n  padding: 0;\n}\n\n#mobius-os-mini .mobius-mini-theme-submenu .mobius-mini-menu-item {\n  padding: 8px 12px 8px 16px;\n  font-size: 11px;\n  background: #f8fafc;\n  color: #0b1220;\n}\n\n#mobius-os-mini .mobius-mini-theme-submenu .mobius-mini-menu-item:hover {\n  background: rgba(11, 18, 32, 0.08);\n}\n\n#mobius-os-mini .mobius-mini-row {\n  padding: 6px 10px;\n  border-bottom: 1px solid rgba(11, 18, 32, 0.08);\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n#mobius-os-mini .mobius-mini-row:last-child {\n  border-bottom: none;\n}\n\n#mobius-os-mini .mobius-mini-row-label {\n  width: 48px;\n  flex: 0 0 auto;\n  font-size: 9px;\n  letter-spacing: 0.04em;\n  text-transform: uppercase;\n  color: rgba(91,102,122,0.95);\n  font-weight: 600;\n}\n\n#mobius-os-mini .mobius-mini-row-body {\n  min-width: 0;\n  flex: 1 1 auto;\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n}\n\n#mobius-os-mini .mobius-mini-patient-name {\n  font-size: 11px;\n  font-weight: 600;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n#mobius-os-mini .mobius-mini-patient-id {\n  font-size: 9px;\n  font-weight: 500;\n  color: rgba(91,102,122,0.95);\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n#mobius-os-mini .mobius-mini-patient-dob {\n  font-size: 9px;\n  font-weight: 500;\n  color: rgba(91,102,122,0.95);\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n#mobius-os-mini .mobius-mini-inline-btn {\n  height: 28px;\n  border-radius: 10px;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  background: rgba(11, 18, 32, 0.03);\n  cursor: pointer;\n  font-weight: 600;\n  font-size: 11px;\n  padding: 0 10px;\n}\n\n#mobius-os-mini .mobius-mini-inline-btn:hover {\n  background: rgba(11, 18, 32, 0.06);\n}\n\n/* Icon-only button (e.g., edit patient) */\n#mobius-os-mini .mobius-mini-icon-btn {\n  width: 28px;\n  height: 28px;\n  border-radius: 10px;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  background: rgba(11, 18, 32, 0.03);\n  cursor: pointer;\n  display: grid;\n  place-items: center;\n  padding: 0;\n}\n\n#mobius-os-mini .mobius-mini-icon-btn:hover {\n  background: rgba(11, 18, 32, 0.06);\n}\n\n#mobius-os-mini .mobius-mini-icon-btn svg {\n  width: 16px;\n  height: 16px;\n  fill: rgba(11, 18, 32, 0.80);\n}\n\n#mobius-os-mini .mobius-mini-status {\n  width: 100%;\n  border: 1px solid rgba(11, 18, 32, 0.10);\n  background: rgba(11, 18, 32, 0.03);\n  border-radius: 10px;\n  padding: 5px 8px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  font-size: 10px;\n  font-weight: 600;\n  color: #0b1220;\n}\n\n#mobius-os-mini .mobius-mini-status:hover {\n  background: rgba(11, 18, 32, 0.06);\n}\n\n#mobius-os-mini .mobius-mini-dot {\n  width: 8px;\n  height: 8px;\n  border-radius: 999px;\n  flex: 0 0 auto;\n  box-shadow: 0 0 0 3px rgba(148, 163, 184, 0.18);\n  background: #94a3b8;\n}\n\n#mobius-os-mini .dot-green {\n  background: #16a34a;\n  box-shadow: 0 0 0 3px rgba(22, 163, 74, 0.14);\n}\n\n#mobius-os-mini .dot-yellow {\n  background: #f59e0b;\n  box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.18);\n}\n\n#mobius-os-mini .dot-blue {\n  background: #2563eb;\n  box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.16);\n}\n\n#mobius-os-mini .dot-grey {\n  background: #94a3b8;\n  box-shadow: 0 0 0 3px rgba(148, 163, 184, 0.18);\n}\n\n#mobius-os-mini .dot-red {\n  background: #dc2626;\n  box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.18);\n}\n\n#mobius-os-mini .dot-purple {\n  background: #9333ea;\n  box-shadow: 0 0 0 3px rgba(147, 51, 234, 0.18);\n}\n\n#mobius-os-mini .mobius-mini-status-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  min-width: 0;\n  flex: 1;\n}\n\n/* Needs Attention row - refined spacing */\n#mobius-os-mini .mobius-mini-attention-row {\n  padding: 10px;\n  gap: 10px;\n}\n\n#mobius-os-mini .mobius-mini-attention-row .mobius-mini-row-label {\n  width: 48px;\n  font-size: 9px;\n  line-height: 1.2;\n  flex-shrink: 0;\n}\n\n#mobius-os-mini .mobius-mini-attention-content {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  flex-wrap: wrap;\n}\n\n#mobius-os-mini .mobius-mini-question-text {\n  flex: 1;\n  font-size: 11px;\n  color: #1e293b;\n  line-height: 1.3;\n  min-width: 100px;\n}\n\n#mobius-os-mini .mobius-mini-attention-content {\n  flex: 1;\n  display: flex;\n  align-items: flex-start;\n  gap: 8px;\n  min-width: 0;\n}\n\n#mobius-os-mini .mobius-mini-attention-content .mobius-mini-dot {\n  margin-top: 4px;\n  margin-left: 2px;\n  flex-shrink: 0;\n}\n\n#mobius-os-mini .mobius-mini-problem-text {\n  flex: 1;\n  white-space: normal;\n  word-wrap: break-word;\n  text-align: left;\n  min-width: 0;\n  font-size: 9px;\n  line-height: 1.35;\n  color: #0b1220;\n  padding-right: 6px;\n}\n\n/* Status badge - clickable */\n#mobius-os-mini .mobius-mini-status-badge {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  padding: 3px 8px;\n  border: 1px solid rgba(11, 18, 32, 0.15);\n  border-radius: 4px;\n  background: rgba(11, 18, 32, 0.04);\n  cursor: pointer;\n  flex-shrink: 0;\n  font-size: 8px;\n  font-weight: 500;\n  color: #64748b;\n  margin-left: 4px;\n}\n\n#mobius-os-mini .mobius-mini-status-badge:hover {\n  background: rgba(11, 18, 32, 0.08);\n}\n\n#mobius-os-mini .mobius-mini-status-badge.status-resolved {\n  background: rgba(22, 163, 74, 0.1);\n  border-color: rgba(22, 163, 74, 0.3);\n  color: #16a34a;\n}\n\n#mobius-os-mini .mobius-mini-status-badge.status-unresolved {\n  background: rgba(245, 158, 11, 0.1);\n  border-color: rgba(245, 158, 11, 0.3);\n  color: #d97706;\n}\n\n#mobius-os-mini .mobius-mini-status-badge.status-unconfirmed {\n  background: rgba(148, 163, 184, 0.15);\n  border-color: rgba(148, 163, 184, 0.4);\n  color: #64748b;\n}\n\n#mobius-os-mini .mobius-mini-dropdown-icon {\n  font-size: 6px;\n  color: inherit;\n  opacity: 0.7;\n}\n\n/* Task badge row - compact */\n#mobius-os-mini .mobius-mini-task-badge-row {\n  padding: 6px 10px;\n}\n\n#mobius-os-mini .mobius-mini-task-badge-row .mobius-mini-row-label {\n  width: 48px;\n  font-size: 9px;\n  line-height: 1.2;\n}\n\n#mobius-os-mini .mobius-mini-task-badge {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  padding: 4px 8px;\n  border: 1px solid rgba(11, 18, 32, 0.10);\n  background: rgba(37, 99, 235, 0.06);\n  border-radius: 8px;\n  cursor: pointer;\n  font-size: 9px;\n  font-weight: 500;\n  color: #2563eb;\n}\n\n#mobius-os-mini .mobius-mini-task-badge:hover {\n  background: rgba(37, 99, 235, 0.12);\n}\n\n#mobius-os-mini .mobius-mini-task-count {\n  font-weight: 700;\n}\n\n/* Answer dropdown styling */\n.mobius-mini-answer-dropdown {\n  background: white !important;\n  border-radius: 6px !important;\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12) !important;\n  padding: 4px 0 !important;\n  min-width: 160px !important;\n  display: flex !important;\n  flex-direction: column !important;\n}\n\n.mobius-mini-answer-dropdown .mobius-mini-dropdown-item {\n  display: block !important;\n  width: 100% !important;\n  padding: 8px 12px !important;\n  font-size: 10px !important;\n  text-align: left !important;\n  background: transparent !important;\n  border: none !important;\n  cursor: pointer !important;\n  color: #1e293b !important;\n  line-height: 1.3 !important;\n}\n\n.mobius-mini-answer-dropdown .mobius-mini-dropdown-item:hover {\n  background: rgba(37, 99, 235, 0.08) !important;\n}\n\n#mobius-os-mini .mobius-mini-step-question {\n  font-size: 10px;\n  font-weight: 500;\n  color: #1e293b;\n  line-height: 1.3;\n}\n\n#mobius-os-mini .mobius-mini-step-buttons {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 4px;\n}\n\n#mobius-os-mini .mobius-mini-quick-answer-btn {\n  padding: 4px 8px;\n  font-size: 9px;\n  font-weight: 500;\n  border: 1px solid rgba(37, 99, 235, 0.2);\n  background: white;\n  color: #2563eb;\n  border-radius: 12px;\n  cursor: pointer;\n  transition: all 0.15s ease;\n}\n\n#mobius-os-mini .mobius-mini-quick-answer-btn:hover {\n  background: rgba(37, 99, 235, 0.08);\n  border-color: #2563eb;\n}\n\n#mobius-os-mini .mobius-mini-quick-answer-btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n#mobius-os-mini .mobius-mini-quick-answer-btn.suggested {\n  background: rgba(34, 197, 94, 0.1);\n  border-color: rgba(34, 197, 94, 0.3);\n  color: #16a34a;\n}\n\n#mobius-os-mini .mobius-mini-quick-answer-btn.suggested:hover {\n  background: rgba(34, 197, 94, 0.2);\n}\n\n#mobius-os-mini .mobius-mini-open-sidecar-btn {\n  padding: 4px 10px;\n  font-size: 9px;\n  font-weight: 500;\n  border: none;\n  background: #2563eb;\n  color: white;\n  border-radius: 12px;\n  cursor: pointer;\n  transition: all 0.15s ease;\n}\n\n#mobius-os-mini .mobius-mini-open-sidecar-btn:hover {\n  background: #1d4ed8;\n}\n\n/* Dark theme for status row */\n#mobius-os-mini.theme-dark .mobius-mini-question-text {\n  color: #e5e7eb;\n}\n\n#mobius-os-mini.theme-dark .mobius-mini-quick-answer-btn {\n  background: rgba(255, 255, 255, 0.08);\n  border-color: rgba(255, 255, 255, 0.2);\n  color: #e5e7eb;\n}\n\n#mobius-os-mini.theme-dark .mobius-mini-quick-answer-btn:hover {\n  background: rgba(255, 255, 255, 0.15);\n}\n\n#mobius-os-mini.theme-dark .mobius-mini-quick-answer-btn.suggested {\n  background: rgba(34, 197, 94, 0.2);\n  border-color: rgba(34, 197, 94, 0.4);\n  color: #4ade80;\n}\n\n#mobius-os-mini.theme-dark .mobius-mini-open-sidecar-btn {\n  background: #3b82f6;\n}\n\n/* User Greeting Row */\n#mobius-os-mini .mobius-mini-greeting-row {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 5px 10px;\n  background: linear-gradient(90deg, rgba(37, 99, 235, 0.04), rgba(99, 102, 241, 0.02));\n  border-bottom: 1px solid rgba(11, 18, 32, 0.06);\n  position: relative;\n}\n\n#mobius-os-mini .mobius-mini-greeting-main {\n  display: flex;\n  align-items: center;\n  gap: 3px;\n  background: none;\n  border: none;\n  padding: 0;\n  cursor: pointer;\n  color: inherit;\n  font: inherit;\n}\n\n#mobius-os-mini .mobius-mini-greeting-main:hover {\n  opacity: 0.8;\n}\n\n#mobius-os-mini .mobius-mini-greeting-text {\n  font-size: 9px;\n  font-weight: 500;\n  color: #3b82f6;\n}\n\n#mobius-os-mini .mobius-mini-greeting-chevron {\n  color: #60a5fa;\n  opacity: 0.6;\n  width: 10px;\n  height: 10px;\n}\n\n#mobius-os-mini .mobius-mini-greeting-dismiss {\n  width: 16px;\n  height: 16px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: none;\n  border: none;\n  border-radius: 3px;\n  cursor: pointer;\n  color: #94a3b8;\n  padding: 0;\n}\n\n#mobius-os-mini .mobius-mini-greeting-dismiss:hover {\n  background: rgba(11, 18, 32, 0.06);\n  color: #64748b;\n}\n\n#mobius-os-mini .mobius-mini-greeting-dismiss svg {\n  width: 10px;\n  height: 10px;\n}\n\n/* User Dropdown */\n#mobius-os-mini .mobius-mini-user-dropdown {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n}\n\n/* Locked Overlay */\n#mobius-os-mini .mobius-mini-locked-overlay {\n  padding: 16px;\n  text-align: center;\n  background: linear-gradient(180deg, rgba(248, 250, 252, 0.98), rgba(241, 245, 249, 0.98));\n}\n\n/* Theme variations for greeting */\n#mobius-os-mini.theme-dark .mobius-mini-greeting-row {\n  background: linear-gradient(90deg, rgba(37, 99, 235, 0.12), rgba(99, 102, 241, 0.08));\n  border-bottom-color: rgba(255, 255, 255, 0.08);\n}\n\n#mobius-os-mini.theme-dark .mobius-mini-greeting-text {\n  color: #93c5fd;\n}\n\n#mobius-os-mini.theme-dark .mobius-mini-greeting-chevron {\n  color: #60a5fa;\n}\n\n#mobius-os-mini.theme-dark .mobius-mini-greeting-dismiss {\n  color: rgba(148, 163, 184, 0.7);\n}\n\n#mobius-os-mini.theme-blue .mobius-mini-greeting-row {\n  background: linear-gradient(90deg, rgba(37, 99, 235, 0.1), rgba(96, 165, 250, 0.08));\n}\n\n#mobius-os-mini.theme-blue .mobius-mini-greeting-text {\n  color: #1d4ed8;\n}\n\n/* Attention dropdown - compact */\n#mobius-os-mini .mobius-mini-attention-dropdown {\n  min-width: 180px !important;\n  max-width: 220px;\n}\n\n#mobius-os-mini .mobius-mini-note-wrap {\n  width: 100%;\n  position: relative;\n  display: flex;\n  align-items: center;\n}\n\n#mobius-os-mini .mobius-mini-note-input {\n  width: 100%;\n  height: 28px;\n  border-radius: 10px;\n  border: 1px solid rgba(11, 18, 32, 0.14);\n  background: #fff;\n  padding: 0 34px 0 8px;\n  font-size: 10px;\n  font-weight: 500;\n  color: #0b1220;\n  outline: none;\n}\n\n#mobius-os-mini .mobius-mini-note-input::placeholder {\n  color: rgba(91,102,122,0.75);\n  font-weight: 500;\n}\n\n#mobius-os-mini .mobius-mini-note-input:focus {\n  border-color: rgba(37, 99, 235, 0.55);\n}\n\n#mobius-os-mini .mobius-mini-send-btn {\n  position: absolute;\n  right: 6px;\n  width: 28px;\n  height: 28px;\n  border-radius: 10px;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  background: rgba(11, 18, 32, 0.03);\n  cursor: pointer;\n  display: grid;\n  place-items: center;\n  padding: 0;\n}\n\n#mobius-os-mini .mobius-mini-send-btn:hover {\n  background: rgba(11, 18, 32, 0.06);\n}\n\n#mobius-os-mini .mobius-mini-send-btn svg {\n  width: 16px;\n  height: 16px;\n  display: block;\n  fill: rgba(11, 18, 32, 0.85);\n}\n\n/* =============================================================================\n   Mini Widget Themes\n   ============================================================================= */\n\n/* Theme: Light (default) - already applied via base styles */\n#mobius-os-mini.theme-light {\n  background: #ffffff !important;\n  color: #0b1220 !important;\n  border-color: rgba(11, 18, 32, 0.12) !important;\n  box-shadow: 0 16px 34px rgba(2, 6, 23, 0.14) !important;\n}\n\n/* Theme: Dark */\n#mobius-os-mini.theme-dark {\n  background: #1e293b !important;\n  color: #f1f5f9 !important;\n  border-color: #334155 !important;\n  box-shadow: 0 16px 34px rgba(0, 0, 0, 0.4) !important;\n}\n\n#mobius-os-mini.theme-dark .mobius-mini-header {\n  background: rgba(255, 255, 255, 0.03);\n  border-bottom-color: rgba(255, 255, 255, 0.08);\n}\n\n#mobius-os-mini.theme-dark .mobius-mini-brand-text {\n  color: #f1f5f9;\n}\n\n#mobius-os-mini.theme-dark .mobius-mini-row {\n  border-bottom-color: rgba(255, 255, 255, 0.08);\n}\n\n#mobius-os-mini.theme-dark .mobius-mini-row-label {\n  color: rgba(148, 163, 184, 0.9);\n}\n\n#mobius-os-mini.theme-dark .mobius-mini-patient-name {\n  color: #f1f5f9;\n}\n\n#mobius-os-mini.theme-dark .mobius-mini-patient-id,\n#mobius-os-mini.theme-dark .mobius-mini-patient-dob {\n  color: rgba(148, 163, 184, 0.9);\n}\n\n#mobius-os-mini.theme-dark .mobius-mini-minimized-patient {\n  color: #e2e8f0;\n}\n\n#mobius-os-mini.theme-dark .mobius-mini-problem-text {\n  color: #e2e8f0;\n}\n\n#mobius-os-mini.theme-dark .mobius-mini-status-badge {\n  background: rgba(255, 255, 255, 0.08);\n  border-color: rgba(255, 255, 255, 0.15);\n  color: #94a3b8;\n}\n\n#mobius-os-mini.theme-dark .mobius-mini-note-input {\n  background: #0f172a;\n  border-color: rgba(255, 255, 255, 0.12);\n  color: #f1f5f9;\n}\n\n#mobius-os-mini.theme-dark .mobius-mini-note-input::placeholder {\n  color: rgba(148, 163, 184, 0.6);\n}\n\n#mobius-os-mini.theme-dark .mobius-mini-menu-btn,\n#mobius-os-mini.theme-dark .mobius-mini-expand-btn,\n#mobius-os-mini.theme-dark .mobius-mini-minimize-btn,\n#mobius-os-mini.theme-dark .mobius-mini-drag-handle,\n#mobius-os-mini.theme-dark .mobius-mini-icon-btn,\n#mobius-os-mini.theme-dark .mobius-mini-send-btn {\n  background: rgba(255, 255, 255, 0.06);\n  border-color: rgba(255, 255, 255, 0.12);\n  color: #e5e7eb;\n}\n\n#mobius-os-mini.theme-dark .mobius-mini-task-badge {\n  background: rgba(37, 99, 235, 0.15);\n  border-color: rgba(37, 99, 235, 0.3);\n}\n\n/* Theme: Blue */\n#mobius-os-mini.theme-blue {\n  background: #eff6ff !important;\n  color: #1e3a5f !important;\n  border-color: #bfdbfe !important;\n  box-shadow: 0 16px 34px rgba(37, 99, 235, 0.15) !important;\n}\n\n#mobius-os-mini.theme-blue .mobius-mini-header {\n  background: rgba(37, 99, 235, 0.05);\n  border-bottom-color: rgba(37, 99, 235, 0.1);\n}\n\n#mobius-os-mini.theme-blue .mobius-mini-brand-text {\n  color: #1e40af;\n}\n\n#mobius-os-mini.theme-blue .mobius-mini-row {\n  border-bottom-color: rgba(37, 99, 235, 0.1);\n}\n\n#mobius-os-mini.theme-blue .mobius-mini-row-label {\n  color: #3b82f6;\n}\n\n#mobius-os-mini.theme-blue .mobius-mini-patient-name {\n  color: #1e3a5f;\n}\n\n#mobius-os-mini.theme-blue .mobius-mini-status-badge {\n  background: rgba(37, 99, 235, 0.1);\n  border-color: rgba(37, 99, 235, 0.25);\n}\n\n#mobius-os-mini.theme-blue .mobius-mini-note-input {\n  background: #ffffff;\n  border-color: #bfdbfe;\n}\n\n/* Theme: Glass */\n#mobius-os-mini.theme-glass {\n  background: rgba(255, 255, 255, 0.8) !important;\n  color: #0b1220 !important;\n  border-color: rgba(255, 255, 255, 0.5) !important;\n  box-shadow: 0 16px 34px rgba(2, 6, 23, 0.12), 0 0 0 1px rgba(255,255,255,0.2) inset !important;\n  backdrop-filter: blur(12px) !important;\n  -webkit-backdrop-filter: blur(12px) !important;\n}\n\n#mobius-os-mini.theme-glass .mobius-mini-header {\n  background: rgba(255, 255, 255, 0.3);\n  border-bottom-color: rgba(11, 18, 32, 0.06);\n}\n\n#mobius-os-mini.theme-glass .mobius-mini-row {\n  border-bottom-color: rgba(11, 18, 32, 0.06);\n}\n\n#mobius-os-mini.theme-glass .mobius-mini-note-input {\n  background: rgba(255, 255, 255, 0.6);\n}\n\n#mobius-os-mini.theme-glass .mobius-mini-menu-btn,\n#mobius-os-mini.theme-glass .mobius-mini-expand-btn,\n#mobius-os-mini.theme-glass .mobius-mini-minimize-btn,\n#mobius-os-mini.theme-glass .mobius-mini-drag-handle {\n  background: rgba(255, 255, 255, 0.4);\n}\n\n#mobius-os-mini.theme-glass .mobius-mini-minimized-patient {\n  color: #1e293b;\n}\n\n/* Patient edit modal */\n.mobius-mini-modal-overlay {\n  position: fixed;\n  inset: 0;\n  background: rgba(2, 6, 23, 0.28);\n  z-index: 2147483647;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 18px;\n}\n\n.mobius-mini-modal {\n  width: 360px;\n  max-width: calc(100vw - 36px);\n  background: #fff;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  border-radius: 14px;\n  box-shadow: 0 18px 40px rgba(2, 6, 23, 0.20);\n  overflow: hidden;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Google Sans', sans-serif;\n  color: #0b1220;\n}\n\n.mobius-mini-modal-header {\n  padding: 10px 12px;\n  border-bottom: 1px solid rgba(11, 18, 32, 0.08);\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 10px;\n}\n\n.mobius-mini-modal-title {\n  font-size: 12px;\n  font-weight: 600;\n}\n\n.mobius-mini-modal-close {\n  width: 28px;\n  height: 28px;\n  border-radius: 10px;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  background: rgba(11, 18, 32, 0.03);\n  cursor: pointer;\n  display: grid;\n  place-items: center;\n  font-weight: 600;\n}\n\n.mobius-mini-modal-close:hover {\n  background: rgba(11, 18, 32, 0.06);\n}\n\n.mobius-mini-modal-body {\n  padding: 14px 16px 12px;\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n\n.mobius-mini-field {\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n}\n\n.mobius-mini-field-label {\n  font-size: 9px;\n  letter-spacing: 0.10em;\n  text-transform: uppercase;\n  color: rgba(91,102,122,0.95);\n  font-weight: 600;\n  margin-bottom: 0;\n}\n\n.mobius-mini-search-input {\n  position: relative;\n  display: flex;\n  align-items: center;\n}\n\n.mobius-mini-search-icon {\n  position: absolute;\n  left: 10px;\n  width: 16px;\n  height: 16px;\n  display: grid;\n  place-items: center;\n  opacity: 0.75;\n  pointer-events: none;\n}\n\n.mobius-mini-search-icon svg {\n  width: 16px;\n  height: 16px;\n  fill: rgba(91, 102, 122, 0.95);\n}\n\n.mobius-mini-input.mobius-mini-input-with-icon {\n  padding-left: 34px;\n}\n\n.mobius-mini-input {\n  width: 100%;\n  height: 34px;\n  border-radius: 12px;\n  border: 1px solid rgba(11, 18, 32, 0.14);\n  padding: 0 10px;\n  font-size: 12px;\n  font-weight: 500;\n  outline: none;\n}\n\n.mobius-mini-input:focus {\n  border-color: rgba(37, 99, 235, 0.55);\n}\n\n.mobius-mini-field-hint {\n  font-size: 12px;\n  color: rgba(91,102,122,0.95);\n}\n\n.mobius-mini-suggestions {\n  display: none;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  border-radius: 12px;\n  background: #fff;\n  overflow: hidden;\n  box-shadow: 0 12px 24px rgba(2,6,23,0.12);\n}\n\n.mobius-mini-suggestion {\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 10px;\n  padding: 10px 12px;\n  border: none;\n  background: #fff;\n  cursor: pointer;\n  font: inherit;\n}\n\n.mobius-mini-suggestion:hover {\n  background: rgba(11, 18, 32, 0.04);\n}\n\n.mobius-mini-suggestion.active {\n  background: rgba(37, 99, 235, 0.10);\n}\n\n.mobius-mini-suggestion .name {\n  font-size: 12px;\n  font-weight: 600;\n  color: #0b1220;\n  min-width: 0;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.mobius-mini-suggestion .id {\n  font-size: 11px;\n  font-weight: 500;\n  color: rgba(91,102,122,0.95);\n  white-space: nowrap;\n  flex: 0 0 auto;\n}\n\n.mobius-mini-modal-actions {\n  padding: 10px 12px;\n  border-top: 1px solid rgba(11, 18, 32, 0.08);\n  display: flex;\n  justify-content: flex-end;\n  gap: 8px;\n}\n\n.mobius-mini-btn-secondary,\n.mobius-mini-btn-primary {\n  height: 34px;\n  border-radius: 12px;\n  padding: 0 12px;\n  font-size: 12px;\n  font-weight: 600;\n  cursor: pointer;\n}\n\n.mobius-mini-btn-secondary {\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  background: rgba(11, 18, 32, 0.03);\n}\n\n.mobius-mini-btn-secondary:hover {\n  background: rgba(11, 18, 32, 0.06);\n}\n\n.mobius-mini-btn-primary {\n  border: 1px solid rgba(37, 99, 235, 0.22);\n  background: rgba(37, 99, 235, 0.12);\n  color: #1e40af;\n}\n\n.mobius-mini-btn-primary:hover {\n  background: rgba(37, 99, 235, 0.16);\n}\n\n/* Mini toast */\n.mobius-mini-toast {\n  position: fixed;\n  left: 50%;\n  top: 16px;\n  transform: translateX(-50%);\n  background: rgba(15,23,42,0.92);\n  color: #fff;\n  padding: 10px 12px;\n  border-radius: 12px;\n  font-size: 12px;\n  font-weight: 600;\n  z-index: 2147483647;\n  box-shadow: 0 14px 28px rgba(2,6,23,0.22);\n}\n\n/* =============================================================================\n   SIDECAR COMPONENTS\n   Minimalist, bottleneck-focused design\n   ============================================================================= */\n\n/* Status Bar - Modern minimal design */\n.sidecar-status-bar {\n  padding: 6px 12px;\n  background: #ffffff;\n  border-bottom: 1px solid rgba(11, 18, 32, 0.08);\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n\n.sidecar-status-bar-title-row {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 8px;\n}\n\n.sidecar-status-bar-title {\n  font-size: 7px;\n  font-weight: 600;\n  color: rgba(91, 102, 122, 0.95);\n  text-transform: uppercase;\n  letter-spacing: 0.04em;\n}\n\n.sidecar-status-bar-context {\n  font-size: 8px;\n  font-weight: 400;\n  color: rgba(91, 102, 122, 0.8);\n  white-space: nowrap;\n}\n\n.sidecar-status-bar-progress-row {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n}\n\n.sidecar-status-bar-track-wrapper {\n  flex: 1;\n  min-width: 0;\n}\n\n.sidecar-status-bar-track {\n  position: relative;\n  height: 3px;\n  border-radius: 2px;\n  /* Mono grey gradient - subtle, modern */\n  background: linear-gradient(90deg, \n    rgba(11, 18, 32, 0.08) 0%, \n    rgba(11, 18, 32, 0.12) 50%,\n    rgba(11, 18, 32, 0.06) 100%\n  );\n}\n\n/* Progress fill - darker grey to show completion */\n.sidecar-status-bar-progress {\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  background: rgba(11, 18, 32, 0.35);\n  border-radius: 2px;\n  transition: width 0.3s ease;\n}\n\n/* Current position marker */\n.sidecar-status-bar-marker {\n  position: absolute;\n  top: -3px;\n  width: 9px;\n  height: 9px;\n  border-radius: 50%;\n  transform: translateX(-50%);\n  background: #0b1220;\n  border: 2px solid #ffffff;\n  box-shadow: 0 1px 3px rgba(2, 6, 23, 0.2);\n  z-index: 2;\n}\n\n/* Percentage label */\n.sidecar-status-bar-percent {\n  font-size: 9px;\n  font-weight: 600;\n  color: #0b1220;\n  white-space: nowrap;\n}\n\n/* Bottleneck Card - Core UI */\n/* Mobius Greeting */\n.sidecar-greeting {\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n  padding-bottom: 8px;\n  margin-bottom: 6px;\n  border-bottom: 1px solid rgba(11, 18, 32, 0.06);\n}\n\n.sidecar-greeting-text {\n  font-size: 12px;\n  font-weight: 500;\n  color: #0b1220;\n}\n\n.sidecar-greeting-subtext {\n  font-size: 10px;\n  font-weight: 400;\n  color: rgba(91, 102, 122, 0.6);\n}\n\n.sidecar-bottleneck-card {\n  padding: 0;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.sidecar-bottleneck-card--clear {\n  padding: 6px 0;\n}\n\n.sidecar-bottleneck-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding-bottom: 6px;\n  border-bottom: 1px solid rgba(11, 18, 32, 0.08);\n}\n\n.sidecar-bottleneck-count {\n  font-size: 11px;\n  font-weight: 500;\n  color: #0b1220;\n}\n\n.sidecar-bottleneck-hint {\n  font-size: 9px;\n  font-weight: 400;\n  color: rgba(91, 102, 122, 0.6);\n}\n\n.sidecar-bottleneck-item {\n  background: #ffffff;\n  border: 1px solid rgba(11, 18, 32, 0.08);\n  border-radius: 6px;\n  padding: 6px 8px;\n  display: flex;\n  box-shadow: none;\n  flex-direction: column;\n  gap: 4px;\n}\n\n.sidecar-bottleneck-question-row {\n  display: flex;\n  align-items: flex-start;\n  gap: 4px;\n}\n\n.sidecar-bottleneck-question-row::before {\n  content: '';\n  display: inline-block;\n  width: 4px;\n  height: 4px;\n  min-width: 4px;\n  background: #3b82f6;\n  border-radius: 50%;\n  margin-top: 4px;\n  flex-shrink: 0;\n}\n\n.sidecar-bottleneck-checkbox {\n  width: 14px;\n  height: 14px;\n  cursor: pointer;\n  margin-top: 1px;\n}\n\n.sidecar-bottleneck-question {\n  flex: 1;\n  font-size: 10px;\n  font-weight: 500;\n  color: #0b1220;\n  line-height: 1.25;\n}\n\n.sidecar-source-badge {\n  font-size: 10px;\n  opacity: 0.7;\n}\n\n.sidecar-conflict-badge {\n  font-size: 12px;\n}\n\n.sidecar-bottleneck-answers {\n  display: flex;\n  gap: 10px;\n  flex-wrap: wrap;\n  margin-top: 4px;\n  padding: 4px 0;\n  align-items: center;\n  border-top: 1px solid rgba(11, 18, 32, 0.04);\n}\n\n#mobius-os-sidebar .sidecar-bottleneck-answers button.sidecar-answer-btn,\n.sidecar-answer-btn {\n  /* Reset all button defaults with high specificity */\n  all: unset !important;\n  box-sizing: border-box !important;\n  /* Apply our styles - pill buttons with grey background */\n  display: inline-block !important;\n  padding: 3px 8px !important;\n  margin: 0 !important;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;\n  font-size: 9px !important;\n  font-weight: 400 !important;\n  background: rgba(11, 18, 32, 0.06) !important;\n  background-color: rgba(11, 18, 32, 0.06) !important;\n  border: 1px solid rgba(11, 18, 32, 0.08) !important;\n  border-radius: 4px !important;\n  color: rgba(91, 102, 122, 0.85) !important;\n  cursor: pointer !important;\n  transition: all 0.15s ease !important;\n  text-decoration: none !important;\n  line-height: 1.3 !important;\n  white-space: nowrap !important;\n  box-shadow: none !important;\n  outline: none !important;\n}\n\n#mobius-os-sidebar .sidecar-bottleneck-answers button.sidecar-answer-btn:hover,\n.sidecar-answer-btn:hover {\n  background: rgba(11, 18, 32, 0.1) !important;\n  background-color: rgba(11, 18, 32, 0.1) !important;\n  border-color: rgba(11, 18, 32, 0.15) !important;\n  color: #0b1220 !important;\n}\n\n#mobius-os-sidebar .sidecar-bottleneck-answers button.sidecar-answer-btn.sidecar-answer-btn--selected,\n#mobius-os-sidebar button.sidecar-answer-btn.sidecar-answer-btn--selected,\n.sidecar-bottleneck-answers .sidecar-answer-btn.sidecar-answer-btn--selected,\n.sidecar-answer-btn.sidecar-answer-btn--selected,\n.sidecar-answer-btn--selected {\n  background: rgba(37, 99, 235, 0.15) !important;\n  background-color: rgba(37, 99, 235, 0.15) !important;\n  border: 1px solid rgba(37, 99, 235, 0.35) !important;\n  border-color: rgba(37, 99, 235, 0.35) !important;\n  color: #2563eb !important;\n  font-weight: 500 !important;\n}\n\n/* Assignment Dropdown - compact, near question */\n.sidecar-assign-dropdown {\n  position: relative;\n  flex-shrink: 0;\n  margin-left: auto;\n}\n\n.sidecar-assign-btn {\n  display: flex;\n  align-items: center;\n  gap: 3px;\n  padding: 3px 6px;\n  font-size: 9px;\n  font-weight: 400;\n  color: rgba(37, 99, 235, 0.9);\n  background: rgba(37, 99, 235, 0.06);\n  border: 1px solid rgba(37, 99, 235, 0.15);\n  border-radius: 6px;\n  cursor: pointer;\n  transition: all 0.15s ease;\n}\n\n.sidecar-assign-btn:hover {\n  background: rgba(37, 99, 235, 0.12);\n  border-color: rgba(37, 99, 235, 0.25);\n}\n\n.sidecar-assign-btn--assigned {\n  background: rgba(34, 197, 94, 0.08);\n  border-color: rgba(34, 197, 94, 0.25);\n  color: rgba(34, 197, 94, 0.9);\n}\n\n.sidecar-assign-label {\n  font-size: 9px;\n}\n\n.sidecar-assign-arrow {\n  font-size: 8px;\n  opacity: 0.6;\n}\n\n.sidecar-assign-menu {\n  position: absolute;\n  top: 100%;\n  right: 0;\n  margin-top: 4px;\n  min-width: 140px;\n  background: #ffffff;\n  border: 1px solid rgba(11, 18, 32, 0.10);\n  border-radius: 8px;\n  box-shadow: 0 4px 16px rgba(2, 6, 23, 0.10);\n  z-index: 100;\n  overflow: hidden;\n  padding: 4px 0;\n}\n\n.sidecar-assign-option {\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  gap: 1px;\n  width: 100%;\n  padding: 6px 10px;\n  font-size: 9px;\n  font-weight: 400;\n  color: #0b1220;\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  text-align: left;\n}\n\n.sidecar-assign-option:hover {\n  background: rgba(37, 99, 235, 0.06);\n}\n\n.sidecar-assign-option-text {\n  font-size: 10px;\n  font-weight: 400;\n  color: #0b1220;\n}\n\n.sidecar-assign-option-hint {\n  font-size: 8px;\n  font-weight: 400;\n  color: rgba(91, 102, 122, 0.6);\n}\n\n.sidecar-assign-divider {\n  height: 1px;\n  background: rgba(11, 18, 32, 0.08);\n  margin: 4px 0;\n}\n\n/* Legacy delegate row - hidden but kept for compatibility */\n.sidecar-bottleneck-delegate {\n  display: none;\n}\n\n.sidecar-bottleneck-separator {\n  font-size: 9px;\n  color: rgba(91, 102, 122, 0.7);\n  text-align: center;\n}\n\n.sidecar-mode-btn {\n  padding: 3px 8px;\n  font-size: 9px;\n  font-weight: 500;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.15s ease;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  background: rgba(11, 18, 32, 0.03);\n  color: #0b1220;\n}\n\n.sidecar-mode-btn--mobius {\n  background: rgba(11, 18, 32, 0.03);\n}\n\n.sidecar-mode-btn--mobius:hover {\n  background: rgba(11, 18, 32, 0.06);\n}\n\n.sidecar-mode-btn--user {\n  background: rgba(11, 18, 32, 0.03);\n}\n\n.sidecar-mode-btn--user:hover {\n  background: rgba(11, 18, 32, 0.06);\n}\n\n.sidecar-mode-btn--selected {\n  background: rgba(37, 99, 235, 0.1);\n  border-color: rgba(37, 99, 235, 0.35);\n  color: #2563eb;\n}\n\n/* Mobius tip - encourages user adoption */\n.sidecar-bottleneck-mobius-tip {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  margin-top: 4px;\n  padding: 3px 6px;\n  font-size: 8px;\n  font-weight: 400;\n  color: rgba(37, 99, 235, 0.75);\n  background: rgba(37, 99, 235, 0.04);\n  border-radius: 4px;\n}\n\n.sidecar-bottleneck-mobius-tip:hover {\n  background: rgba(37, 99, 235, 0.08);\n  color: #2563eb;\n}\n\n.sidecar-mobius-tip-icon {\n  font-size: 9px;\n}\n\n.sidecar-bottleneck-mobius-tip--assigned {\n  color: rgba(34, 197, 94, 0.85);\n  background: rgba(34, 197, 94, 0.06);\n  cursor: default;\n}\n\n.sidecar-bottleneck-mobius-tip--assigned:hover {\n  background: rgba(34, 197, 94, 0.06);\n  color: rgba(34, 197, 94, 0.85);\n}\n\n/* Inline note row - matches Mini note styling */\n.sidecar-bottleneck-note-row {\n  margin-top: 4px;\n  padding-top: 4px;\n  border-top: 1px solid rgba(11, 18, 32, 0.06);\n}\n\n.sidecar-bottleneck-note-wrap {\n  width: 100%;\n  position: relative;\n  display: flex;\n  align-items: center;\n}\n\n.sidecar-bottleneck-note-input {\n  width: 100%;\n  height: 22px;\n  border-radius: 6px;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  background: #fff;\n  padding: 0 26px 0 6px;\n  font-size: 9px;\n  font-weight: 400;\n  color: #0b1220;\n  outline: none;\n}\n\n.sidecar-bottleneck-note-input::placeholder {\n  color: rgba(91, 102, 122, 0.75);\n  font-weight: 500;\n}\n\n.sidecar-bottleneck-note-input:focus {\n  border-color: rgba(37, 99, 235, 0.55);\n}\n\n.sidecar-bottleneck-note-send {\n  position: absolute;\n  right: 0;\n  width: 22px;\n  height: 22px;\n  border-radius: 6px;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  background: rgba(11, 18, 32, 0.03);\n  cursor: pointer;\n  display: grid;\n  place-items: center;\n}\n\n.sidecar-bottleneck-note-send:hover {\n  background: rgba(11, 18, 32, 0.06);\n}\n\n.sidecar-bottleneck-note-send svg {\n  width: 14px;\n  height: 14px;\n  display: block;\n  fill: rgba(11, 18, 32, 0.85);\n}\n\n/* Inline button (Edit, small actions) */\n.sidecar-inline-btn {\n  height: 22px;\n  padding: 0 8px;\n  border-radius: 8px;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  background: rgba(11, 18, 32, 0.03);\n  cursor: pointer;\n  font-size: 9px;\n  font-weight: 600;\n  color: #0b1220;\n}\n\n.sidecar-inline-btn:hover {\n  background: rgba(11, 18, 32, 0.06);\n}\n\n/* Icon-only button (pencil edit, etc) - matches Mini */\n.sidecar-icon-btn {\n  width: 22px;\n  height: 22px;\n  border-radius: 8px;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  background: rgba(11, 18, 32, 0.03);\n  cursor: pointer;\n  display: grid;\n  place-items: center;\n  padding: 0;\n}\n\n.sidecar-icon-btn:hover {\n  background: rgba(11, 18, 32, 0.06);\n}\n\n.sidecar-icon-btn svg {\n  width: 12px;\n  height: 12px;\n  fill: rgba(11, 18, 32, 0.80);\n}\n\n.sidecar-bottleneck-bulk {\n  padding-top: 12px;\n  border-top: 1px solid #e5e7eb;\n}\n\n.sidecar-bottleneck-bulk-btn {\n  width: 100%;\n  padding: 8px 12px;\n  font-size: 10px;\n  font-weight: 600;\n  background: rgba(11, 18, 32, 0.03);\n  color: #0b1220;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  border-radius: 10px;\n  cursor: pointer;\n  transition: all 0.15s ease;\n}\n\n.sidecar-bottleneck-bulk-btn:hover:not(:disabled) {\n  background: rgba(11, 18, 32, 0.06);\n}\n\n.sidecar-bottleneck-bulk-btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.sidecar-bottleneck-clear {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  padding: 10px 12px;\n  background: rgba(34, 197, 94, 0.08);\n  border: 1px solid rgba(34, 197, 94, 0.15);\n  border-radius: 10px;\n}\n\n.sidecar-bottleneck-clear-icon {\n  width: 24px;\n  height: 24px;\n  background: #22c55e;\n  color: white;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 12px;\n  font-weight: bold;\n}\n\n.sidecar-bottleneck-clear-text {\n  font-size: 11px;\n  color: #166534;\n  font-weight: 500;\n}\n\n/* Context Expander */\n/* Context Expander - matches Mini row styling */\n.sidecar-context-expander {\n  border-top: 1px solid rgba(11, 18, 32, 0.08);\n  margin-top: 8px;\n}\n\n.sidecar-context-expander-toggle {\n  width: 100%;\n  padding: 6px 0;\n  background: none;\n  border: none;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  cursor: pointer;\n  font-size: 10px;\n  font-weight: 400;\n  color: rgba(91, 102, 122, 0.95);\n  transition: background 0.15s ease;\n}\n\n.sidecar-context-expander-toggle:hover {\n  background: rgba(11, 18, 32, 0.02);\n}\n\n.sidecar-context-expander-arrow {\n  font-size: 8px;\n  color: rgba(91, 102, 122, 0.4);\n  transition: transform 0.15s ease;\n}\n\n.sidecar-context-expander-toggle[aria-expanded=\"true\"] .sidecar-context-expander-arrow {\n  transform: none;\n}\n\n.sidecar-context-expander-label {\n  font-weight: 400;\n  color: rgba(91, 102, 122, 0.7);\n}\n\n.sidecar-context-expander-content {\n  padding: 0 0 8px;\n}\n\n.sidecar-section-title {\n  font-size: 7px;\n  font-weight: 500;\n  color: rgba(91, 102, 122, 0.6);\n  text-transform: uppercase;\n  letter-spacing: 0.04em;\n  margin-bottom: 4px;\n}\n\n/* Resolution Plan Section */\n.sidecar-plan-section {\n  margin-bottom: 10px;\n  padding-bottom: 8px;\n  border-bottom: 1px solid rgba(11, 18, 32, 0.06);\n}\n\n.sidecar-plan-summary {\n  margin-bottom: 6px;\n}\n\n.sidecar-plan-factors {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n\n.sidecar-plan-factor {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  font-size: 9px;\n}\n\n.sidecar-plan-factor-label {\n  flex: 1;\n  color: rgba(91, 102, 122, 0.85);\n  font-weight: 400;\n}\n\n.sidecar-plan-factor-progress {\n  font-size: 8px;\n  color: rgba(91, 102, 122, 0.6);\n  font-weight: 400;\n}\n\n.sidecar-plan-factor-bar {\n  width: 40px;\n  height: 3px;\n  background: rgba(11, 18, 32, 0.08);\n  border-radius: 2px;\n  overflow: hidden;\n}\n\n.sidecar-plan-factor-fill {\n  height: 100%;\n  background: rgba(11, 18, 32, 0.35);\n  border-radius: 2px;\n  transition: width 0.3s ease;\n}\n\n.sidecar-plan-current {\n  display: flex;\n  align-items: flex-start;\n  gap: 4px;\n  padding: 4px 6px;\n  background: rgba(11, 18, 32, 0.03);\n  border-radius: 6px;\n  margin-top: 6px;\n}\n\n.sidecar-plan-current-label {\n  font-size: 8px;\n  font-weight: 400;\n  color: rgba(91, 102, 122, 0.6);\n  flex-shrink: 0;\n}\n\n.sidecar-plan-current-text {\n  font-size: 9px;\n  font-weight: 400;\n  color: rgba(91, 102, 122, 0.85);\n  line-height: 1.3;\n}\n\n.sidecar-plan-actions {\n  font-size: 8px;\n  font-weight: 400;\n  color: rgba(37, 99, 235, 0.8);\n  margin-top: 4px;\n}\n\n/* Milestones - matches Mini compact styling */\n.sidecar-milestones-list {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n\n.sidecar-milestone {\n  background: rgba(11, 18, 32, 0.02);\n  border: 1px solid rgba(11, 18, 32, 0.06);\n  border-radius: 8px;\n  overflow: hidden;\n}\n\n.sidecar-milestone-header {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  padding: 6px 10px;\n}\n\n.sidecar-milestone-icon {\n  width: 20px;\n  height: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 12px;\n}\n\n.sidecar-milestone--complete .sidecar-milestone-icon {\n  color: #22c55e;\n}\n\n.sidecar-milestone--in_progress .sidecar-milestone-icon {\n  color: #f59e0b;\n}\n\n.sidecar-milestone--blocked .sidecar-milestone-icon {\n  color: #ef4444;\n}\n\n.sidecar-milestone--pending .sidecar-milestone-icon {\n  color: #9ca3af;\n}\n\n.sidecar-milestone-label {\n  flex: 1;\n  font-size: 13px;\n  color: #374151;\n}\n\n.sidecar-milestone-arrow {\n  font-size: 10px;\n  color: rgba(91, 102, 122, 0.7);\n}\n\n.sidecar-milestone-details {\n  padding: 8px 12px 12px 40px;\n  border-top: 1px solid #e5e7eb;\n}\n\n/* Substeps */\n.sidecar-substeps {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  margin-bottom: 8px;\n}\n\n.sidecar-substep {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  font-size: 12px;\n  color: #6b7280;\n}\n\n.sidecar-substep-icon {\n  font-size: 8px;\n}\n\n.sidecar-substep--complete .sidecar-substep-icon {\n  color: #22c55e;\n}\n\n.sidecar-substep--current .sidecar-substep-icon {\n  color: #2563eb;\n}\n\n/* Timeline */\n.sidecar-timeline {\n  border-left: 2px solid #e5e7eb;\n  padding-left: 12px;\n}\n\n.sidecar-timeline-title {\n  font-size: 11px;\n  font-weight: 600;\n  color: #9ca3af;\n  margin-bottom: 8px;\n}\n\n.sidecar-timeline-entry {\n  display: flex;\n  flex-wrap: wrap;\n  align-items: center;\n  gap: 6px;\n  font-size: 12px;\n  margin-bottom: 6px;\n  position: relative;\n}\n\n.sidecar-timeline-entry::before {\n  content: '';\n  position: absolute;\n  left: -16px;\n  width: 8px;\n  height: 8px;\n  background: #e5e7eb;\n  border-radius: 50%;\n}\n\n.sidecar-timeline-actor {\n  font-weight: 500;\n  color: #374151;\n}\n\n.sidecar-timeline-actor--mobius {\n  color: #2563eb;\n}\n\n.sidecar-timeline-actor--user {\n  color: #059669;\n}\n\n.sidecar-timeline-action {\n  color: #6b7280;\n}\n\n.sidecar-timeline-time {\n  color: #9ca3af;\n  font-size: 11px;\n}\n\n.sidecar-timeline-artifact {\n  color: #2563eb;\n  text-decoration: none;\n  font-size: 11px;\n}\n\n.sidecar-timeline-artifact:hover {\n  text-decoration: underline;\n}\n\n/* Payer Info */\n.sidecar-payer-section {\n  margin-top: 16px;\n  padding-top: 16px;\n  border-top: 1px solid #e5e7eb;\n}\n\n.sidecar-payer-info {\n  background: #f9fafb;\n  border-radius: 6px;\n  padding: 12px;\n}\n\n.sidecar-payer-name {\n  font-size: 14px;\n  font-weight: 600;\n  color: #1f2937;\n  margin-bottom: 8px;\n}\n\n.sidecar-payer-phone,\n.sidecar-payer-portal,\n.sidecar-payer-response-time {\n  font-size: 12px;\n  color: #6b7280;\n  margin-bottom: 4px;\n}\n\n.sidecar-payer-phone a,\n.sidecar-payer-portal a {\n  color: #2563eb;\n  text-decoration: none;\n}\n\n.sidecar-payer-phone a:hover,\n.sidecar-payer-portal a:hover {\n  text-decoration: underline;\n}\n\n.sidecar-policy-excerpts {\n  margin-top: 12px;\n}\n\n.sidecar-excerpts-title {\n  font-size: 11px;\n  font-weight: 600;\n  color: #9ca3af;\n  margin-bottom: 8px;\n}\n\n.sidecar-policy-excerpt {\n  background: white;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  padding: 10px;\n  margin-bottom: 8px;\n}\n\n.sidecar-excerpt-topic {\n  font-size: 12px;\n  font-weight: 600;\n  color: #374151;\n  margin-bottom: 4px;\n}\n\n.sidecar-excerpt-content {\n  font-size: 12px;\n  color: #6b7280;\n  line-height: 1.4;\n}\n\n.sidecar-excerpt-source {\n  font-size: 10px;\n  color: #9ca3af;\n  margin-top: 4px;\n}\n\n/* Quick Chat */\n/* Quick Chat - matches Mini note input styling */\n.sidecar-quick-chat {\n  padding: 10px 10px;\n  border-top: 1px solid rgba(11, 18, 32, 0.08);\n  background: #ffffff;\n}\n\n.sidecar-quick-chat-wrapper {\n  display: flex;\n  align-items: center;\n  position: relative;\n}\n\n.sidecar-quick-chat-input {\n  flex: 1;\n  height: 28px;\n  padding: 0 32px 0 8px;\n  font-size: 9px;\n  font-weight: 400;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  border-radius: 6px;\n  outline: none;\n  color: #0b1220;\n  background: #fff;\n}\n\n.sidecar-quick-chat-input::placeholder {\n  color: rgba(91, 102, 122, 0.5);\n  font-weight: 400;\n}\n\n.sidecar-quick-chat-input:focus {\n  border-color: rgba(37, 99, 235, 0.35);\n}\n\n.sidecar-quick-chat-input:disabled {\n  background: rgba(11, 18, 32, 0.02);\n}\n\n.sidecar-quick-chat-send {\n  position: absolute;\n  right: 0;\n  width: 28px;\n  height: 28px;\n  background: transparent;\n  border: none;\n  border-radius: 6px;\n  font-size: 12px;\n  cursor: pointer;\n  transition: background 0.15s ease;\n  display: grid;\n  place-items: center;\n}\n\n.sidecar-quick-chat-send:hover:not(:disabled) {\n  background: rgba(11, 18, 32, 0.04);\n}\n\n.sidecar-quick-chat-send:disabled {\n  cursor: not-allowed;\n}\n\n.sidecar-quick-chat-send svg {\n  width: 14px;\n  height: 14px;\n  display: block;\n  fill: rgba(91, 102, 122, 0.6);\n}\n\n.sidecar-quick-chat-send:hover:not(:disabled) svg {\n  fill: rgba(91, 102, 122, 0.9);\n}\n\n.sidecar-quick-chat-send:disabled svg {\n  fill: rgba(11, 18, 32, 0.2);\n}\n\n.sidecar-quick-chat-hint {\n  font-size: 9px;\n  font-weight: 400;\n  color: rgba(91, 102, 122, 0.5);\n  margin-top: 6px;\n}\n\n.sidecar-quick-chat-response {\n  background: #f0f9ff;\n  border: 1px solid #bae6fd;\n  border-radius: 8px;\n  padding: 12px;\n  margin-bottom: 8px;\n  position: relative;\n}\n\n.sidecar-quick-chat-response-text {\n  font-size: 13px;\n  color: #1e3a5f;\n  line-height: 1.4;\n}\n\n.sidecar-quick-chat-response-source {\n  font-size: 11px;\n  color: #6b7280;\n  margin-top: 6px;\n}\n\n.sidecar-quick-chat-response-dismiss {\n  position: absolute;\n  top: 8px;\n  right: 8px;\n  background: none;\n  border: none;\n  color: #9ca3af;\n  cursor: pointer;\n  font-size: 16px;\n}\n\n/* Sidecar Menu */\n/* Sidecar Menu - matches Mini menu styling */\n.sidecar-menu {\n  position: relative;\n}\n\n.sidecar-menu-btn {\n  width: 22px;\n  height: 22px;\n  border-radius: 6px;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  background: rgba(11, 18, 32, 0.03);\n  cursor: pointer;\n  display: grid;\n  place-items: center;\n  padding: 0;\n}\n\n.sidecar-menu-btn svg {\n  width: 14px;\n  height: 14px;\n  fill: rgba(11, 18, 32, 0.7);\n}\n\n.sidecar-menu-btn:hover {\n  background: rgba(11, 18, 32, 0.06);\n}\n\n.sidecar-menu-dropdown {\n  position: absolute;\n  top: 100%;\n  right: 0;\n  margin-top: 4px;\n  min-width: 140px;\n  background: #fff;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  border-radius: 10px;\n  box-shadow: 0 8px 24px rgba(2, 6, 23, 0.12);\n  z-index: 2147483647;\n  overflow: visible;\n  pointer-events: auto;\n  padding: 4px 0;\n}\n\n.sidecar-menu-item {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  width: 100%;\n  text-align: left;\n  padding: 8px 12px;\n  border: none;\n  background: transparent;\n  font-size: 11px;\n  font-weight: 400;\n  color: #0b1220;\n  cursor: pointer;\n  pointer-events: auto;\n  transition: background 0.15s ease;\n  position: relative;\n}\n\n.sidecar-menu-item:hover {\n  background: rgba(11, 18, 32, 0.04);\n}\n\n.sidecar-menu-item.danger {\n  color: #b3261e;\n}\n\n.sidecar-menu-icon {\n  width: 14px;\n  height: 14px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n}\n\n.sidecar-menu-icon svg {\n  width: 14px;\n  height: 14px;\n  fill: rgba(11, 18, 32, 0.6);\n}\n\n.sidecar-menu-label {\n  flex: 1;\n  font-size: 11px;\n  font-weight: 400;\n}\n\n.sidecar-menu-arrow {\n  font-size: 10px;\n  color: rgba(91, 102, 122, 0.6);\n  margin-left: auto;\n}\n\n.sidecar-menu-divider {\n  height: 1px;\n  background: rgba(11, 18, 32, 0.08);\n  margin: 4px 0;\n}\n\n/* Theme submenu - positioned to the left since sidecar is on right edge */\n.sidecar-menu-submenu {\n  position: absolute;\n  right: 100%;\n  left: auto;\n  top: 0;\n  margin-right: 4px;\n  min-width: 100px;\n  background: #fff;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  border-radius: 8px;\n  box-shadow: 0 4px 12px rgba(2, 6, 23, 0.1);\n  padding: 4px 0;\n  z-index: 2147483648;\n}\n\n.sidecar-menu-submenu-item {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  padding: 6px 10px;\n  font-size: 10px;\n  font-weight: 400;\n  color: #0b1220;\n  cursor: pointer;\n  transition: background 0.15s ease;\n}\n\n.sidecar-menu-submenu-item:hover {\n  background: rgba(11, 18, 32, 0.04);\n}\n\n.sidecar-menu-theme-icon {\n  font-size: 8px;\n  color: rgba(91, 102, 122, 0.7);\n}\n\n.sidecar-menu-theme-label {\n  font-size: 10px;\n  font-weight: 400;\n}\n\n/* Toggle switch - matches Mini style */\n.sidecar-menu-toggle {\n  position: relative;\n  width: 32px;\n  height: 18px;\n}\n\n.sidecar-menu-toggle-input {\n  opacity: 0;\n  width: 0;\n  height: 0;\n}\n\n.sidecar-menu-toggle-slider {\n  position: absolute;\n  cursor: pointer;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(11, 18, 32, 0.15);\n  border-radius: 9px;\n  transition: background 0.2s ease;\n}\n\n.sidecar-menu-toggle-slider::before {\n  content: '';\n  position: absolute;\n  height: 14px;\n  width: 14px;\n  left: 2px;\n  bottom: 2px;\n  background: white;\n  border-radius: 50%;\n  transition: transform 0.2s ease;\n  box-shadow: 0 1px 3px rgba(2, 6, 23, 0.15);\n}\n\n.sidecar-menu-toggle-input:checked + .sidecar-menu-toggle-slider {\n  background: #2563eb;\n}\n\n.sidecar-menu-toggle-input:checked + .sidecar-menu-toggle-slider::before {\n  transform: translateX(14px);\n}\n\n/* Collapse button - matches Mini expand/minimize buttons */\n.sidecar-collapse-btn {\n  width: 22px;\n  height: 22px;\n  border-radius: 6px;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  background: rgba(11, 18, 32, 0.03);\n  cursor: pointer;\n  display: grid;\n  place-items: center;\n  padding: 0;\n}\n\n.sidecar-collapse-btn svg {\n  width: 14px;\n  height: 14px;\n  fill: rgba(11, 18, 32, 0.7);\n}\n\n.sidecar-collapse-btn:hover {\n  background: rgba(11, 18, 32, 0.06);\n}\n\n/* Alert Indicator */\n/* Alert Indicator - matches Mini button styling */\n.sidecar-alert-indicator {\n  position: relative;\n  width: 22px;\n  height: 22px;\n  border-radius: 6px;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  background: rgba(11, 18, 32, 0.03);\n  cursor: pointer;\n  display: grid;\n  place-items: center;\n}\n\n.sidecar-alert-indicator:hover {\n  background: rgba(11, 18, 32, 0.06);\n}\n\n.sidecar-alert-icon {\n  width: 14px;\n  height: 14px;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.sidecar-alert-icon svg {\n  width: 14px;\n  height: 14px;\n  display: block;\n  fill: none;\n  stroke: rgba(11, 18, 32, 0.85);\n  stroke-width: 1.6;\n  stroke-linecap: round;\n  stroke-linejoin: round;\n}\n\n.sidecar-alert-badge {\n  position: absolute;\n  top: -4px;\n  right: -4px;\n  min-width: 14px;\n  height: 14px;\n  background: #2563eb;\n  color: white;\n  font-size: 9px;\n  font-weight: 600;\n  border-radius: 7px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0 3px;\n}\n\n.sidecar-alert-badge--high {\n  background: #dc2626;\n}\n\n.sidecar-notification-dot {\n  width: 6px;\n  height: 6px;\n  background: #2563eb;\n  border-radius: 50%;\n}\n\n.sidecar-notification-dot--high {\n  background: #dc2626;\n}\n\n/* Privacy indicator - matches Mini style */\n.sidecar-privacy-indicator {\n  font-size: 11px;\n  color: rgba(91, 102, 122, 0.95);\n}\n\n/* ========================================\n   SIDECAR THEMES\n   ======================================== */\n\n/* Dark Theme */\n#mobius-os-sidebar.theme-dark {\n  background: #1a1f2e;\n  color: #e5e7eb;\n  border-left-color: rgba(255, 255, 255, 0.08);\n}\n\n#mobius-os-sidebar.theme-dark .top-row {\n  background: rgba(255, 255, 255, 0.02);\n  border-bottom-color: rgba(255, 255, 255, 0.06);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-status-bar {\n  background: #1a1f2e;\n  border-bottom-color: rgba(255, 255, 255, 0.06);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-status-bar-context {\n  color: rgba(229, 231, 235, 0.8);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-status-bar-track {\n  background: linear-gradient(90deg, \n    rgba(255, 255, 255, 0.06) 0%, \n    rgba(255, 255, 255, 0.1) 50%,\n    rgba(255, 255, 255, 0.04) 100%\n  );\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-status-bar-progress {\n  background: rgba(255, 255, 255, 0.3);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-status-bar-marker {\n  background: #e5e7eb;\n  border-color: #1a1f2e;\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-status-bar-percent {\n  color: #e5e7eb;\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-bottleneck-item {\n  background: rgba(255, 255, 255, 0.04);\n  border-color: rgba(255, 255, 255, 0.08);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-bottleneck-question {\n  color: #e5e7eb;\n}\n\n/* Dark theme answer buttons moved to complete dark theme section below */\n\n#mobius-os-sidebar.theme-dark .sidecar-menu-btn,\n#mobius-os-sidebar.theme-dark .sidecar-collapse-btn,\n#mobius-os-sidebar.theme-dark .sidecar-alert-indicator {\n  background: rgba(255, 255, 255, 0.06);\n  border-color: rgba(255, 255, 255, 0.12);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-menu-btn svg,\n#mobius-os-sidebar.theme-dark .sidecar-collapse-btn svg,\n#mobius-os-sidebar.theme-dark .sidecar-alert-icon svg {\n  fill: rgba(229, 231, 235, 0.8);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-menu-dropdown,\n#mobius-os-sidebar.theme-dark .sidecar-menu-submenu {\n  background: #252b3b;\n  border-color: rgba(255, 255, 255, 0.1);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-menu-item {\n  color: #e5e7eb;\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-menu-item:hover {\n  background: rgba(255, 255, 255, 0.06);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-menu-icon svg {\n  fill: rgba(229, 231, 235, 0.6);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-quick-chat {\n  background: rgba(255, 255, 255, 0.02);\n  border-top-color: rgba(255, 255, 255, 0.06);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-quick-chat-input {\n  background: rgba(255, 255, 255, 0.06);\n  border-color: rgba(255, 255, 255, 0.12);\n  color: #e5e7eb;\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-quick-chat-input::placeholder {\n  color: rgba(229, 231, 235, 0.5);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-quick-chat-send {\n  background: rgba(255, 255, 255, 0.06);\n  border-color: rgba(255, 255, 255, 0.12);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-quick-chat-send svg {\n  fill: rgba(229, 231, 235, 0.7);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-section-title {\n  color: rgba(229, 231, 235, 0.7);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-context-expander-toggle {\n  color: #e5e7eb;\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-context-expander-toggle:hover {\n  background: rgba(255, 255, 255, 0.04);\n}\n\n/* Glass Theme */\n#mobius-os-sidebar.theme-glass {\n  background: rgba(255, 255, 255, 0.75);\n  backdrop-filter: blur(20px);\n  -webkit-backdrop-filter: blur(20px);\n  border-left-color: rgba(255, 255, 255, 0.3);\n}\n\n#mobius-os-sidebar.theme-glass .top-row {\n  background: rgba(255, 255, 255, 0.4);\n}\n\n#mobius-os-sidebar.theme-glass .sidecar-status-bar {\n  background: rgba(255, 255, 255, 0.5);\n}\n\n#mobius-os-sidebar.theme-glass .sidecar-bottleneck-item {\n  background: rgba(255, 255, 255, 0.6);\n  border-color: rgba(255, 255, 255, 0.4);\n  box-shadow: 0 2px 8px rgba(2, 6, 23, 0.06);\n}\n\n#mobius-os-sidebar.theme-glass .sidecar-menu-btn,\n#mobius-os-sidebar.theme-glass .sidecar-collapse-btn,\n#mobius-os-sidebar.theme-glass .sidecar-alert-indicator {\n  background: rgba(255, 255, 255, 0.5);\n  border-color: rgba(255, 255, 255, 0.4);\n}\n\n#mobius-os-sidebar.theme-glass .sidecar-menu-dropdown,\n#mobius-os-sidebar.theme-glass .sidecar-menu-submenu {\n  background: rgba(255, 255, 255, 0.9);\n  backdrop-filter: blur(10px);\n  -webkit-backdrop-filter: blur(10px);\n}\n\n#mobius-os-sidebar.theme-glass .sidecar-quick-chat {\n  background: rgba(255, 255, 255, 0.4);\n}\n\n#mobius-os-sidebar.theme-glass .sidecar-quick-chat-input {\n  background: rgba(255, 255, 255, 0.7);\n}\n\n/* ============================================\n   COMPLETE DARK THEME - All Sidecar Elements\n   ============================================ */\n\n/* Dark: Greeting */\n#mobius-os-sidebar.theme-dark .sidecar-greeting {\n  border-bottom-color: rgba(255, 255, 255, 0.08);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-greeting-text {\n  color: #f1f5f9;\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-greeting-subtext {\n  color: rgba(148, 163, 184, 0.7);\n}\n\n/* Dark: Patient Row */\n#mobius-os-sidebar.theme-dark .sidecar-patient-row {\n  border-bottom-color: rgba(255, 255, 255, 0.08) !important;\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-patient-row label {\n  color: rgba(148, 163, 184, 0.8);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-patient-row span {\n  color: #f1f5f9;\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-icon-btn {\n  background: rgba(255, 255, 255, 0.06);\n  border-color: rgba(255, 255, 255, 0.12);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-icon-btn svg {\n  fill: rgba(229, 231, 235, 0.7);\n}\n\n/* Dark: Status Bar Title */\n#mobius-os-sidebar.theme-dark .sidecar-status-bar-title {\n  color: rgba(148, 163, 184, 0.8);\n}\n\n/* Dark: Bottleneck Header */\n#mobius-os-sidebar.theme-dark .sidecar-bottleneck-header {\n  color: rgba(229, 231, 235, 0.8);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-bottleneck-count {\n  color: #f1f5f9;\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-bottleneck-hint {\n  color: rgba(148, 163, 184, 0.6);\n}\n\n/* Dark: Answer Buttons */\n#mobius-os-sidebar.theme-dark .sidecar-answer-btn {\n  background: rgba(255, 255, 255, 0.08) !important;\n  background-color: rgba(255, 255, 255, 0.08) !important;\n  border-color: rgba(255, 255, 255, 0.12) !important;\n  color: rgba(229, 231, 235, 0.85) !important;\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-answer-btn:hover {\n  background: rgba(255, 255, 255, 0.12) !important;\n  background-color: rgba(255, 255, 255, 0.12) !important;\n  border-color: rgba(255, 255, 255, 0.18) !important;\n  color: #f1f5f9 !important;\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-answer-btn--selected,\n#mobius-os-sidebar.theme-dark .sidecar-answer-btn.sidecar-answer-btn--selected {\n  background: rgba(37, 99, 235, 0.25) !important;\n  background-color: rgba(37, 99, 235, 0.25) !important;\n  border-color: rgba(37, 99, 235, 0.4) !important;\n  color: #93c5fd !important;\n}\n\n/* Dark: Note Input */\n#mobius-os-sidebar.theme-dark .sidecar-bottleneck-note-row {\n  border-top-color: rgba(255, 255, 255, 0.06);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-bottleneck-note-input {\n  background: rgba(255, 255, 255, 0.06);\n  border-color: rgba(255, 255, 255, 0.12);\n  color: #f1f5f9;\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-bottleneck-note-input::placeholder {\n  color: rgba(148, 163, 184, 0.5);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-bottleneck-note-send svg {\n  fill: rgba(229, 231, 235, 0.6);\n}\n\n/* Dark: Mobius Tip */\n#mobius-os-sidebar.theme-dark .sidecar-bottleneck-mobius-tip {\n  background: rgba(37, 99, 235, 0.15);\n  color: #93c5fd;\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-bottleneck-mobius-tip--assigned {\n  background: rgba(34, 197, 94, 0.15);\n  color: #86efac;\n}\n\n/* Dark: Assign Button */\n#mobius-os-sidebar.theme-dark .sidecar-assign-btn {\n  background: rgba(37, 99, 235, 0.2);\n  border-color: rgba(37, 99, 235, 0.4);\n  color: #93c5fd;\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-assign-btn:hover {\n  background: rgba(37, 99, 235, 0.3);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-assign-menu {\n  background: #252b3b;\n  border-color: rgba(255, 255, 255, 0.1);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-assign-option {\n  color: #e5e7eb;\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-assign-option:hover {\n  background: rgba(255, 255, 255, 0.06);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-assign-option-hint {\n  color: rgba(148, 163, 184, 0.6);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-assign-divider {\n  background: rgba(255, 255, 255, 0.08);\n}\n\n/* Dark: Context Expander */\n#mobius-os-sidebar.theme-dark .sidecar-context-expander-arrow {\n  color: rgba(148, 163, 184, 0.6);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-context-expander-label {\n  color: rgba(148, 163, 184, 0.7);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-context-expander-content {\n  border-top-color: rgba(255, 255, 255, 0.06);\n}\n\n/* Dark: Cards Container */\n#mobius-os-sidebar.theme-dark .sidecar-cards-container {\n  background: transparent;\n}\n\n/* Dark: Brand Text */\n#mobius-os-sidebar.theme-dark .sidecar-brand-text {\n  color: #f1f5f9;\n}\n\n/* ============================================\n   BLUE THEME - All Sidecar Elements\n   ============================================ */\n\n#mobius-os-sidebar.theme-blue {\n  background: #eff6ff !important;\n  color: #1e3a5f !important;\n  border-color: rgba(37, 99, 235, 0.15) !important;\n}\n\n#mobius-os-sidebar.theme-blue .top-row {\n  background: rgba(37, 99, 235, 0.05);\n  border-bottom-color: rgba(37, 99, 235, 0.1);\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-brand-text {\n  color: #1e40af;\n}\n\n/* Blue: Greeting */\n#mobius-os-sidebar.theme-blue .sidecar-greeting {\n  border-bottom-color: rgba(37, 99, 235, 0.1);\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-greeting-text {\n  color: #1e3a5f;\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-greeting-subtext {\n  color: #3b82f6;\n}\n\n/* Blue: Patient Row */\n#mobius-os-sidebar.theme-blue .sidecar-patient-row {\n  border-bottom-color: rgba(37, 99, 235, 0.1) !important;\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-patient-row label {\n  color: #3b82f6;\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-icon-btn {\n  background: rgba(37, 99, 235, 0.08);\n  border-color: rgba(37, 99, 235, 0.2);\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-icon-btn svg {\n  fill: #3b82f6;\n}\n\n/* Blue: Status Bar */\n#mobius-os-sidebar.theme-blue .sidecar-status-bar {\n  background: rgba(37, 99, 235, 0.03);\n  border-bottom-color: rgba(37, 99, 235, 0.1);\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-status-bar-title {\n  color: #3b82f6;\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-status-bar-context {\n  color: #1e40af;\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-status-bar-track {\n  background: linear-gradient(90deg, \n    rgba(37, 99, 235, 0.08) 0%, \n    rgba(37, 99, 235, 0.15) 50%, \n    rgba(37, 99, 235, 0.2) 100%);\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-status-bar-progress {\n  background: rgba(37, 99, 235, 0.5);\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-status-bar-marker {\n  background: #2563eb;\n  border-color: #eff6ff;\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-status-bar-percent {\n  color: #1e40af;\n}\n\n/* Blue: Bottleneck Card */\n#mobius-os-sidebar.theme-blue .sidecar-bottleneck-item {\n  background: rgba(255, 255, 255, 0.7);\n  border-color: rgba(37, 99, 235, 0.15);\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-bottleneck-question {\n  color: #1e3a5f;\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-bottleneck-count {\n  color: #1e40af;\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-bottleneck-hint {\n  color: #3b82f6;\n}\n\n/* Blue: Answer Buttons */\n#mobius-os-sidebar.theme-blue .sidecar-answer-btn {\n  background: rgba(37, 99, 235, 0.08) !important;\n  background-color: rgba(37, 99, 235, 0.08) !important;\n  border-color: rgba(37, 99, 235, 0.15) !important;\n  color: #3b82f6 !important;\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-answer-btn:hover {\n  background: rgba(37, 99, 235, 0.12) !important;\n  background-color: rgba(37, 99, 235, 0.12) !important;\n  border-color: rgba(37, 99, 235, 0.25) !important;\n  color: #1e40af !important;\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-answer-btn--selected,\n#mobius-os-sidebar.theme-blue .sidecar-answer-btn.sidecar-answer-btn--selected {\n  background: rgba(37, 99, 235, 0.2) !important;\n  background-color: rgba(37, 99, 235, 0.2) !important;\n  border-color: rgba(37, 99, 235, 0.4) !important;\n  color: #1d4ed8 !important;\n}\n\n/* Blue: Note Input */\n#mobius-os-sidebar.theme-blue .sidecar-bottleneck-note-row {\n  border-top-color: rgba(37, 99, 235, 0.1);\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-bottleneck-note-input {\n  background: #ffffff;\n  border-color: #bfdbfe;\n}\n\n/* Blue: Mobius Tip */\n#mobius-os-sidebar.theme-blue .sidecar-bottleneck-mobius-tip {\n  background: rgba(37, 99, 235, 0.1);\n  color: #1e40af;\n}\n\n/* Blue: Assign Button */\n#mobius-os-sidebar.theme-blue .sidecar-assign-btn {\n  background: #2563eb;\n  border-color: #1d4ed8;\n  color: #ffffff;\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-assign-btn:hover {\n  background: #1d4ed8;\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-assign-menu {\n  background: #ffffff;\n  border-color: rgba(37, 99, 235, 0.2);\n}\n\n/* Blue: Context Expander */\n#mobius-os-sidebar.theme-blue .sidecar-context-expander-toggle:hover {\n  background: rgba(37, 99, 235, 0.06);\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-context-expander-arrow {\n  color: #3b82f6;\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-context-expander-label {\n  color: #3b82f6;\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-context-expander-content {\n  border-top-color: rgba(37, 99, 235, 0.1);\n}\n\n/* Blue: Menu */\n#mobius-os-sidebar.theme-blue .sidecar-menu-btn,\n#mobius-os-sidebar.theme-blue .sidecar-collapse-btn,\n#mobius-os-sidebar.theme-blue .sidecar-alert-indicator {\n  background: rgba(37, 99, 235, 0.08);\n  border-color: rgba(37, 99, 235, 0.2);\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-menu-btn svg,\n#mobius-os-sidebar.theme-blue .sidecar-collapse-btn svg,\n#mobius-os-sidebar.theme-blue .sidecar-alert-icon svg {\n  fill: #3b82f6;\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-menu-dropdown,\n#mobius-os-sidebar.theme-blue .sidecar-menu-submenu {\n  background: #ffffff;\n  border-color: rgba(37, 99, 235, 0.15);\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-menu-item {\n  color: #1e3a5f;\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-menu-item:hover {\n  background: rgba(37, 99, 235, 0.08);\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-menu-icon svg {\n  fill: #3b82f6;\n}\n\n/* Blue: Quick Chat */\n#mobius-os-sidebar.theme-blue .sidecar-quick-chat {\n  background: rgba(255, 255, 255, 0.7);\n  border-top-color: rgba(37, 99, 235, 0.1);\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-quick-chat-input {\n  background: #ffffff;\n  border-color: #bfdbfe;\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-quick-chat-input:focus {\n  border-color: #3b82f6;\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-quick-chat-send svg {\n  fill: #3b82f6;\n}\n\n","",{version:3,sources:["webpack://./src/styles/sidebar.css"],names:[],mappings:"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",sourcesContent:["/**\n * Sidebar-only styles for Mobius OS (content script injection)\n * IMPORTANT: Must not style host page elements like html/body.\n * Everything is scoped under #mobius-os-sidebar to avoid collisions.\n */\n\n#mobius-os-sidebar,\n#mobius-os-sidebar * {\n  box-sizing: border-box;\n}\n\n#mobius-os-sidebar {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Google Sans', sans-serif;\n  background: #ffffff;\n  color: #0b1220;\n  font-size: 12px;\n  font-weight: 500;\n}\n\n/* Subtle, modern look - matching Mini */\n#mobius-os-sidebar {\n  border-left: 1px solid rgba(11, 18, 32, 0.12);\n  box-shadow: -4px 0 24px rgba(2, 6, 23, 0.08);\n}\n\n#mobius-os-sidebar button,\n#mobius-os-sidebar input,\n#mobius-os-sidebar select {\n  font: inherit;\n}\n\n#mobius-os-sidebar button {\n  cursor: pointer;\n}\n\n#mobius-os-sidebar .top-row,\n#mobius-os-sidebar .second-row,\n#mobius-os-sidebar .tasks-panel,\n#mobius-os-sidebar .chat-input-area,\n#mobius-os-sidebar .record-id-input,\n#mobius-os-sidebar .workflow-buttons,\n#mobius-os-sidebar .footer {\n  padding-left: 14px;\n  padding-right: 14px;\n}\n\n/* Top Row / Header */\n#mobius-os-sidebar .top-row {\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  gap: 8px;\n  padding-top: 8px;\n  padding-bottom: 10px;\n  border-bottom: 1px solid rgba(60, 64, 67, 0.12);\n  background: white;\n  flex-shrink: 0;\n}\n\n#mobius-os-sidebar .header-actions {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin-left: auto;\n  flex-shrink: 0;\n}\n\n#mobius-os-sidebar .header-left {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  flex: 0 1 auto;\n  min-width: 0;\n}\n\n#mobius-os-sidebar .client-logo {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  font-size: 11px;\n  color: #5f6368;\n  min-width: 100px;\n}\n\n#mobius-os-sidebar .client-logo img {\n  width: 24px;\n  height: 24px;\n  border-radius: 4px;\n}\n\n#mobius-os-sidebar .client-logo-svg {\n  width: 24px;\n  height: 24px;\n  flex-shrink: 0;\n}\n\n#mobius-os-sidebar .client-logo-svg svg {\n  width: 100%;\n  height: 100%;\n  display: block;\n}\n\n#mobius-os-sidebar .client-logo-placeholder {\n  width: 24px;\n  height: 24px;\n  background: #e8eaed;\n  border-radius: 4px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 10px;\n  color: #5f6368;\n}\n\n#mobius-os-sidebar .client-name {\n  font-weight: 500;\n  color: #202124;\n}\n\n#mobius-os-sidebar .logo-section {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  flex-wrap: nowrap;\n  min-width: 0;\n}\n\n#mobius-os-sidebar .mobius-logo {\n  width: 32px;\n  height: 32px;\n  position: relative;\n}\n\n#mobius-os-sidebar .mobius-logo svg {\n  width: 100%;\n  height: 100%;\n}\n\n#mobius-os-sidebar .mobius-logo .path-normal {\n  display: none;\n}\n\n#mobius-os-sidebar .mobius-logo .path-processing {\n  display: block;\n}\n\n#mobius-os-sidebar .mobius-logo:not(.status-processing) .path-normal {\n  display: block;\n}\n\n#mobius-os-sidebar .mobius-logo:not(.status-processing) .path-processing {\n  display: none;\n}\n\n#mobius-os-sidebar .logo-label {\n  font-weight: 500;\n  font-size: 12px;\n  color: #202124;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  max-width: 120px;\n}\n\n#mobius-os-sidebar .context-display {\n  flex: 1 1 auto;\n  margin: 0;\n  font-size: 11px;\n  color: #5f6368;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  justify-content: center;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  min-width: 0;\n}\n\n#mobius-os-sidebar .status-indicator {\n  width: 8px;\n  height: 8px;\n  border-radius: 50%;\n  flex-shrink: 0;\n}\n\n#mobius-os-sidebar .status-proceed,\n#mobius-os-sidebar .status-green {\n  background: #16a34a;\n  box-shadow: 0 0 4px rgba(22, 163, 74, 0.6);\n}\n\n#mobius-os-sidebar .status-pending,\n#mobius-os-sidebar .status-yellow {\n  background: #f59e0b;\n  box-shadow: 0 0 4px rgba(245, 158, 11, 0.6);\n}\n\n#mobius-os-sidebar .status-error,\n#mobius-os-sidebar .status-red {\n  background: #dc2626;\n  box-shadow: 0 0 4px rgba(220, 38, 38, 0.6);\n}\n\n#mobius-os-sidebar .status-blue {\n  background: #2563eb;\n  box-shadow: 0 0 4px rgba(37, 99, 235, 0.6);\n}\n\n#mobius-os-sidebar .status-grey {\n  background: #94a3b8;\n  box-shadow: 0 0 4px rgba(148, 163, 184, 0.6);\n}\n\n#mobius-os-sidebar .mode-badge {\n  display: inline-block;\n  padding: 3px 8px;\n  background: rgba(26, 115, 232, 0.10);\n  color: #1a73e8;\n  border-radius: 12px;\n  font-size: 10px;\n  font-weight: 600;\n  margin-left: 8px;\n  text-transform: uppercase;\n}\n\n#mobius-os-sidebar .alert-btn,\n#mobius-os-sidebar .settings-btn {\n  width: 32px;\n  height: 32px;\n  border: 1px solid rgba(60, 64, 67, 0.18);\n  background: white;\n  border-radius: 6px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n#mobius-os-sidebar .alert-btn {\n  font-size: 16px;\n  position: relative;\n  margin-right: 8px;\n}\n\n#mobius-os-sidebar .settings-btn {\n  font-size: 18px;\n}\n\n#mobius-os-sidebar .alert-btn:hover,\n#mobius-os-sidebar .settings-btn:hover {\n  background: #f5f5f5;\n}\n\n/* Collapse button (added to header actions) */\n#mobius-os-sidebar .collapse-btn {\n  width: 32px;\n  height: 32px;\n  border: 1px solid rgba(60, 64, 67, 0.18);\n  background: white;\n  border-radius: 6px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 16px;\n  line-height: 1;\n}\n\n#mobius-os-sidebar .collapse-btn:hover {\n  background: #f5f5f5;\n}\n\n/* Second Row */\n#mobius-os-sidebar .second-row {\n  padding-top: 10px;\n  padding-bottom: 10px;\n  border-bottom: 1px solid rgba(60, 64, 67, 0.12);\n  background: white;\n  flex-shrink: 0;\n}\n\n#mobius-os-sidebar .context-summary {\n  font-size: 12px;\n  color: #202124;\n  margin-bottom: 6px;\n  line-height: 1.4;\n}\n\n#mobius-os-sidebar .quick-action-btn {\n  display: inline-block;\n  padding: 7px 12px;\n  background: #1a73e8;\n  color: white;\n  border-radius: 10px;\n  font-size: 12px;\n  cursor: pointer;\n  border: none;\n}\n\n#mobius-os-sidebar .quick-action-btn:hover {\n  background: #1565c0;\n}\n\n/* Tasks Panel */\n#mobius-os-sidebar .tasks-panel {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  border-bottom: 1px solid rgba(60, 64, 67, 0.12);\n  background: #fff;\n  max-height: 150px;\n  overflow-y: auto;\n  flex-shrink: 0;\n}\n\n#mobius-os-sidebar .tasks-panel-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  cursor: pointer;\n  font-size: 11px;\n  font-weight: 600;\n  color: #5f6368;\n  margin-bottom: 6px;\n}\n\n#mobius-os-sidebar .tasks-panel-content {\n  display: none;\n}\n\n#mobius-os-sidebar .tasks-panel-content.show {\n  display: block;\n}\n\n#mobius-os-sidebar .task-item {\n  display: flex;\n  align-items: flex-start;\n  gap: 8px;\n  padding: 4px 0;\n  font-size: 12px;\n  color: #202124;\n}\n\n#mobius-os-sidebar .task-item.shared {\n  color: #1a73e8;\n}\n\n#mobius-os-sidebar .task-item.backend {\n  color: #5f6368;\n  font-style: italic;\n}\n\n/* Chat Area */\n#mobius-os-sidebar .chat-area {\n  flex: 1;\n  overflow-y: auto;\n  padding: 10px 12px;\n  background: #ffffff;\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  justify-content: flex-end;\n  min-height: 0;\n  flex-shrink: 1;\n}\n\n#mobius-os-sidebar .message {\n  max-width: 75%;\n  padding: 7px 10px;\n  border-radius: 10px;\n  font-size: 11px;\n  line-height: 1.45;\n  color: #0b1220;\n}\n\n#mobius-os-sidebar .system-message {\n  /* Stretch to full width to avoid shrink-to-fit issues with inline-block bubble max-width. */\n  align-self: stretch;\n  width: 100%;\n  background: transparent;\n  border: none;\n  padding: 0;\n  max-width: 100%;\n  color: #0b1220;\n}\n\n#mobius-os-sidebar .message-content {\n  white-space: pre-wrap;\n  word-break: break-word;\n}\n\n/* Compact assistant \"bubble\" */\n#mobius-os-sidebar .system-message .message-content {\n  margin-top: 4px;\n  display: inline-block;\n  background: rgba(11, 18, 32, 0.03);\n  border: 1px solid rgba(11, 18, 32, 0.10);\n  padding: 7px 10px;\n  border-radius: 10px;\n  max-width: 92%;\n}\n\n/* Make tools unobtrusive (Mini-style) */\n#mobius-os-sidebar .system-message .message-header {\n  margin-bottom: 2px;\n}\n\n#mobius-os-sidebar .system-message .message-tools-btn {\n  width: 22px;\n  height: 22px;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  background: rgba(11, 18, 32, 0.03);\n  border-radius: 6px;\n  opacity: 0.0;\n  transition: opacity 0.12s ease, background 0.15s ease;\n}\n\n#mobius-os-sidebar .system-message:hover .message-tools-btn {\n  opacity: 0.85;\n}\n\n#mobius-os-sidebar .system-message .message-tools-btn:hover {\n  opacity: 1;\n  background: rgba(11, 18, 32, 0.06);\n}\n\n#mobius-os-sidebar .user-message {\n  align-self: flex-end;\n  background: #2563eb;\n  color: white;\n}\n\n/* Thinking (minimal, collapsible line) */\n#mobius-os-sidebar .thinking-line {\n  margin: 0 0 6px 0;\n  padding: 0;\n  border: none;\n  background: transparent;\n  color: rgba(91, 102, 122, 0.7);\n  font-size: 11px;\n}\n\n#mobius-os-sidebar .thinking-line summary {\n  list-style: none;\n  cursor: pointer;\n  user-select: none;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  padding: 0;\n}\n\n#mobius-os-sidebar .thinking-line summary::-webkit-details-marker {\n  display: none;\n}\n\n#mobius-os-sidebar .thinking-line summary::after {\n  content: '▸';\n  margin-left: auto;\n  opacity: 0.7;\n}\n\n#mobius-os-sidebar .thinking-line[open] summary::after {\n  content: '▾';\n}\n\n#mobius-os-sidebar .thinking-body {\n  margin-top: 4px;\n  padding-left: 10px;\n  border-left: 2px solid rgba(11, 18, 32, 0.12);\n  white-space: pre-wrap;\n  word-break: break-word;\n}\n\n/* Chat Input */\n#mobius-os-sidebar .chat-input-area {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  border-top: 1px solid rgba(11, 18, 32, 0.08);\n  background: white;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  flex-shrink: 0;\n  width: 100%;\n}\n\n#mobius-os-sidebar .chat-input {\n  flex: 1;\n  width: 100%;\n  min-width: 0;\n  padding: 8px 12px;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  border-radius: 10px;\n  font-size: 11px;\n  outline: none;\n  background: #fff;\n  resize: none;\n  overflow: hidden;\n  line-height: 1.4;\n  -webkit-appearance: none;\n  appearance: none;\n  color: #0b1220;\n}\n\n#mobius-os-sidebar .chat-input::placeholder {\n  color: rgba(91, 102, 122, 0.7);\n}\n\n#mobius-os-sidebar .chat-input:focus {\n  border-color: #2563eb;\n}\n\n/* Message-level tools (system messages) */\n#mobius-os-sidebar .message-header {\n  display: flex;\n  justify-content: flex-end;\n  margin-bottom: 6px;\n}\n\n#mobius-os-sidebar .message-tools {\n  position: relative;\n}\n\n#mobius-os-sidebar .message-tools-btn {\n  width: 22px;\n  height: 22px;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  background: rgba(11, 18, 32, 0.03);\n  border-radius: 6px;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0;\n  line-height: 1;\n}\n\n#mobius-os-sidebar .message-tools-btn:hover {\n  background: rgba(11, 18, 32, 0.06);\n}\n\n#mobius-os-sidebar .message-tools-dropdown {\n  position: absolute;\n  top: 100%;\n  right: 0;\n  margin-top: 6px;\n  background: #fff;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  border-radius: 12px;\n  box-shadow: 0 14px 28px rgba(2, 6, 23, 0.18);\n  display: none;\n  flex-direction: column;\n  min-width: 140px;\n  z-index: 2;\n}\n\n#mobius-os-sidebar .message-tools-dropdown.show {\n  display: flex;\n}\n\n#mobius-os-sidebar .message-tools-item {\n  padding: 10px 12px;\n  border: none;\n  background: white;\n  text-align: left;\n  font-size: 12px;\n  font-weight: 600;\n  color: #0b1220;\n}\n\n#mobius-os-sidebar .message-tools-item:hover {\n  background: rgba(11, 18, 32, 0.04);\n}\n\n/* Chat tools (make compact, not stacked) */\n#mobius-os-sidebar .chat-tools {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n}\n\n#mobius-os-sidebar .chat-tool-btn {\n  width: 22px;\n  height: 22px;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  background: rgba(11, 18, 32, 0.03);\n  border-radius: 6px;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0;\n}\n\n#mobius-os-sidebar .chat-tool-btn:hover {\n  background: rgba(60, 64, 67, 0.06);\n}\n\n#mobius-os-sidebar .tools-menu {\n  position: relative;\n}\n\n#mobius-os-sidebar .tools-dropdown {\n  position: absolute;\n  bottom: 100%;\n  right: 0;\n  margin-bottom: 6px;\n  background: white;\n  border: 1px solid rgba(60, 64, 67, 0.18);\n  border-radius: 10px;\n  box-shadow: 0 10px 24px rgba(0,0,0,0.10);\n  display: none;\n  flex-direction: column;\n  min-width: 140px;\n  z-index: 2;\n}\n\n#mobius-os-sidebar .tools-dropdown.show {\n  display: flex;\n}\n\n#mobius-os-sidebar .tools-dropdown button {\n  padding: 10px 12px;\n  border: none;\n  background: white;\n  text-align: left;\n  font-size: 12px;\n}\n\n#mobius-os-sidebar .tools-dropdown button:hover {\n  background: rgba(60, 64, 67, 0.06);\n}\n\n/* Record ID Input */\n#mobius-os-sidebar .record-id-input {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  border-top: 1px solid rgba(60, 64, 67, 0.12);\n  background: white;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  flex-shrink: 0;\n}\n\n#mobius-os-sidebar .record-id-input label {\n  font-size: 11px;\n  color: #5f6368;\n  font-weight: 600;\n  white-space: nowrap;\n}\n\n#mobius-os-sidebar .record-id-input select {\n  padding: 6px 8px;\n  border: 1px solid rgba(60, 64, 67, 0.18);\n  border-radius: 8px;\n  font-size: 12px;\n  background: #fff;\n}\n\n#mobius-os-sidebar .record-id-input input {\n  flex: 1;\n  padding: 7px 10px;\n  border: 1px solid rgba(60, 64, 67, 0.18);\n  border-radius: 8px;\n  font-size: 12px;\n  outline: none;\n}\n\n/* Workflow Buttons */\n#mobius-os-sidebar .workflow-buttons {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  border-top: 1px solid rgba(60, 64, 67, 0.12);\n  background: #fff;\n  display: flex;\n  gap: 8px;\n  flex-wrap: wrap;\n  flex-shrink: 0;\n}\n\n#mobius-os-sidebar .context-button {\n  padding: 8px 10px;\n  background: rgba(60, 64, 67, 0.06);\n  border: 1px solid rgba(60, 64, 67, 0.10);\n  border-radius: 10px;\n  font-size: 12px;\n}\n\n#mobius-os-sidebar .context-button:hover {\n  background: rgba(60, 64, 67, 0.10);\n}\n\n/* Footer */\n#mobius-os-sidebar .footer {\n  padding-top: 10px;\n  padding-bottom: 10px;\n  border-top: 1px solid rgba(60, 64, 67, 0.12);\n  background: #fff;\n  flex-shrink: 0;\n}\n\n#mobius-os-sidebar .user-details {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 10px;\n  flex-wrap: nowrap;\n}\n\n#mobius-os-sidebar .user-info {\n  font-size: 12px;\n  color: #5f6368;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  min-width: 0;\n}\n\n#mobius-os-sidebar .preferences {\n  display: flex;\n  gap: 10px;\n  font-size: 11px;\n  align-items: center;\n  white-space: nowrap;\n}\n\n#mobius-os-sidebar .preferences-panel {\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n  min-width: 0;\n}\n\n#mobius-os-sidebar .preferences-expanded {\n  display: none;\n  margin-top: 6px;\n}\n\n#mobius-os-sidebar .preferences-expanded.show {\n  display: block;\n}\n\n#mobius-os-sidebar .preference-group {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  justify-content: flex-end;\n  margin-bottom: 6px;\n}\n\n#mobius-os-sidebar .preference-group label {\n  font-size: 11px;\n  color: #5f6368;\n  white-space: nowrap;\n}\n\n#mobius-os-sidebar .preference-group select {\n  padding: 6px 8px;\n  border: 1px solid rgba(60, 64, 67, 0.18);\n  border-radius: 8px;\n  font-size: 12px;\n  background: #fff;\n}\n\n#mobius-os-sidebar .preference-item {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 3px 6px;\n  border-radius: 8px;\n}\n\n#mobius-os-sidebar .preference-item:hover {\n  background: rgba(60, 64, 67, 0.06);\n}\n\n#mobius-os-sidebar .pref-value {\n  color: #1a73e8;\n  font-weight: 600;\n  font-size: 11px;\n}\n\n/* Guidance / Follow-up actions (system message CTA buttons) */\n#mobius-os-sidebar .guidance-actions {\n  margin-top: 8px;\n  padding: 6px 8px;\n  display: flex;\n  gap: 6px;\n  flex-wrap: wrap;\n  align-items: center;\n  border-radius: 10px;\n  border: 1px solid rgba(26, 115, 232, 0.18);\n  background: rgba(26, 115, 232, 0.06);\n}\n\n#mobius-os-sidebar .guidance-action-btn {\n  appearance: none;\n  border: 1px solid rgba(26, 115, 232, 0.28);\n  background: rgba(26, 115, 232, 0.10);\n  color: #174ea6;\n  padding: 5px 10px;\n  border-radius: 999px;\n  font-size: 12px;\n  line-height: 1.2;\n}\n\n#mobius-os-sidebar .guidance-action-btn:hover {\n  background: rgba(26, 115, 232, 0.16);\n  border-color: rgba(26, 115, 232, 0.38);\n}\n\n/**\n * Mini widget styles (scoped; does not affect host page nor #mobius-os-sidebar).\n */\n#mobius-os-mini,\n#mobius-os-mini * {\n  box-sizing: border-box;\n}\n\n#mobius-os-mini {\n  position: fixed !important;\n  z-index: 2147483646 !important;\n  width: 300px;\n  background: #ffffff !important;\n  color: #0b1220 !important;\n  border: 1px solid rgba(11, 18, 32, 0.12) !important;\n  border-radius: 14px !important;\n  box-shadow: 0 16px 34px rgba(2, 6, 23, 0.14) !important;\n  overflow: hidden !important;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Google Sans', sans-serif !important;\n  font-size: 12px !important;\n  font-weight: 500 !important;\n  user-select: none !important;\n}\n\n#mobius-os-mini button,\n#mobius-os-mini input {\n  font: inherit;\n}\n\n#mobius-os-mini .mobius-mini-header {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  padding: 5px 8px;\n  border-bottom: 1px solid rgba(11, 18, 32, 0.08);\n  background: rgba(11, 18, 32, 0.02);\n  cursor: grab;\n  touch-action: none;\n}\n\n#mobius-os-mini .mobius-mini-drag-handle {\n  width: 20px;\n  height: 20px;\n  border-radius: 6px;\n  border: 1px solid rgba(11, 18, 32, 0.10);\n  background: rgba(11, 18, 32, 0.03);\n  display: grid;\n  place-items: center;\n  cursor: grab;\n  flex: 0 0 auto;\n  touch-action: none;\n}\n\n#mobius-os-mini .mobius-mini-drag-handle:active {\n  cursor: grabbing;\n}\n\n#mobius-os-mini .mobius-mini-drag-dots {\n  width: 8px;\n  height: 14px;\n  background:\n    radial-gradient(circle, rgba(11,18,32,0.35) 1.5px, transparent 2px) 0 0/5px 5px;\n  border-radius: 4px;\n}\n\n#mobius-os-mini .mobius-mini-brand {\n  display: inline-flex;\n  align-items: center;\n  gap: 5px;\n  min-width: 0;\n  flex: 1 1 auto;\n}\n\n#mobius-os-mini .mobius-mini-brand .mobius-logo {\n  width: 18px;\n  height: 18px;\n}\n\n/* Client logo in Mini widget */\n#mobius-os-mini .client-logo {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  flex-shrink: 0;\n}\n\n#mobius-os-mini .client-logo.client-logo-compact {\n  gap: 0;\n}\n\n#mobius-os-mini .client-logo img {\n  width: 18px;\n  height: 18px;\n  border-radius: 3px;\n}\n\n#mobius-os-mini .client-logo-svg {\n  width: 18px;\n  height: 18px;\n  flex-shrink: 0;\n}\n\n#mobius-os-mini .client-logo-svg svg {\n  width: 100%;\n  height: 100%;\n  display: block;\n}\n\n#mobius-os-mini .client-logo-placeholder {\n  width: 18px;\n  height: 18px;\n  background: #e8eaed;\n  border-radius: 3px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 8px;\n  color: #5f6368;\n  font-weight: 600;\n}\n\n#mobius-os-mini .client-name {\n  font-size: 9px;\n  font-weight: 500;\n  color: #5f6368;\n  white-space: nowrap;\n}\n\n/* Divider between client logo and Mobius brand */\n#mobius-os-mini .mobius-mini-brand-divider {\n  width: 1px;\n  height: 14px;\n  background: rgba(11, 18, 32, 0.12);\n  margin: 0 2px;\n}\n\n#mobius-os-mini .mobius-logo {\n  width: 18px;\n  height: 18px;\n  position: relative;\n}\n\n#mobius-os-mini .mobius-logo svg {\n  width: 100%;\n  height: 100%;\n}\n\n/* Match sidebar/popup behavior: show only one path depending on status */\n#mobius-os-mini .mobius-logo .path-normal {\n  display: none;\n}\n\n#mobius-os-mini .mobius-logo .path-processing {\n  display: block;\n}\n\n#mobius-os-mini .mobius-logo:not(.status-processing) .path-normal {\n  display: block;\n}\n\n#mobius-os-mini .mobius-logo:not(.status-processing) .path-processing {\n  display: none;\n}\n\n#mobius-os-mini .mobius-mini-brand-text {\n  font-size: 10px;\n  font-weight: 600;\n  color: #0b1220;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n#mobius-os-mini .mobius-mini-menu-btn {\n  width: 22px;\n  height: 22px;\n  border-radius: 6px;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  background: rgba(11, 18, 32, 0.03);\n  cursor: pointer;\n  display: grid;\n  place-items: center;\n  font-weight: 600;\n  font-size: 10px;\n}\n\n#mobius-os-mini .mobius-mini-expand-btn {\n  width: 22px;\n  height: 22px;\n  border-radius: 6px;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  background: rgba(11, 18, 32, 0.03);\n  cursor: pointer;\n  display: grid;\n  place-items: center;\n  font-weight: 600;\n  font-size: 12px;\n  line-height: 1;\n}\n\n#mobius-os-mini .mobius-mini-expand-btn:hover {\n  background: rgba(11, 18, 32, 0.06);\n}\n\n#mobius-os-mini .mobius-mini-minimize-btn {\n  width: 22px;\n  height: 22px;\n  border-radius: 6px;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  background: rgba(11, 18, 32, 0.03);\n  cursor: pointer;\n  display: grid;\n  place-items: center;\n  font-weight: 600;\n  font-size: 14px;\n  line-height: 1;\n  color: #374151;\n}\n\n#mobius-os-mini .mobius-mini-minimize-btn:hover {\n  background: rgba(11, 18, 32, 0.06);\n}\n\n#mobius-os-mini .mobius-mini-menu-btn:hover {\n  background: rgba(11, 18, 32, 0.06);\n}\n\n/* Minimized state - compact pill */\n#mobius-os-mini.mobius-mini-minimized {\n  width: auto !important;\n  min-width: unset !important;\n  max-width: unset !important;\n  padding: 0 !important;\n  border-radius: 20px !important;\n}\n\n#mobius-os-mini.mobius-mini-minimized .mobius-mini-header {\n  padding: 6px 10px;\n  gap: 8px;\n}\n\n#mobius-os-mini.mobius-mini-minimized .mobius-mini-brand {\n  display: none;\n}\n\n#mobius-os-mini.mobius-mini-minimized .mobius-mini-expand-btn,\n#mobius-os-mini.mobius-mini-minimized .mobius-mini-menu-btn {\n  display: none;\n}\n\n#mobius-os-mini.mobius-mini-minimized .mobius-mini-row,\n#mobius-os-mini.mobius-mini-minimized .mobius-mini-attention-row,\n#mobius-os-mini.mobius-mini-minimized .mobius-mini-task-badge-row,\n#mobius-os-mini.mobius-mini-minimized .mobius-mini-note-row {\n  display: none !important;\n}\n\n/* Minimized info - patient name + attention dot (hidden by default) */\n#mobius-os-mini .mobius-mini-minimized-info {\n  display: none;\n  align-items: center;\n  gap: 6px;\n  max-width: 140px;\n}\n\n#mobius-os-mini .mobius-mini-minimized-patient {\n  font-size: 10px;\n  font-weight: 500;\n  color: #374151;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/* Show minimized info only when minimized */\n#mobius-os-mini.mobius-mini-minimized .mobius-mini-minimized-info {\n  display: flex;\n}\n\n#mobius-os-mini .mobius-mini-menu {\n  position: absolute;\n  top: 42px;\n  right: 10px;\n  background: #fff;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  border-radius: 12px;\n  box-shadow: 0 14px 28px rgba(2,6,23,0.18);\n  overflow: visible;\n  z-index: 2147483647;\n  min-width: 140px;\n  pointer-events: auto !important;\n}\n\n#mobius-os-mini .mobius-mini-menu-item {\n  display: block;\n  width: 100%;\n  text-align: left;\n  padding: 10px 12px;\n  border: none;\n  background: #fff;\n  font-size: 12px;\n  font-weight: 600;\n  cursor: pointer;\n  pointer-events: auto !important;\n}\n\n#mobius-os-mini .mobius-mini-menu-item:hover {\n  background: rgba(11, 18, 32, 0.04);\n}\n\n#mobius-os-mini .mobius-mini-menu-item.danger {\n  color: #b3261e;\n}\n\n/* Theme submenu */\n#mobius-os-mini .mobius-mini-theme-trigger {\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  color: #0b1220;\n}\n\n#mobius-os-mini .mobius-mini-theme-trigger:hover {\n  background: rgba(11, 18, 32, 0.04);\n}\n\n#mobius-os-mini .mobius-mini-theme-submenu {\n  background: #f8fafc;\n  border-top: 1px solid rgba(11, 18, 32, 0.08);\n  margin: 0;\n  padding: 0;\n}\n\n#mobius-os-mini .mobius-mini-theme-submenu .mobius-mini-menu-item {\n  padding: 8px 12px 8px 16px;\n  font-size: 11px;\n  background: #f8fafc;\n  color: #0b1220;\n}\n\n#mobius-os-mini .mobius-mini-theme-submenu .mobius-mini-menu-item:hover {\n  background: rgba(11, 18, 32, 0.08);\n}\n\n#mobius-os-mini .mobius-mini-row {\n  padding: 6px 10px;\n  border-bottom: 1px solid rgba(11, 18, 32, 0.08);\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n#mobius-os-mini .mobius-mini-row:last-child {\n  border-bottom: none;\n}\n\n#mobius-os-mini .mobius-mini-row-label {\n  width: 48px;\n  flex: 0 0 auto;\n  font-size: 9px;\n  letter-spacing: 0.04em;\n  text-transform: uppercase;\n  color: rgba(91,102,122,0.95);\n  font-weight: 600;\n}\n\n#mobius-os-mini .mobius-mini-row-body {\n  min-width: 0;\n  flex: 1 1 auto;\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n}\n\n#mobius-os-mini .mobius-mini-patient-name {\n  font-size: 11px;\n  font-weight: 600;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n#mobius-os-mini .mobius-mini-patient-id {\n  font-size: 9px;\n  font-weight: 500;\n  color: rgba(91,102,122,0.95);\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n#mobius-os-mini .mobius-mini-patient-dob {\n  font-size: 9px;\n  font-weight: 500;\n  color: rgba(91,102,122,0.95);\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n#mobius-os-mini .mobius-mini-inline-btn {\n  height: 28px;\n  border-radius: 10px;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  background: rgba(11, 18, 32, 0.03);\n  cursor: pointer;\n  font-weight: 600;\n  font-size: 11px;\n  padding: 0 10px;\n}\n\n#mobius-os-mini .mobius-mini-inline-btn:hover {\n  background: rgba(11, 18, 32, 0.06);\n}\n\n/* Icon-only button (e.g., edit patient) */\n#mobius-os-mini .mobius-mini-icon-btn {\n  width: 28px;\n  height: 28px;\n  border-radius: 10px;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  background: rgba(11, 18, 32, 0.03);\n  cursor: pointer;\n  display: grid;\n  place-items: center;\n  padding: 0;\n}\n\n#mobius-os-mini .mobius-mini-icon-btn:hover {\n  background: rgba(11, 18, 32, 0.06);\n}\n\n#mobius-os-mini .mobius-mini-icon-btn svg {\n  width: 16px;\n  height: 16px;\n  fill: rgba(11, 18, 32, 0.80);\n}\n\n#mobius-os-mini .mobius-mini-status {\n  width: 100%;\n  border: 1px solid rgba(11, 18, 32, 0.10);\n  background: rgba(11, 18, 32, 0.03);\n  border-radius: 10px;\n  padding: 5px 8px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  font-size: 10px;\n  font-weight: 600;\n  color: #0b1220;\n}\n\n#mobius-os-mini .mobius-mini-status:hover {\n  background: rgba(11, 18, 32, 0.06);\n}\n\n#mobius-os-mini .mobius-mini-dot {\n  width: 8px;\n  height: 8px;\n  border-radius: 999px;\n  flex: 0 0 auto;\n  box-shadow: 0 0 0 3px rgba(148, 163, 184, 0.18);\n  background: #94a3b8;\n}\n\n#mobius-os-mini .dot-green {\n  background: #16a34a;\n  box-shadow: 0 0 0 3px rgba(22, 163, 74, 0.14);\n}\n\n#mobius-os-mini .dot-yellow {\n  background: #f59e0b;\n  box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.18);\n}\n\n#mobius-os-mini .dot-blue {\n  background: #2563eb;\n  box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.16);\n}\n\n#mobius-os-mini .dot-grey {\n  background: #94a3b8;\n  box-shadow: 0 0 0 3px rgba(148, 163, 184, 0.18);\n}\n\n#mobius-os-mini .dot-red {\n  background: #dc2626;\n  box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.18);\n}\n\n#mobius-os-mini .dot-purple {\n  background: #9333ea;\n  box-shadow: 0 0 0 3px rgba(147, 51, 234, 0.18);\n}\n\n#mobius-os-mini .mobius-mini-status-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  min-width: 0;\n  flex: 1;\n}\n\n/* Needs Attention row - refined spacing */\n#mobius-os-mini .mobius-mini-attention-row {\n  padding: 10px;\n  gap: 10px;\n}\n\n#mobius-os-mini .mobius-mini-attention-row .mobius-mini-row-label {\n  width: 48px;\n  font-size: 9px;\n  line-height: 1.2;\n  flex-shrink: 0;\n}\n\n#mobius-os-mini .mobius-mini-attention-content {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  flex-wrap: wrap;\n}\n\n#mobius-os-mini .mobius-mini-question-text {\n  flex: 1;\n  font-size: 11px;\n  color: #1e293b;\n  line-height: 1.3;\n  min-width: 100px;\n}\n\n#mobius-os-mini .mobius-mini-attention-content {\n  flex: 1;\n  display: flex;\n  align-items: flex-start;\n  gap: 8px;\n  min-width: 0;\n}\n\n#mobius-os-mini .mobius-mini-attention-content .mobius-mini-dot {\n  margin-top: 4px;\n  margin-left: 2px;\n  flex-shrink: 0;\n}\n\n#mobius-os-mini .mobius-mini-problem-text {\n  flex: 1;\n  white-space: normal;\n  word-wrap: break-word;\n  text-align: left;\n  min-width: 0;\n  font-size: 9px;\n  line-height: 1.35;\n  color: #0b1220;\n  padding-right: 6px;\n}\n\n/* Status badge - clickable */\n#mobius-os-mini .mobius-mini-status-badge {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  padding: 3px 8px;\n  border: 1px solid rgba(11, 18, 32, 0.15);\n  border-radius: 4px;\n  background: rgba(11, 18, 32, 0.04);\n  cursor: pointer;\n  flex-shrink: 0;\n  font-size: 8px;\n  font-weight: 500;\n  color: #64748b;\n  margin-left: 4px;\n}\n\n#mobius-os-mini .mobius-mini-status-badge:hover {\n  background: rgba(11, 18, 32, 0.08);\n}\n\n#mobius-os-mini .mobius-mini-status-badge.status-resolved {\n  background: rgba(22, 163, 74, 0.1);\n  border-color: rgba(22, 163, 74, 0.3);\n  color: #16a34a;\n}\n\n#mobius-os-mini .mobius-mini-status-badge.status-unresolved {\n  background: rgba(245, 158, 11, 0.1);\n  border-color: rgba(245, 158, 11, 0.3);\n  color: #d97706;\n}\n\n#mobius-os-mini .mobius-mini-status-badge.status-unconfirmed {\n  background: rgba(148, 163, 184, 0.15);\n  border-color: rgba(148, 163, 184, 0.4);\n  color: #64748b;\n}\n\n#mobius-os-mini .mobius-mini-dropdown-icon {\n  font-size: 6px;\n  color: inherit;\n  opacity: 0.7;\n}\n\n/* Task badge row - compact */\n#mobius-os-mini .mobius-mini-task-badge-row {\n  padding: 6px 10px;\n}\n\n#mobius-os-mini .mobius-mini-task-badge-row .mobius-mini-row-label {\n  width: 48px;\n  font-size: 9px;\n  line-height: 1.2;\n}\n\n#mobius-os-mini .mobius-mini-task-badge {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  padding: 4px 8px;\n  border: 1px solid rgba(11, 18, 32, 0.10);\n  background: rgba(37, 99, 235, 0.06);\n  border-radius: 8px;\n  cursor: pointer;\n  font-size: 9px;\n  font-weight: 500;\n  color: #2563eb;\n}\n\n#mobius-os-mini .mobius-mini-task-badge:hover {\n  background: rgba(37, 99, 235, 0.12);\n}\n\n#mobius-os-mini .mobius-mini-task-count {\n  font-weight: 700;\n}\n\n/* Answer dropdown styling */\n.mobius-mini-answer-dropdown {\n  background: white !important;\n  border-radius: 6px !important;\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12) !important;\n  padding: 4px 0 !important;\n  min-width: 160px !important;\n  display: flex !important;\n  flex-direction: column !important;\n}\n\n.mobius-mini-answer-dropdown .mobius-mini-dropdown-item {\n  display: block !important;\n  width: 100% !important;\n  padding: 8px 12px !important;\n  font-size: 10px !important;\n  text-align: left !important;\n  background: transparent !important;\n  border: none !important;\n  cursor: pointer !important;\n  color: #1e293b !important;\n  line-height: 1.3 !important;\n}\n\n.mobius-mini-answer-dropdown .mobius-mini-dropdown-item:hover {\n  background: rgba(37, 99, 235, 0.08) !important;\n}\n\n#mobius-os-mini .mobius-mini-step-question {\n  font-size: 10px;\n  font-weight: 500;\n  color: #1e293b;\n  line-height: 1.3;\n}\n\n#mobius-os-mini .mobius-mini-step-buttons {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 4px;\n}\n\n#mobius-os-mini .mobius-mini-quick-answer-btn {\n  padding: 4px 8px;\n  font-size: 9px;\n  font-weight: 500;\n  border: 1px solid rgba(37, 99, 235, 0.2);\n  background: white;\n  color: #2563eb;\n  border-radius: 12px;\n  cursor: pointer;\n  transition: all 0.15s ease;\n}\n\n#mobius-os-mini .mobius-mini-quick-answer-btn:hover {\n  background: rgba(37, 99, 235, 0.08);\n  border-color: #2563eb;\n}\n\n#mobius-os-mini .mobius-mini-quick-answer-btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n#mobius-os-mini .mobius-mini-quick-answer-btn.suggested {\n  background: rgba(34, 197, 94, 0.1);\n  border-color: rgba(34, 197, 94, 0.3);\n  color: #16a34a;\n}\n\n#mobius-os-mini .mobius-mini-quick-answer-btn.suggested:hover {\n  background: rgba(34, 197, 94, 0.2);\n}\n\n#mobius-os-mini .mobius-mini-open-sidecar-btn {\n  padding: 4px 10px;\n  font-size: 9px;\n  font-weight: 500;\n  border: none;\n  background: #2563eb;\n  color: white;\n  border-radius: 12px;\n  cursor: pointer;\n  transition: all 0.15s ease;\n}\n\n#mobius-os-mini .mobius-mini-open-sidecar-btn:hover {\n  background: #1d4ed8;\n}\n\n/* Dark theme for status row */\n#mobius-os-mini.theme-dark .mobius-mini-question-text {\n  color: #e5e7eb;\n}\n\n#mobius-os-mini.theme-dark .mobius-mini-quick-answer-btn {\n  background: rgba(255, 255, 255, 0.08);\n  border-color: rgba(255, 255, 255, 0.2);\n  color: #e5e7eb;\n}\n\n#mobius-os-mini.theme-dark .mobius-mini-quick-answer-btn:hover {\n  background: rgba(255, 255, 255, 0.15);\n}\n\n#mobius-os-mini.theme-dark .mobius-mini-quick-answer-btn.suggested {\n  background: rgba(34, 197, 94, 0.2);\n  border-color: rgba(34, 197, 94, 0.4);\n  color: #4ade80;\n}\n\n#mobius-os-mini.theme-dark .mobius-mini-open-sidecar-btn {\n  background: #3b82f6;\n}\n\n/* User Greeting Row */\n#mobius-os-mini .mobius-mini-greeting-row {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 5px 10px;\n  background: linear-gradient(90deg, rgba(37, 99, 235, 0.04), rgba(99, 102, 241, 0.02));\n  border-bottom: 1px solid rgba(11, 18, 32, 0.06);\n  position: relative;\n}\n\n#mobius-os-mini .mobius-mini-greeting-main {\n  display: flex;\n  align-items: center;\n  gap: 3px;\n  background: none;\n  border: none;\n  padding: 0;\n  cursor: pointer;\n  color: inherit;\n  font: inherit;\n}\n\n#mobius-os-mini .mobius-mini-greeting-main:hover {\n  opacity: 0.8;\n}\n\n#mobius-os-mini .mobius-mini-greeting-text {\n  font-size: 9px;\n  font-weight: 500;\n  color: #3b82f6;\n}\n\n#mobius-os-mini .mobius-mini-greeting-chevron {\n  color: #60a5fa;\n  opacity: 0.6;\n  width: 10px;\n  height: 10px;\n}\n\n#mobius-os-mini .mobius-mini-greeting-dismiss {\n  width: 16px;\n  height: 16px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: none;\n  border: none;\n  border-radius: 3px;\n  cursor: pointer;\n  color: #94a3b8;\n  padding: 0;\n}\n\n#mobius-os-mini .mobius-mini-greeting-dismiss:hover {\n  background: rgba(11, 18, 32, 0.06);\n  color: #64748b;\n}\n\n#mobius-os-mini .mobius-mini-greeting-dismiss svg {\n  width: 10px;\n  height: 10px;\n}\n\n/* User Dropdown */\n#mobius-os-mini .mobius-mini-user-dropdown {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n}\n\n/* Locked Overlay */\n#mobius-os-mini .mobius-mini-locked-overlay {\n  padding: 16px;\n  text-align: center;\n  background: linear-gradient(180deg, rgba(248, 250, 252, 0.98), rgba(241, 245, 249, 0.98));\n}\n\n/* Theme variations for greeting */\n#mobius-os-mini.theme-dark .mobius-mini-greeting-row {\n  background: linear-gradient(90deg, rgba(37, 99, 235, 0.12), rgba(99, 102, 241, 0.08));\n  border-bottom-color: rgba(255, 255, 255, 0.08);\n}\n\n#mobius-os-mini.theme-dark .mobius-mini-greeting-text {\n  color: #93c5fd;\n}\n\n#mobius-os-mini.theme-dark .mobius-mini-greeting-chevron {\n  color: #60a5fa;\n}\n\n#mobius-os-mini.theme-dark .mobius-mini-greeting-dismiss {\n  color: rgba(148, 163, 184, 0.7);\n}\n\n#mobius-os-mini.theme-blue .mobius-mini-greeting-row {\n  background: linear-gradient(90deg, rgba(37, 99, 235, 0.1), rgba(96, 165, 250, 0.08));\n}\n\n#mobius-os-mini.theme-blue .mobius-mini-greeting-text {\n  color: #1d4ed8;\n}\n\n/* Attention dropdown - compact */\n#mobius-os-mini .mobius-mini-attention-dropdown {\n  min-width: 180px !important;\n  max-width: 220px;\n}\n\n#mobius-os-mini .mobius-mini-note-wrap {\n  width: 100%;\n  position: relative;\n  display: flex;\n  align-items: center;\n}\n\n#mobius-os-mini .mobius-mini-note-input {\n  width: 100%;\n  height: 28px;\n  border-radius: 10px;\n  border: 1px solid rgba(11, 18, 32, 0.14);\n  background: #fff;\n  padding: 0 34px 0 8px;\n  font-size: 10px;\n  font-weight: 500;\n  color: #0b1220;\n  outline: none;\n}\n\n#mobius-os-mini .mobius-mini-note-input::placeholder {\n  color: rgba(91,102,122,0.75);\n  font-weight: 500;\n}\n\n#mobius-os-mini .mobius-mini-note-input:focus {\n  border-color: rgba(37, 99, 235, 0.55);\n}\n\n#mobius-os-mini .mobius-mini-send-btn {\n  position: absolute;\n  right: 6px;\n  width: 28px;\n  height: 28px;\n  border-radius: 10px;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  background: rgba(11, 18, 32, 0.03);\n  cursor: pointer;\n  display: grid;\n  place-items: center;\n  padding: 0;\n}\n\n#mobius-os-mini .mobius-mini-send-btn:hover {\n  background: rgba(11, 18, 32, 0.06);\n}\n\n#mobius-os-mini .mobius-mini-send-btn svg {\n  width: 16px;\n  height: 16px;\n  display: block;\n  fill: rgba(11, 18, 32, 0.85);\n}\n\n/* =============================================================================\n   Mini Widget Themes\n   ============================================================================= */\n\n/* Theme: Light (default) - already applied via base styles */\n#mobius-os-mini.theme-light {\n  background: #ffffff !important;\n  color: #0b1220 !important;\n  border-color: rgba(11, 18, 32, 0.12) !important;\n  box-shadow: 0 16px 34px rgba(2, 6, 23, 0.14) !important;\n}\n\n/* Theme: Dark */\n#mobius-os-mini.theme-dark {\n  background: #1e293b !important;\n  color: #f1f5f9 !important;\n  border-color: #334155 !important;\n  box-shadow: 0 16px 34px rgba(0, 0, 0, 0.4) !important;\n}\n\n#mobius-os-mini.theme-dark .mobius-mini-header {\n  background: rgba(255, 255, 255, 0.03);\n  border-bottom-color: rgba(255, 255, 255, 0.08);\n}\n\n#mobius-os-mini.theme-dark .mobius-mini-brand-text {\n  color: #f1f5f9;\n}\n\n#mobius-os-mini.theme-dark .mobius-mini-row {\n  border-bottom-color: rgba(255, 255, 255, 0.08);\n}\n\n#mobius-os-mini.theme-dark .mobius-mini-row-label {\n  color: rgba(148, 163, 184, 0.9);\n}\n\n#mobius-os-mini.theme-dark .mobius-mini-patient-name {\n  color: #f1f5f9;\n}\n\n#mobius-os-mini.theme-dark .mobius-mini-patient-id,\n#mobius-os-mini.theme-dark .mobius-mini-patient-dob {\n  color: rgba(148, 163, 184, 0.9);\n}\n\n#mobius-os-mini.theme-dark .mobius-mini-minimized-patient {\n  color: #e2e8f0;\n}\n\n#mobius-os-mini.theme-dark .mobius-mini-problem-text {\n  color: #e2e8f0;\n}\n\n#mobius-os-mini.theme-dark .mobius-mini-status-badge {\n  background: rgba(255, 255, 255, 0.08);\n  border-color: rgba(255, 255, 255, 0.15);\n  color: #94a3b8;\n}\n\n#mobius-os-mini.theme-dark .mobius-mini-note-input {\n  background: #0f172a;\n  border-color: rgba(255, 255, 255, 0.12);\n  color: #f1f5f9;\n}\n\n#mobius-os-mini.theme-dark .mobius-mini-note-input::placeholder {\n  color: rgba(148, 163, 184, 0.6);\n}\n\n#mobius-os-mini.theme-dark .mobius-mini-menu-btn,\n#mobius-os-mini.theme-dark .mobius-mini-expand-btn,\n#mobius-os-mini.theme-dark .mobius-mini-minimize-btn,\n#mobius-os-mini.theme-dark .mobius-mini-drag-handle,\n#mobius-os-mini.theme-dark .mobius-mini-icon-btn,\n#mobius-os-mini.theme-dark .mobius-mini-send-btn {\n  background: rgba(255, 255, 255, 0.06);\n  border-color: rgba(255, 255, 255, 0.12);\n  color: #e5e7eb;\n}\n\n#mobius-os-mini.theme-dark .mobius-mini-task-badge {\n  background: rgba(37, 99, 235, 0.15);\n  border-color: rgba(37, 99, 235, 0.3);\n}\n\n/* Theme: Blue */\n#mobius-os-mini.theme-blue {\n  background: #eff6ff !important;\n  color: #1e3a5f !important;\n  border-color: #bfdbfe !important;\n  box-shadow: 0 16px 34px rgba(37, 99, 235, 0.15) !important;\n}\n\n#mobius-os-mini.theme-blue .mobius-mini-header {\n  background: rgba(37, 99, 235, 0.05);\n  border-bottom-color: rgba(37, 99, 235, 0.1);\n}\n\n#mobius-os-mini.theme-blue .mobius-mini-brand-text {\n  color: #1e40af;\n}\n\n#mobius-os-mini.theme-blue .mobius-mini-row {\n  border-bottom-color: rgba(37, 99, 235, 0.1);\n}\n\n#mobius-os-mini.theme-blue .mobius-mini-row-label {\n  color: #3b82f6;\n}\n\n#mobius-os-mini.theme-blue .mobius-mini-patient-name {\n  color: #1e3a5f;\n}\n\n#mobius-os-mini.theme-blue .mobius-mini-status-badge {\n  background: rgba(37, 99, 235, 0.1);\n  border-color: rgba(37, 99, 235, 0.25);\n}\n\n#mobius-os-mini.theme-blue .mobius-mini-note-input {\n  background: #ffffff;\n  border-color: #bfdbfe;\n}\n\n/* Theme: Glass */\n#mobius-os-mini.theme-glass {\n  background: rgba(255, 255, 255, 0.8) !important;\n  color: #0b1220 !important;\n  border-color: rgba(255, 255, 255, 0.5) !important;\n  box-shadow: 0 16px 34px rgba(2, 6, 23, 0.12), 0 0 0 1px rgba(255,255,255,0.2) inset !important;\n  backdrop-filter: blur(12px) !important;\n  -webkit-backdrop-filter: blur(12px) !important;\n}\n\n#mobius-os-mini.theme-glass .mobius-mini-header {\n  background: rgba(255, 255, 255, 0.3);\n  border-bottom-color: rgba(11, 18, 32, 0.06);\n}\n\n#mobius-os-mini.theme-glass .mobius-mini-row {\n  border-bottom-color: rgba(11, 18, 32, 0.06);\n}\n\n#mobius-os-mini.theme-glass .mobius-mini-note-input {\n  background: rgba(255, 255, 255, 0.6);\n}\n\n#mobius-os-mini.theme-glass .mobius-mini-menu-btn,\n#mobius-os-mini.theme-glass .mobius-mini-expand-btn,\n#mobius-os-mini.theme-glass .mobius-mini-minimize-btn,\n#mobius-os-mini.theme-glass .mobius-mini-drag-handle {\n  background: rgba(255, 255, 255, 0.4);\n}\n\n#mobius-os-mini.theme-glass .mobius-mini-minimized-patient {\n  color: #1e293b;\n}\n\n/* Patient edit modal */\n.mobius-mini-modal-overlay {\n  position: fixed;\n  inset: 0;\n  background: rgba(2, 6, 23, 0.28);\n  z-index: 2147483647;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 18px;\n}\n\n.mobius-mini-modal {\n  width: 360px;\n  max-width: calc(100vw - 36px);\n  background: #fff;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  border-radius: 14px;\n  box-shadow: 0 18px 40px rgba(2, 6, 23, 0.20);\n  overflow: hidden;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Google Sans', sans-serif;\n  color: #0b1220;\n}\n\n.mobius-mini-modal-header {\n  padding: 10px 12px;\n  border-bottom: 1px solid rgba(11, 18, 32, 0.08);\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 10px;\n}\n\n.mobius-mini-modal-title {\n  font-size: 12px;\n  font-weight: 600;\n}\n\n.mobius-mini-modal-close {\n  width: 28px;\n  height: 28px;\n  border-radius: 10px;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  background: rgba(11, 18, 32, 0.03);\n  cursor: pointer;\n  display: grid;\n  place-items: center;\n  font-weight: 600;\n}\n\n.mobius-mini-modal-close:hover {\n  background: rgba(11, 18, 32, 0.06);\n}\n\n.mobius-mini-modal-body {\n  padding: 14px 16px 12px;\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n\n.mobius-mini-field {\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n}\n\n.mobius-mini-field-label {\n  font-size: 9px;\n  letter-spacing: 0.10em;\n  text-transform: uppercase;\n  color: rgba(91,102,122,0.95);\n  font-weight: 600;\n  margin-bottom: 0;\n}\n\n.mobius-mini-search-input {\n  position: relative;\n  display: flex;\n  align-items: center;\n}\n\n.mobius-mini-search-icon {\n  position: absolute;\n  left: 10px;\n  width: 16px;\n  height: 16px;\n  display: grid;\n  place-items: center;\n  opacity: 0.75;\n  pointer-events: none;\n}\n\n.mobius-mini-search-icon svg {\n  width: 16px;\n  height: 16px;\n  fill: rgba(91, 102, 122, 0.95);\n}\n\n.mobius-mini-input.mobius-mini-input-with-icon {\n  padding-left: 34px;\n}\n\n.mobius-mini-input {\n  width: 100%;\n  height: 34px;\n  border-radius: 12px;\n  border: 1px solid rgba(11, 18, 32, 0.14);\n  padding: 0 10px;\n  font-size: 12px;\n  font-weight: 500;\n  outline: none;\n}\n\n.mobius-mini-input:focus {\n  border-color: rgba(37, 99, 235, 0.55);\n}\n\n.mobius-mini-field-hint {\n  font-size: 12px;\n  color: rgba(91,102,122,0.95);\n}\n\n.mobius-mini-suggestions {\n  display: none;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  border-radius: 12px;\n  background: #fff;\n  overflow: hidden;\n  box-shadow: 0 12px 24px rgba(2,6,23,0.12);\n}\n\n.mobius-mini-suggestion {\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 10px;\n  padding: 10px 12px;\n  border: none;\n  background: #fff;\n  cursor: pointer;\n  font: inherit;\n}\n\n.mobius-mini-suggestion:hover {\n  background: rgba(11, 18, 32, 0.04);\n}\n\n.mobius-mini-suggestion.active {\n  background: rgba(37, 99, 235, 0.10);\n}\n\n.mobius-mini-suggestion .name {\n  font-size: 12px;\n  font-weight: 600;\n  color: #0b1220;\n  min-width: 0;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.mobius-mini-suggestion .id {\n  font-size: 11px;\n  font-weight: 500;\n  color: rgba(91,102,122,0.95);\n  white-space: nowrap;\n  flex: 0 0 auto;\n}\n\n.mobius-mini-modal-actions {\n  padding: 10px 12px;\n  border-top: 1px solid rgba(11, 18, 32, 0.08);\n  display: flex;\n  justify-content: flex-end;\n  gap: 8px;\n}\n\n.mobius-mini-btn-secondary,\n.mobius-mini-btn-primary {\n  height: 34px;\n  border-radius: 12px;\n  padding: 0 12px;\n  font-size: 12px;\n  font-weight: 600;\n  cursor: pointer;\n}\n\n.mobius-mini-btn-secondary {\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  background: rgba(11, 18, 32, 0.03);\n}\n\n.mobius-mini-btn-secondary:hover {\n  background: rgba(11, 18, 32, 0.06);\n}\n\n.mobius-mini-btn-primary {\n  border: 1px solid rgba(37, 99, 235, 0.22);\n  background: rgba(37, 99, 235, 0.12);\n  color: #1e40af;\n}\n\n.mobius-mini-btn-primary:hover {\n  background: rgba(37, 99, 235, 0.16);\n}\n\n/* Mini toast */\n.mobius-mini-toast {\n  position: fixed;\n  left: 50%;\n  top: 16px;\n  transform: translateX(-50%);\n  background: rgba(15,23,42,0.92);\n  color: #fff;\n  padding: 10px 12px;\n  border-radius: 12px;\n  font-size: 12px;\n  font-weight: 600;\n  z-index: 2147483647;\n  box-shadow: 0 14px 28px rgba(2,6,23,0.22);\n}\n\n/* =============================================================================\n   SIDECAR COMPONENTS\n   Minimalist, bottleneck-focused design\n   ============================================================================= */\n\n/* Status Bar - Modern minimal design */\n.sidecar-status-bar {\n  padding: 6px 12px;\n  background: #ffffff;\n  border-bottom: 1px solid rgba(11, 18, 32, 0.08);\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n\n.sidecar-status-bar-title-row {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 8px;\n}\n\n.sidecar-status-bar-title {\n  font-size: 7px;\n  font-weight: 600;\n  color: rgba(91, 102, 122, 0.95);\n  text-transform: uppercase;\n  letter-spacing: 0.04em;\n}\n\n.sidecar-status-bar-context {\n  font-size: 8px;\n  font-weight: 400;\n  color: rgba(91, 102, 122, 0.8);\n  white-space: nowrap;\n}\n\n.sidecar-status-bar-progress-row {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n}\n\n.sidecar-status-bar-track-wrapper {\n  flex: 1;\n  min-width: 0;\n}\n\n.sidecar-status-bar-track {\n  position: relative;\n  height: 3px;\n  border-radius: 2px;\n  /* Mono grey gradient - subtle, modern */\n  background: linear-gradient(90deg, \n    rgba(11, 18, 32, 0.08) 0%, \n    rgba(11, 18, 32, 0.12) 50%,\n    rgba(11, 18, 32, 0.06) 100%\n  );\n}\n\n/* Progress fill - darker grey to show completion */\n.sidecar-status-bar-progress {\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  background: rgba(11, 18, 32, 0.35);\n  border-radius: 2px;\n  transition: width 0.3s ease;\n}\n\n/* Current position marker */\n.sidecar-status-bar-marker {\n  position: absolute;\n  top: -3px;\n  width: 9px;\n  height: 9px;\n  border-radius: 50%;\n  transform: translateX(-50%);\n  background: #0b1220;\n  border: 2px solid #ffffff;\n  box-shadow: 0 1px 3px rgba(2, 6, 23, 0.2);\n  z-index: 2;\n}\n\n/* Percentage label */\n.sidecar-status-bar-percent {\n  font-size: 9px;\n  font-weight: 600;\n  color: #0b1220;\n  white-space: nowrap;\n}\n\n/* Bottleneck Card - Core UI */\n/* Mobius Greeting */\n.sidecar-greeting {\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n  padding-bottom: 8px;\n  margin-bottom: 6px;\n  border-bottom: 1px solid rgba(11, 18, 32, 0.06);\n}\n\n.sidecar-greeting-text {\n  font-size: 12px;\n  font-weight: 500;\n  color: #0b1220;\n}\n\n.sidecar-greeting-subtext {\n  font-size: 10px;\n  font-weight: 400;\n  color: rgba(91, 102, 122, 0.6);\n}\n\n.sidecar-bottleneck-card {\n  padding: 0;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.sidecar-bottleneck-card--clear {\n  padding: 6px 0;\n}\n\n.sidecar-bottleneck-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding-bottom: 6px;\n  border-bottom: 1px solid rgba(11, 18, 32, 0.08);\n}\n\n.sidecar-bottleneck-count {\n  font-size: 11px;\n  font-weight: 500;\n  color: #0b1220;\n}\n\n.sidecar-bottleneck-hint {\n  font-size: 9px;\n  font-weight: 400;\n  color: rgba(91, 102, 122, 0.6);\n}\n\n.sidecar-bottleneck-item {\n  background: #ffffff;\n  border: 1px solid rgba(11, 18, 32, 0.08);\n  border-radius: 6px;\n  padding: 6px 8px;\n  display: flex;\n  box-shadow: none;\n  flex-direction: column;\n  gap: 4px;\n}\n\n.sidecar-bottleneck-question-row {\n  display: flex;\n  align-items: flex-start;\n  gap: 4px;\n}\n\n.sidecar-bottleneck-question-row::before {\n  content: '';\n  display: inline-block;\n  width: 4px;\n  height: 4px;\n  min-width: 4px;\n  background: #3b82f6;\n  border-radius: 50%;\n  margin-top: 4px;\n  flex-shrink: 0;\n}\n\n.sidecar-bottleneck-checkbox {\n  width: 14px;\n  height: 14px;\n  cursor: pointer;\n  margin-top: 1px;\n}\n\n.sidecar-bottleneck-question {\n  flex: 1;\n  font-size: 10px;\n  font-weight: 500;\n  color: #0b1220;\n  line-height: 1.25;\n}\n\n.sidecar-source-badge {\n  font-size: 10px;\n  opacity: 0.7;\n}\n\n.sidecar-conflict-badge {\n  font-size: 12px;\n}\n\n.sidecar-bottleneck-answers {\n  display: flex;\n  gap: 10px;\n  flex-wrap: wrap;\n  margin-top: 4px;\n  padding: 4px 0;\n  align-items: center;\n  border-top: 1px solid rgba(11, 18, 32, 0.04);\n}\n\n#mobius-os-sidebar .sidecar-bottleneck-answers button.sidecar-answer-btn,\n.sidecar-answer-btn {\n  /* Reset all button defaults with high specificity */\n  all: unset !important;\n  box-sizing: border-box !important;\n  /* Apply our styles - pill buttons with grey background */\n  display: inline-block !important;\n  padding: 3px 8px !important;\n  margin: 0 !important;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;\n  font-size: 9px !important;\n  font-weight: 400 !important;\n  background: rgba(11, 18, 32, 0.06) !important;\n  background-color: rgba(11, 18, 32, 0.06) !important;\n  border: 1px solid rgba(11, 18, 32, 0.08) !important;\n  border-radius: 4px !important;\n  color: rgba(91, 102, 122, 0.85) !important;\n  cursor: pointer !important;\n  transition: all 0.15s ease !important;\n  text-decoration: none !important;\n  line-height: 1.3 !important;\n  white-space: nowrap !important;\n  box-shadow: none !important;\n  outline: none !important;\n}\n\n#mobius-os-sidebar .sidecar-bottleneck-answers button.sidecar-answer-btn:hover,\n.sidecar-answer-btn:hover {\n  background: rgba(11, 18, 32, 0.1) !important;\n  background-color: rgba(11, 18, 32, 0.1) !important;\n  border-color: rgba(11, 18, 32, 0.15) !important;\n  color: #0b1220 !important;\n}\n\n#mobius-os-sidebar .sidecar-bottleneck-answers button.sidecar-answer-btn.sidecar-answer-btn--selected,\n#mobius-os-sidebar button.sidecar-answer-btn.sidecar-answer-btn--selected,\n.sidecar-bottleneck-answers .sidecar-answer-btn.sidecar-answer-btn--selected,\n.sidecar-answer-btn.sidecar-answer-btn--selected,\n.sidecar-answer-btn--selected {\n  background: rgba(37, 99, 235, 0.15) !important;\n  background-color: rgba(37, 99, 235, 0.15) !important;\n  border: 1px solid rgba(37, 99, 235, 0.35) !important;\n  border-color: rgba(37, 99, 235, 0.35) !important;\n  color: #2563eb !important;\n  font-weight: 500 !important;\n}\n\n/* Assignment Dropdown - compact, near question */\n.sidecar-assign-dropdown {\n  position: relative;\n  flex-shrink: 0;\n  margin-left: auto;\n}\n\n.sidecar-assign-btn {\n  display: flex;\n  align-items: center;\n  gap: 3px;\n  padding: 3px 6px;\n  font-size: 9px;\n  font-weight: 400;\n  color: rgba(37, 99, 235, 0.9);\n  background: rgba(37, 99, 235, 0.06);\n  border: 1px solid rgba(37, 99, 235, 0.15);\n  border-radius: 6px;\n  cursor: pointer;\n  transition: all 0.15s ease;\n}\n\n.sidecar-assign-btn:hover {\n  background: rgba(37, 99, 235, 0.12);\n  border-color: rgba(37, 99, 235, 0.25);\n}\n\n.sidecar-assign-btn--assigned {\n  background: rgba(34, 197, 94, 0.08);\n  border-color: rgba(34, 197, 94, 0.25);\n  color: rgba(34, 197, 94, 0.9);\n}\n\n.sidecar-assign-label {\n  font-size: 9px;\n}\n\n.sidecar-assign-arrow {\n  font-size: 8px;\n  opacity: 0.6;\n}\n\n.sidecar-assign-menu {\n  position: absolute;\n  top: 100%;\n  right: 0;\n  margin-top: 4px;\n  min-width: 140px;\n  background: #ffffff;\n  border: 1px solid rgba(11, 18, 32, 0.10);\n  border-radius: 8px;\n  box-shadow: 0 4px 16px rgba(2, 6, 23, 0.10);\n  z-index: 100;\n  overflow: hidden;\n  padding: 4px 0;\n}\n\n.sidecar-assign-option {\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  gap: 1px;\n  width: 100%;\n  padding: 6px 10px;\n  font-size: 9px;\n  font-weight: 400;\n  color: #0b1220;\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  text-align: left;\n}\n\n.sidecar-assign-option:hover {\n  background: rgba(37, 99, 235, 0.06);\n}\n\n.sidecar-assign-option-text {\n  font-size: 10px;\n  font-weight: 400;\n  color: #0b1220;\n}\n\n.sidecar-assign-option-hint {\n  font-size: 8px;\n  font-weight: 400;\n  color: rgba(91, 102, 122, 0.6);\n}\n\n.sidecar-assign-divider {\n  height: 1px;\n  background: rgba(11, 18, 32, 0.08);\n  margin: 4px 0;\n}\n\n/* Legacy delegate row - hidden but kept for compatibility */\n.sidecar-bottleneck-delegate {\n  display: none;\n}\n\n.sidecar-bottleneck-separator {\n  font-size: 9px;\n  color: rgba(91, 102, 122, 0.7);\n  text-align: center;\n}\n\n.sidecar-mode-btn {\n  padding: 3px 8px;\n  font-size: 9px;\n  font-weight: 500;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.15s ease;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  background: rgba(11, 18, 32, 0.03);\n  color: #0b1220;\n}\n\n.sidecar-mode-btn--mobius {\n  background: rgba(11, 18, 32, 0.03);\n}\n\n.sidecar-mode-btn--mobius:hover {\n  background: rgba(11, 18, 32, 0.06);\n}\n\n.sidecar-mode-btn--user {\n  background: rgba(11, 18, 32, 0.03);\n}\n\n.sidecar-mode-btn--user:hover {\n  background: rgba(11, 18, 32, 0.06);\n}\n\n.sidecar-mode-btn--selected {\n  background: rgba(37, 99, 235, 0.1);\n  border-color: rgba(37, 99, 235, 0.35);\n  color: #2563eb;\n}\n\n/* Mobius tip - encourages user adoption */\n.sidecar-bottleneck-mobius-tip {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  margin-top: 4px;\n  padding: 3px 6px;\n  font-size: 8px;\n  font-weight: 400;\n  color: rgba(37, 99, 235, 0.75);\n  background: rgba(37, 99, 235, 0.04);\n  border-radius: 4px;\n}\n\n.sidecar-bottleneck-mobius-tip:hover {\n  background: rgba(37, 99, 235, 0.08);\n  color: #2563eb;\n}\n\n.sidecar-mobius-tip-icon {\n  font-size: 9px;\n}\n\n.sidecar-bottleneck-mobius-tip--assigned {\n  color: rgba(34, 197, 94, 0.85);\n  background: rgba(34, 197, 94, 0.06);\n  cursor: default;\n}\n\n.sidecar-bottleneck-mobius-tip--assigned:hover {\n  background: rgba(34, 197, 94, 0.06);\n  color: rgba(34, 197, 94, 0.85);\n}\n\n/* Inline note row - matches Mini note styling */\n.sidecar-bottleneck-note-row {\n  margin-top: 4px;\n  padding-top: 4px;\n  border-top: 1px solid rgba(11, 18, 32, 0.06);\n}\n\n.sidecar-bottleneck-note-wrap {\n  width: 100%;\n  position: relative;\n  display: flex;\n  align-items: center;\n}\n\n.sidecar-bottleneck-note-input {\n  width: 100%;\n  height: 22px;\n  border-radius: 6px;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  background: #fff;\n  padding: 0 26px 0 6px;\n  font-size: 9px;\n  font-weight: 400;\n  color: #0b1220;\n  outline: none;\n}\n\n.sidecar-bottleneck-note-input::placeholder {\n  color: rgba(91, 102, 122, 0.75);\n  font-weight: 500;\n}\n\n.sidecar-bottleneck-note-input:focus {\n  border-color: rgba(37, 99, 235, 0.55);\n}\n\n.sidecar-bottleneck-note-send {\n  position: absolute;\n  right: 0;\n  width: 22px;\n  height: 22px;\n  border-radius: 6px;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  background: rgba(11, 18, 32, 0.03);\n  cursor: pointer;\n  display: grid;\n  place-items: center;\n}\n\n.sidecar-bottleneck-note-send:hover {\n  background: rgba(11, 18, 32, 0.06);\n}\n\n.sidecar-bottleneck-note-send svg {\n  width: 14px;\n  height: 14px;\n  display: block;\n  fill: rgba(11, 18, 32, 0.85);\n}\n\n/* Inline button (Edit, small actions) */\n.sidecar-inline-btn {\n  height: 22px;\n  padding: 0 8px;\n  border-radius: 8px;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  background: rgba(11, 18, 32, 0.03);\n  cursor: pointer;\n  font-size: 9px;\n  font-weight: 600;\n  color: #0b1220;\n}\n\n.sidecar-inline-btn:hover {\n  background: rgba(11, 18, 32, 0.06);\n}\n\n/* Icon-only button (pencil edit, etc) - matches Mini */\n.sidecar-icon-btn {\n  width: 22px;\n  height: 22px;\n  border-radius: 8px;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  background: rgba(11, 18, 32, 0.03);\n  cursor: pointer;\n  display: grid;\n  place-items: center;\n  padding: 0;\n}\n\n.sidecar-icon-btn:hover {\n  background: rgba(11, 18, 32, 0.06);\n}\n\n.sidecar-icon-btn svg {\n  width: 12px;\n  height: 12px;\n  fill: rgba(11, 18, 32, 0.80);\n}\n\n.sidecar-bottleneck-bulk {\n  padding-top: 12px;\n  border-top: 1px solid #e5e7eb;\n}\n\n.sidecar-bottleneck-bulk-btn {\n  width: 100%;\n  padding: 8px 12px;\n  font-size: 10px;\n  font-weight: 600;\n  background: rgba(11, 18, 32, 0.03);\n  color: #0b1220;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  border-radius: 10px;\n  cursor: pointer;\n  transition: all 0.15s ease;\n}\n\n.sidecar-bottleneck-bulk-btn:hover:not(:disabled) {\n  background: rgba(11, 18, 32, 0.06);\n}\n\n.sidecar-bottleneck-bulk-btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.sidecar-bottleneck-clear {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  padding: 10px 12px;\n  background: rgba(34, 197, 94, 0.08);\n  border: 1px solid rgba(34, 197, 94, 0.15);\n  border-radius: 10px;\n}\n\n.sidecar-bottleneck-clear-icon {\n  width: 24px;\n  height: 24px;\n  background: #22c55e;\n  color: white;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 12px;\n  font-weight: bold;\n}\n\n.sidecar-bottleneck-clear-text {\n  font-size: 11px;\n  color: #166534;\n  font-weight: 500;\n}\n\n/* Context Expander */\n/* Context Expander - matches Mini row styling */\n.sidecar-context-expander {\n  border-top: 1px solid rgba(11, 18, 32, 0.08);\n  margin-top: 8px;\n}\n\n.sidecar-context-expander-toggle {\n  width: 100%;\n  padding: 6px 0;\n  background: none;\n  border: none;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  cursor: pointer;\n  font-size: 10px;\n  font-weight: 400;\n  color: rgba(91, 102, 122, 0.95);\n  transition: background 0.15s ease;\n}\n\n.sidecar-context-expander-toggle:hover {\n  background: rgba(11, 18, 32, 0.02);\n}\n\n.sidecar-context-expander-arrow {\n  font-size: 8px;\n  color: rgba(91, 102, 122, 0.4);\n  transition: transform 0.15s ease;\n}\n\n.sidecar-context-expander-toggle[aria-expanded=\"true\"] .sidecar-context-expander-arrow {\n  transform: none;\n}\n\n.sidecar-context-expander-label {\n  font-weight: 400;\n  color: rgba(91, 102, 122, 0.7);\n}\n\n.sidecar-context-expander-content {\n  padding: 0 0 8px;\n}\n\n.sidecar-section-title {\n  font-size: 7px;\n  font-weight: 500;\n  color: rgba(91, 102, 122, 0.6);\n  text-transform: uppercase;\n  letter-spacing: 0.04em;\n  margin-bottom: 4px;\n}\n\n/* Resolution Plan Section */\n.sidecar-plan-section {\n  margin-bottom: 10px;\n  padding-bottom: 8px;\n  border-bottom: 1px solid rgba(11, 18, 32, 0.06);\n}\n\n.sidecar-plan-summary {\n  margin-bottom: 6px;\n}\n\n.sidecar-plan-factors {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n\n.sidecar-plan-factor {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  font-size: 9px;\n}\n\n.sidecar-plan-factor-label {\n  flex: 1;\n  color: rgba(91, 102, 122, 0.85);\n  font-weight: 400;\n}\n\n.sidecar-plan-factor-progress {\n  font-size: 8px;\n  color: rgba(91, 102, 122, 0.6);\n  font-weight: 400;\n}\n\n.sidecar-plan-factor-bar {\n  width: 40px;\n  height: 3px;\n  background: rgba(11, 18, 32, 0.08);\n  border-radius: 2px;\n  overflow: hidden;\n}\n\n.sidecar-plan-factor-fill {\n  height: 100%;\n  background: rgba(11, 18, 32, 0.35);\n  border-radius: 2px;\n  transition: width 0.3s ease;\n}\n\n.sidecar-plan-current {\n  display: flex;\n  align-items: flex-start;\n  gap: 4px;\n  padding: 4px 6px;\n  background: rgba(11, 18, 32, 0.03);\n  border-radius: 6px;\n  margin-top: 6px;\n}\n\n.sidecar-plan-current-label {\n  font-size: 8px;\n  font-weight: 400;\n  color: rgba(91, 102, 122, 0.6);\n  flex-shrink: 0;\n}\n\n.sidecar-plan-current-text {\n  font-size: 9px;\n  font-weight: 400;\n  color: rgba(91, 102, 122, 0.85);\n  line-height: 1.3;\n}\n\n.sidecar-plan-actions {\n  font-size: 8px;\n  font-weight: 400;\n  color: rgba(37, 99, 235, 0.8);\n  margin-top: 4px;\n}\n\n/* Milestones - matches Mini compact styling */\n.sidecar-milestones-list {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n\n.sidecar-milestone {\n  background: rgba(11, 18, 32, 0.02);\n  border: 1px solid rgba(11, 18, 32, 0.06);\n  border-radius: 8px;\n  overflow: hidden;\n}\n\n.sidecar-milestone-header {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  padding: 6px 10px;\n}\n\n.sidecar-milestone-icon {\n  width: 20px;\n  height: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 12px;\n}\n\n.sidecar-milestone--complete .sidecar-milestone-icon {\n  color: #22c55e;\n}\n\n.sidecar-milestone--in_progress .sidecar-milestone-icon {\n  color: #f59e0b;\n}\n\n.sidecar-milestone--blocked .sidecar-milestone-icon {\n  color: #ef4444;\n}\n\n.sidecar-milestone--pending .sidecar-milestone-icon {\n  color: #9ca3af;\n}\n\n.sidecar-milestone-label {\n  flex: 1;\n  font-size: 13px;\n  color: #374151;\n}\n\n.sidecar-milestone-arrow {\n  font-size: 10px;\n  color: rgba(91, 102, 122, 0.7);\n}\n\n.sidecar-milestone-details {\n  padding: 8px 12px 12px 40px;\n  border-top: 1px solid #e5e7eb;\n}\n\n/* Substeps */\n.sidecar-substeps {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  margin-bottom: 8px;\n}\n\n.sidecar-substep {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  font-size: 12px;\n  color: #6b7280;\n}\n\n.sidecar-substep-icon {\n  font-size: 8px;\n}\n\n.sidecar-substep--complete .sidecar-substep-icon {\n  color: #22c55e;\n}\n\n.sidecar-substep--current .sidecar-substep-icon {\n  color: #2563eb;\n}\n\n/* Timeline */\n.sidecar-timeline {\n  border-left: 2px solid #e5e7eb;\n  padding-left: 12px;\n}\n\n.sidecar-timeline-title {\n  font-size: 11px;\n  font-weight: 600;\n  color: #9ca3af;\n  margin-bottom: 8px;\n}\n\n.sidecar-timeline-entry {\n  display: flex;\n  flex-wrap: wrap;\n  align-items: center;\n  gap: 6px;\n  font-size: 12px;\n  margin-bottom: 6px;\n  position: relative;\n}\n\n.sidecar-timeline-entry::before {\n  content: '';\n  position: absolute;\n  left: -16px;\n  width: 8px;\n  height: 8px;\n  background: #e5e7eb;\n  border-radius: 50%;\n}\n\n.sidecar-timeline-actor {\n  font-weight: 500;\n  color: #374151;\n}\n\n.sidecar-timeline-actor--mobius {\n  color: #2563eb;\n}\n\n.sidecar-timeline-actor--user {\n  color: #059669;\n}\n\n.sidecar-timeline-action {\n  color: #6b7280;\n}\n\n.sidecar-timeline-time {\n  color: #9ca3af;\n  font-size: 11px;\n}\n\n.sidecar-timeline-artifact {\n  color: #2563eb;\n  text-decoration: none;\n  font-size: 11px;\n}\n\n.sidecar-timeline-artifact:hover {\n  text-decoration: underline;\n}\n\n/* Payer Info */\n.sidecar-payer-section {\n  margin-top: 16px;\n  padding-top: 16px;\n  border-top: 1px solid #e5e7eb;\n}\n\n.sidecar-payer-info {\n  background: #f9fafb;\n  border-radius: 6px;\n  padding: 12px;\n}\n\n.sidecar-payer-name {\n  font-size: 14px;\n  font-weight: 600;\n  color: #1f2937;\n  margin-bottom: 8px;\n}\n\n.sidecar-payer-phone,\n.sidecar-payer-portal,\n.sidecar-payer-response-time {\n  font-size: 12px;\n  color: #6b7280;\n  margin-bottom: 4px;\n}\n\n.sidecar-payer-phone a,\n.sidecar-payer-portal a {\n  color: #2563eb;\n  text-decoration: none;\n}\n\n.sidecar-payer-phone a:hover,\n.sidecar-payer-portal a:hover {\n  text-decoration: underline;\n}\n\n.sidecar-policy-excerpts {\n  margin-top: 12px;\n}\n\n.sidecar-excerpts-title {\n  font-size: 11px;\n  font-weight: 600;\n  color: #9ca3af;\n  margin-bottom: 8px;\n}\n\n.sidecar-policy-excerpt {\n  background: white;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  padding: 10px;\n  margin-bottom: 8px;\n}\n\n.sidecar-excerpt-topic {\n  font-size: 12px;\n  font-weight: 600;\n  color: #374151;\n  margin-bottom: 4px;\n}\n\n.sidecar-excerpt-content {\n  font-size: 12px;\n  color: #6b7280;\n  line-height: 1.4;\n}\n\n.sidecar-excerpt-source {\n  font-size: 10px;\n  color: #9ca3af;\n  margin-top: 4px;\n}\n\n/* Quick Chat */\n/* Quick Chat - matches Mini note input styling */\n.sidecar-quick-chat {\n  padding: 10px 10px;\n  border-top: 1px solid rgba(11, 18, 32, 0.08);\n  background: #ffffff;\n}\n\n.sidecar-quick-chat-wrapper {\n  display: flex;\n  align-items: center;\n  position: relative;\n}\n\n.sidecar-quick-chat-input {\n  flex: 1;\n  height: 28px;\n  padding: 0 32px 0 8px;\n  font-size: 9px;\n  font-weight: 400;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  border-radius: 6px;\n  outline: none;\n  color: #0b1220;\n  background: #fff;\n}\n\n.sidecar-quick-chat-input::placeholder {\n  color: rgba(91, 102, 122, 0.5);\n  font-weight: 400;\n}\n\n.sidecar-quick-chat-input:focus {\n  border-color: rgba(37, 99, 235, 0.35);\n}\n\n.sidecar-quick-chat-input:disabled {\n  background: rgba(11, 18, 32, 0.02);\n}\n\n.sidecar-quick-chat-send {\n  position: absolute;\n  right: 0;\n  width: 28px;\n  height: 28px;\n  background: transparent;\n  border: none;\n  border-radius: 6px;\n  font-size: 12px;\n  cursor: pointer;\n  transition: background 0.15s ease;\n  display: grid;\n  place-items: center;\n}\n\n.sidecar-quick-chat-send:hover:not(:disabled) {\n  background: rgba(11, 18, 32, 0.04);\n}\n\n.sidecar-quick-chat-send:disabled {\n  cursor: not-allowed;\n}\n\n.sidecar-quick-chat-send svg {\n  width: 14px;\n  height: 14px;\n  display: block;\n  fill: rgba(91, 102, 122, 0.6);\n}\n\n.sidecar-quick-chat-send:hover:not(:disabled) svg {\n  fill: rgba(91, 102, 122, 0.9);\n}\n\n.sidecar-quick-chat-send:disabled svg {\n  fill: rgba(11, 18, 32, 0.2);\n}\n\n.sidecar-quick-chat-hint {\n  font-size: 9px;\n  font-weight: 400;\n  color: rgba(91, 102, 122, 0.5);\n  margin-top: 6px;\n}\n\n.sidecar-quick-chat-response {\n  background: #f0f9ff;\n  border: 1px solid #bae6fd;\n  border-radius: 8px;\n  padding: 12px;\n  margin-bottom: 8px;\n  position: relative;\n}\n\n.sidecar-quick-chat-response-text {\n  font-size: 13px;\n  color: #1e3a5f;\n  line-height: 1.4;\n}\n\n.sidecar-quick-chat-response-source {\n  font-size: 11px;\n  color: #6b7280;\n  margin-top: 6px;\n}\n\n.sidecar-quick-chat-response-dismiss {\n  position: absolute;\n  top: 8px;\n  right: 8px;\n  background: none;\n  border: none;\n  color: #9ca3af;\n  cursor: pointer;\n  font-size: 16px;\n}\n\n/* Sidecar Menu */\n/* Sidecar Menu - matches Mini menu styling */\n.sidecar-menu {\n  position: relative;\n}\n\n.sidecar-menu-btn {\n  width: 22px;\n  height: 22px;\n  border-radius: 6px;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  background: rgba(11, 18, 32, 0.03);\n  cursor: pointer;\n  display: grid;\n  place-items: center;\n  padding: 0;\n}\n\n.sidecar-menu-btn svg {\n  width: 14px;\n  height: 14px;\n  fill: rgba(11, 18, 32, 0.7);\n}\n\n.sidecar-menu-btn:hover {\n  background: rgba(11, 18, 32, 0.06);\n}\n\n.sidecar-menu-dropdown {\n  position: absolute;\n  top: 100%;\n  right: 0;\n  margin-top: 4px;\n  min-width: 140px;\n  background: #fff;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  border-radius: 10px;\n  box-shadow: 0 8px 24px rgba(2, 6, 23, 0.12);\n  z-index: 2147483647;\n  overflow: visible;\n  pointer-events: auto;\n  padding: 4px 0;\n}\n\n.sidecar-menu-item {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  width: 100%;\n  text-align: left;\n  padding: 8px 12px;\n  border: none;\n  background: transparent;\n  font-size: 11px;\n  font-weight: 400;\n  color: #0b1220;\n  cursor: pointer;\n  pointer-events: auto;\n  transition: background 0.15s ease;\n  position: relative;\n}\n\n.sidecar-menu-item:hover {\n  background: rgba(11, 18, 32, 0.04);\n}\n\n.sidecar-menu-item.danger {\n  color: #b3261e;\n}\n\n.sidecar-menu-icon {\n  width: 14px;\n  height: 14px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n}\n\n.sidecar-menu-icon svg {\n  width: 14px;\n  height: 14px;\n  fill: rgba(11, 18, 32, 0.6);\n}\n\n.sidecar-menu-label {\n  flex: 1;\n  font-size: 11px;\n  font-weight: 400;\n}\n\n.sidecar-menu-arrow {\n  font-size: 10px;\n  color: rgba(91, 102, 122, 0.6);\n  margin-left: auto;\n}\n\n.sidecar-menu-divider {\n  height: 1px;\n  background: rgba(11, 18, 32, 0.08);\n  margin: 4px 0;\n}\n\n/* Theme submenu - positioned to the left since sidecar is on right edge */\n.sidecar-menu-submenu {\n  position: absolute;\n  right: 100%;\n  left: auto;\n  top: 0;\n  margin-right: 4px;\n  min-width: 100px;\n  background: #fff;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  border-radius: 8px;\n  box-shadow: 0 4px 12px rgba(2, 6, 23, 0.1);\n  padding: 4px 0;\n  z-index: 2147483648;\n}\n\n.sidecar-menu-submenu-item {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  padding: 6px 10px;\n  font-size: 10px;\n  font-weight: 400;\n  color: #0b1220;\n  cursor: pointer;\n  transition: background 0.15s ease;\n}\n\n.sidecar-menu-submenu-item:hover {\n  background: rgba(11, 18, 32, 0.04);\n}\n\n.sidecar-menu-theme-icon {\n  font-size: 8px;\n  color: rgba(91, 102, 122, 0.7);\n}\n\n.sidecar-menu-theme-label {\n  font-size: 10px;\n  font-weight: 400;\n}\n\n/* Toggle switch - matches Mini style */\n.sidecar-menu-toggle {\n  position: relative;\n  width: 32px;\n  height: 18px;\n}\n\n.sidecar-menu-toggle-input {\n  opacity: 0;\n  width: 0;\n  height: 0;\n}\n\n.sidecar-menu-toggle-slider {\n  position: absolute;\n  cursor: pointer;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(11, 18, 32, 0.15);\n  border-radius: 9px;\n  transition: background 0.2s ease;\n}\n\n.sidecar-menu-toggle-slider::before {\n  content: '';\n  position: absolute;\n  height: 14px;\n  width: 14px;\n  left: 2px;\n  bottom: 2px;\n  background: white;\n  border-radius: 50%;\n  transition: transform 0.2s ease;\n  box-shadow: 0 1px 3px rgba(2, 6, 23, 0.15);\n}\n\n.sidecar-menu-toggle-input:checked + .sidecar-menu-toggle-slider {\n  background: #2563eb;\n}\n\n.sidecar-menu-toggle-input:checked + .sidecar-menu-toggle-slider::before {\n  transform: translateX(14px);\n}\n\n/* Collapse button - matches Mini expand/minimize buttons */\n.sidecar-collapse-btn {\n  width: 22px;\n  height: 22px;\n  border-radius: 6px;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  background: rgba(11, 18, 32, 0.03);\n  cursor: pointer;\n  display: grid;\n  place-items: center;\n  padding: 0;\n}\n\n.sidecar-collapse-btn svg {\n  width: 14px;\n  height: 14px;\n  fill: rgba(11, 18, 32, 0.7);\n}\n\n.sidecar-collapse-btn:hover {\n  background: rgba(11, 18, 32, 0.06);\n}\n\n/* Alert Indicator */\n/* Alert Indicator - matches Mini button styling */\n.sidecar-alert-indicator {\n  position: relative;\n  width: 22px;\n  height: 22px;\n  border-radius: 6px;\n  border: 1px solid rgba(11, 18, 32, 0.12);\n  background: rgba(11, 18, 32, 0.03);\n  cursor: pointer;\n  display: grid;\n  place-items: center;\n}\n\n.sidecar-alert-indicator:hover {\n  background: rgba(11, 18, 32, 0.06);\n}\n\n.sidecar-alert-icon {\n  width: 14px;\n  height: 14px;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.sidecar-alert-icon svg {\n  width: 14px;\n  height: 14px;\n  display: block;\n  fill: none;\n  stroke: rgba(11, 18, 32, 0.85);\n  stroke-width: 1.6;\n  stroke-linecap: round;\n  stroke-linejoin: round;\n}\n\n.sidecar-alert-badge {\n  position: absolute;\n  top: -4px;\n  right: -4px;\n  min-width: 14px;\n  height: 14px;\n  background: #2563eb;\n  color: white;\n  font-size: 9px;\n  font-weight: 600;\n  border-radius: 7px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0 3px;\n}\n\n.sidecar-alert-badge--high {\n  background: #dc2626;\n}\n\n.sidecar-notification-dot {\n  width: 6px;\n  height: 6px;\n  background: #2563eb;\n  border-radius: 50%;\n}\n\n.sidecar-notification-dot--high {\n  background: #dc2626;\n}\n\n/* Privacy indicator - matches Mini style */\n.sidecar-privacy-indicator {\n  font-size: 11px;\n  color: rgba(91, 102, 122, 0.95);\n}\n\n/* ========================================\n   SIDECAR THEMES\n   ======================================== */\n\n/* Dark Theme */\n#mobius-os-sidebar.theme-dark {\n  background: #1a1f2e;\n  color: #e5e7eb;\n  border-left-color: rgba(255, 255, 255, 0.08);\n}\n\n#mobius-os-sidebar.theme-dark .top-row {\n  background: rgba(255, 255, 255, 0.02);\n  border-bottom-color: rgba(255, 255, 255, 0.06);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-status-bar {\n  background: #1a1f2e;\n  border-bottom-color: rgba(255, 255, 255, 0.06);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-status-bar-context {\n  color: rgba(229, 231, 235, 0.8);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-status-bar-track {\n  background: linear-gradient(90deg, \n    rgba(255, 255, 255, 0.06) 0%, \n    rgba(255, 255, 255, 0.1) 50%,\n    rgba(255, 255, 255, 0.04) 100%\n  );\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-status-bar-progress {\n  background: rgba(255, 255, 255, 0.3);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-status-bar-marker {\n  background: #e5e7eb;\n  border-color: #1a1f2e;\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-status-bar-percent {\n  color: #e5e7eb;\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-bottleneck-item {\n  background: rgba(255, 255, 255, 0.04);\n  border-color: rgba(255, 255, 255, 0.08);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-bottleneck-question {\n  color: #e5e7eb;\n}\n\n/* Dark theme answer buttons moved to complete dark theme section below */\n\n#mobius-os-sidebar.theme-dark .sidecar-menu-btn,\n#mobius-os-sidebar.theme-dark .sidecar-collapse-btn,\n#mobius-os-sidebar.theme-dark .sidecar-alert-indicator {\n  background: rgba(255, 255, 255, 0.06);\n  border-color: rgba(255, 255, 255, 0.12);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-menu-btn svg,\n#mobius-os-sidebar.theme-dark .sidecar-collapse-btn svg,\n#mobius-os-sidebar.theme-dark .sidecar-alert-icon svg {\n  fill: rgba(229, 231, 235, 0.8);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-menu-dropdown,\n#mobius-os-sidebar.theme-dark .sidecar-menu-submenu {\n  background: #252b3b;\n  border-color: rgba(255, 255, 255, 0.1);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-menu-item {\n  color: #e5e7eb;\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-menu-item:hover {\n  background: rgba(255, 255, 255, 0.06);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-menu-icon svg {\n  fill: rgba(229, 231, 235, 0.6);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-quick-chat {\n  background: rgba(255, 255, 255, 0.02);\n  border-top-color: rgba(255, 255, 255, 0.06);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-quick-chat-input {\n  background: rgba(255, 255, 255, 0.06);\n  border-color: rgba(255, 255, 255, 0.12);\n  color: #e5e7eb;\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-quick-chat-input::placeholder {\n  color: rgba(229, 231, 235, 0.5);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-quick-chat-send {\n  background: rgba(255, 255, 255, 0.06);\n  border-color: rgba(255, 255, 255, 0.12);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-quick-chat-send svg {\n  fill: rgba(229, 231, 235, 0.7);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-section-title {\n  color: rgba(229, 231, 235, 0.7);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-context-expander-toggle {\n  color: #e5e7eb;\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-context-expander-toggle:hover {\n  background: rgba(255, 255, 255, 0.04);\n}\n\n/* Glass Theme */\n#mobius-os-sidebar.theme-glass {\n  background: rgba(255, 255, 255, 0.75);\n  backdrop-filter: blur(20px);\n  -webkit-backdrop-filter: blur(20px);\n  border-left-color: rgba(255, 255, 255, 0.3);\n}\n\n#mobius-os-sidebar.theme-glass .top-row {\n  background: rgba(255, 255, 255, 0.4);\n}\n\n#mobius-os-sidebar.theme-glass .sidecar-status-bar {\n  background: rgba(255, 255, 255, 0.5);\n}\n\n#mobius-os-sidebar.theme-glass .sidecar-bottleneck-item {\n  background: rgba(255, 255, 255, 0.6);\n  border-color: rgba(255, 255, 255, 0.4);\n  box-shadow: 0 2px 8px rgba(2, 6, 23, 0.06);\n}\n\n#mobius-os-sidebar.theme-glass .sidecar-menu-btn,\n#mobius-os-sidebar.theme-glass .sidecar-collapse-btn,\n#mobius-os-sidebar.theme-glass .sidecar-alert-indicator {\n  background: rgba(255, 255, 255, 0.5);\n  border-color: rgba(255, 255, 255, 0.4);\n}\n\n#mobius-os-sidebar.theme-glass .sidecar-menu-dropdown,\n#mobius-os-sidebar.theme-glass .sidecar-menu-submenu {\n  background: rgba(255, 255, 255, 0.9);\n  backdrop-filter: blur(10px);\n  -webkit-backdrop-filter: blur(10px);\n}\n\n#mobius-os-sidebar.theme-glass .sidecar-quick-chat {\n  background: rgba(255, 255, 255, 0.4);\n}\n\n#mobius-os-sidebar.theme-glass .sidecar-quick-chat-input {\n  background: rgba(255, 255, 255, 0.7);\n}\n\n/* ============================================\n   COMPLETE DARK THEME - All Sidecar Elements\n   ============================================ */\n\n/* Dark: Greeting */\n#mobius-os-sidebar.theme-dark .sidecar-greeting {\n  border-bottom-color: rgba(255, 255, 255, 0.08);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-greeting-text {\n  color: #f1f5f9;\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-greeting-subtext {\n  color: rgba(148, 163, 184, 0.7);\n}\n\n/* Dark: Patient Row */\n#mobius-os-sidebar.theme-dark .sidecar-patient-row {\n  border-bottom-color: rgba(255, 255, 255, 0.08) !important;\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-patient-row label {\n  color: rgba(148, 163, 184, 0.8);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-patient-row span {\n  color: #f1f5f9;\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-icon-btn {\n  background: rgba(255, 255, 255, 0.06);\n  border-color: rgba(255, 255, 255, 0.12);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-icon-btn svg {\n  fill: rgba(229, 231, 235, 0.7);\n}\n\n/* Dark: Status Bar Title */\n#mobius-os-sidebar.theme-dark .sidecar-status-bar-title {\n  color: rgba(148, 163, 184, 0.8);\n}\n\n/* Dark: Bottleneck Header */\n#mobius-os-sidebar.theme-dark .sidecar-bottleneck-header {\n  color: rgba(229, 231, 235, 0.8);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-bottleneck-count {\n  color: #f1f5f9;\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-bottleneck-hint {\n  color: rgba(148, 163, 184, 0.6);\n}\n\n/* Dark: Answer Buttons */\n#mobius-os-sidebar.theme-dark .sidecar-answer-btn {\n  background: rgba(255, 255, 255, 0.08) !important;\n  background-color: rgba(255, 255, 255, 0.08) !important;\n  border-color: rgba(255, 255, 255, 0.12) !important;\n  color: rgba(229, 231, 235, 0.85) !important;\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-answer-btn:hover {\n  background: rgba(255, 255, 255, 0.12) !important;\n  background-color: rgba(255, 255, 255, 0.12) !important;\n  border-color: rgba(255, 255, 255, 0.18) !important;\n  color: #f1f5f9 !important;\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-answer-btn--selected,\n#mobius-os-sidebar.theme-dark .sidecar-answer-btn.sidecar-answer-btn--selected {\n  background: rgba(37, 99, 235, 0.25) !important;\n  background-color: rgba(37, 99, 235, 0.25) !important;\n  border-color: rgba(37, 99, 235, 0.4) !important;\n  color: #93c5fd !important;\n}\n\n/* Dark: Note Input */\n#mobius-os-sidebar.theme-dark .sidecar-bottleneck-note-row {\n  border-top-color: rgba(255, 255, 255, 0.06);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-bottleneck-note-input {\n  background: rgba(255, 255, 255, 0.06);\n  border-color: rgba(255, 255, 255, 0.12);\n  color: #f1f5f9;\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-bottleneck-note-input::placeholder {\n  color: rgba(148, 163, 184, 0.5);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-bottleneck-note-send svg {\n  fill: rgba(229, 231, 235, 0.6);\n}\n\n/* Dark: Mobius Tip */\n#mobius-os-sidebar.theme-dark .sidecar-bottleneck-mobius-tip {\n  background: rgba(37, 99, 235, 0.15);\n  color: #93c5fd;\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-bottleneck-mobius-tip--assigned {\n  background: rgba(34, 197, 94, 0.15);\n  color: #86efac;\n}\n\n/* Dark: Assign Button */\n#mobius-os-sidebar.theme-dark .sidecar-assign-btn {\n  background: rgba(37, 99, 235, 0.2);\n  border-color: rgba(37, 99, 235, 0.4);\n  color: #93c5fd;\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-assign-btn:hover {\n  background: rgba(37, 99, 235, 0.3);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-assign-menu {\n  background: #252b3b;\n  border-color: rgba(255, 255, 255, 0.1);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-assign-option {\n  color: #e5e7eb;\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-assign-option:hover {\n  background: rgba(255, 255, 255, 0.06);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-assign-option-hint {\n  color: rgba(148, 163, 184, 0.6);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-assign-divider {\n  background: rgba(255, 255, 255, 0.08);\n}\n\n/* Dark: Context Expander */\n#mobius-os-sidebar.theme-dark .sidecar-context-expander-arrow {\n  color: rgba(148, 163, 184, 0.6);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-context-expander-label {\n  color: rgba(148, 163, 184, 0.7);\n}\n\n#mobius-os-sidebar.theme-dark .sidecar-context-expander-content {\n  border-top-color: rgba(255, 255, 255, 0.06);\n}\n\n/* Dark: Cards Container */\n#mobius-os-sidebar.theme-dark .sidecar-cards-container {\n  background: transparent;\n}\n\n/* Dark: Brand Text */\n#mobius-os-sidebar.theme-dark .sidecar-brand-text {\n  color: #f1f5f9;\n}\n\n/* ============================================\n   BLUE THEME - All Sidecar Elements\n   ============================================ */\n\n#mobius-os-sidebar.theme-blue {\n  background: #eff6ff !important;\n  color: #1e3a5f !important;\n  border-color: rgba(37, 99, 235, 0.15) !important;\n}\n\n#mobius-os-sidebar.theme-blue .top-row {\n  background: rgba(37, 99, 235, 0.05);\n  border-bottom-color: rgba(37, 99, 235, 0.1);\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-brand-text {\n  color: #1e40af;\n}\n\n/* Blue: Greeting */\n#mobius-os-sidebar.theme-blue .sidecar-greeting {\n  border-bottom-color: rgba(37, 99, 235, 0.1);\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-greeting-text {\n  color: #1e3a5f;\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-greeting-subtext {\n  color: #3b82f6;\n}\n\n/* Blue: Patient Row */\n#mobius-os-sidebar.theme-blue .sidecar-patient-row {\n  border-bottom-color: rgba(37, 99, 235, 0.1) !important;\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-patient-row label {\n  color: #3b82f6;\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-icon-btn {\n  background: rgba(37, 99, 235, 0.08);\n  border-color: rgba(37, 99, 235, 0.2);\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-icon-btn svg {\n  fill: #3b82f6;\n}\n\n/* Blue: Status Bar */\n#mobius-os-sidebar.theme-blue .sidecar-status-bar {\n  background: rgba(37, 99, 235, 0.03);\n  border-bottom-color: rgba(37, 99, 235, 0.1);\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-status-bar-title {\n  color: #3b82f6;\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-status-bar-context {\n  color: #1e40af;\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-status-bar-track {\n  background: linear-gradient(90deg, \n    rgba(37, 99, 235, 0.08) 0%, \n    rgba(37, 99, 235, 0.15) 50%, \n    rgba(37, 99, 235, 0.2) 100%);\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-status-bar-progress {\n  background: rgba(37, 99, 235, 0.5);\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-status-bar-marker {\n  background: #2563eb;\n  border-color: #eff6ff;\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-status-bar-percent {\n  color: #1e40af;\n}\n\n/* Blue: Bottleneck Card */\n#mobius-os-sidebar.theme-blue .sidecar-bottleneck-item {\n  background: rgba(255, 255, 255, 0.7);\n  border-color: rgba(37, 99, 235, 0.15);\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-bottleneck-question {\n  color: #1e3a5f;\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-bottleneck-count {\n  color: #1e40af;\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-bottleneck-hint {\n  color: #3b82f6;\n}\n\n/* Blue: Answer Buttons */\n#mobius-os-sidebar.theme-blue .sidecar-answer-btn {\n  background: rgba(37, 99, 235, 0.08) !important;\n  background-color: rgba(37, 99, 235, 0.08) !important;\n  border-color: rgba(37, 99, 235, 0.15) !important;\n  color: #3b82f6 !important;\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-answer-btn:hover {\n  background: rgba(37, 99, 235, 0.12) !important;\n  background-color: rgba(37, 99, 235, 0.12) !important;\n  border-color: rgba(37, 99, 235, 0.25) !important;\n  color: #1e40af !important;\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-answer-btn--selected,\n#mobius-os-sidebar.theme-blue .sidecar-answer-btn.sidecar-answer-btn--selected {\n  background: rgba(37, 99, 235, 0.2) !important;\n  background-color: rgba(37, 99, 235, 0.2) !important;\n  border-color: rgba(37, 99, 235, 0.4) !important;\n  color: #1d4ed8 !important;\n}\n\n/* Blue: Note Input */\n#mobius-os-sidebar.theme-blue .sidecar-bottleneck-note-row {\n  border-top-color: rgba(37, 99, 235, 0.1);\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-bottleneck-note-input {\n  background: #ffffff;\n  border-color: #bfdbfe;\n}\n\n/* Blue: Mobius Tip */\n#mobius-os-sidebar.theme-blue .sidecar-bottleneck-mobius-tip {\n  background: rgba(37, 99, 235, 0.1);\n  color: #1e40af;\n}\n\n/* Blue: Assign Button */\n#mobius-os-sidebar.theme-blue .sidecar-assign-btn {\n  background: #2563eb;\n  border-color: #1d4ed8;\n  color: #ffffff;\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-assign-btn:hover {\n  background: #1d4ed8;\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-assign-menu {\n  background: #ffffff;\n  border-color: rgba(37, 99, 235, 0.2);\n}\n\n/* Blue: Context Expander */\n#mobius-os-sidebar.theme-blue .sidecar-context-expander-toggle:hover {\n  background: rgba(37, 99, 235, 0.06);\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-context-expander-arrow {\n  color: #3b82f6;\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-context-expander-label {\n  color: #3b82f6;\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-context-expander-content {\n  border-top-color: rgba(37, 99, 235, 0.1);\n}\n\n/* Blue: Menu */\n#mobius-os-sidebar.theme-blue .sidecar-menu-btn,\n#mobius-os-sidebar.theme-blue .sidecar-collapse-btn,\n#mobius-os-sidebar.theme-blue .sidecar-alert-indicator {\n  background: rgba(37, 99, 235, 0.08);\n  border-color: rgba(37, 99, 235, 0.2);\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-menu-btn svg,\n#mobius-os-sidebar.theme-blue .sidecar-collapse-btn svg,\n#mobius-os-sidebar.theme-blue .sidecar-alert-icon svg {\n  fill: #3b82f6;\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-menu-dropdown,\n#mobius-os-sidebar.theme-blue .sidecar-menu-submenu {\n  background: #ffffff;\n  border-color: rgba(37, 99, 235, 0.15);\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-menu-item {\n  color: #1e3a5f;\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-menu-item:hover {\n  background: rgba(37, 99, 235, 0.08);\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-menu-icon svg {\n  fill: #3b82f6;\n}\n\n/* Blue: Quick Chat */\n#mobius-os-sidebar.theme-blue .sidecar-quick-chat {\n  background: rgba(255, 255, 255, 0.7);\n  border-top-color: rgba(37, 99, 235, 0.1);\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-quick-chat-input {\n  background: #ffffff;\n  border-color: #bfdbfe;\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-quick-chat-input:focus {\n  border-color: #3b82f6;\n}\n\n#mobius-os-sidebar.theme-blue .sidecar-quick-chat-send svg {\n  fill: #3b82f6;\n}\n\n"],sourceRoot:""}]);const a=r},354(n){n.exports=function(n){var e=n[1],i=n[3];if(!i)return e;if("function"==typeof btoa){var t=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(t),s="/*# ".concat(o," */");return[e].concat([s]).join("\n")}return[e].join("\n")}},540(n){n.exports=function(n){var e=document.createElement("style");return n.setAttributes(e,n.attributes),n.insert(e,n.options),e}},659(n){var e={};n.exports=function(n,i){var t=function(n){if(void 0===e[n]){var i=document.querySelector(n);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(n){i=null}e[n]=i}return e[n]}(n);if(!t)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");t.appendChild(i)}},825(n){n.exports=function(n){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=n.insertStyleElement(n);return{update:function(i){!function(n,e,i){var t="";i.supports&&(t+="@supports (".concat(i.supports,") {")),i.media&&(t+="@media ".concat(i.media," {"));var o=void 0!==i.layer;o&&(t+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),t+=i.css,o&&(t+="}"),i.media&&(t+="}"),i.supports&&(t+="}");var s=i.sourceMap;s&&"undefined"!=typeof btoa&&(t+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleTagTransform(t,n,e.options)}(e,n,i)},remove:function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(e)}}}}},e={};function i(t){var o=e[t];if(void 0!==o)return o.exports;var s=e[t]={id:t,exports:{}};return n[t](s,s.exports,i),s.exports}i.n=n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return i.d(e,{a:e}),e},i.d=(n,e)=>{for(var t in e)i.o(e,t)&&!i.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})},i.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),i.nc=void 0;var t=i(72),o=i.n(t),s=i(825),r=i.n(s),a=i(659),A=i.n(a),d=i(56),c=i.n(d),l=i(540),b=i.n(l),m=i(113),p=i.n(m),u=i(340),g={};g.styleTagTransform=p(),g.setAttributes=c(),g.insert=A().bind(null,"head"),g.domAPI=r(),g.insertStyleElement=b(),o()(u.A,g),u.A&&u.A.locals&&u.A.locals;const C="http://localhost:5001",E=`${C}/api/v1`,h="current_session_id";async function f(){return new Promise(n=>{chrome.storage.local.get([h],e=>{if(e[h])n(e[h]);else{const e="session_"+crypto.randomUUID();chrome.storage.local.set({[h]:e},()=>{n(e)})}})})}const x=E,B="mobius.auth.accessToken",k="mobius.auth.refreshToken",y="mobius.auth.expiresAt",w="mobius.auth.userProfile";class v{constructor(){this.listeners=new Set,this.refreshTimer=null}on(n){return this.listeners.add(n),()=>this.listeners.delete(n)}emit(n,e){this.listeners.forEach(i=>{try{i(n,e)}catch(n){console.error("[AuthService] Error in event listener:",n)}})}async storageGet(n){return new Promise(e=>{chrome.runtime.sendMessage({type:"mobius:auth:getStorage",keys:n},n=>{if(chrome.runtime.lastError)return console.error("[AuthService] Storage get error:",chrome.runtime.lastError),void e({});e(n?.ok?n.data:{})})})}async storageSet(n){return new Promise(e=>{chrome.runtime.sendMessage({type:"mobius:auth:setStorage",items:n},n=>{chrome.runtime.lastError&&console.error("[AuthService] Storage set error:",chrome.runtime.lastError),e()})})}async storageClear(n){return new Promise(e=>{chrome.runtime.sendMessage({type:"mobius:auth:clearStorage",keys:n},n=>{chrome.runtime.lastError&&console.error("[AuthService] Storage clear error:",chrome.runtime.lastError),e()})})}async storeTokens(n){const e=Date.now()+1e3*n.expires_in;await this.storageSet({[B]:n.access_token,[k]:n.refresh_token,[y]:e}),this.scheduleTokenRefresh(n.expires_in),console.log("[AuthService] Tokens stored, expires at:",new Date(e).toISOString())}async getAccessToken(){try{const n=await this.storageGet([B,y]),e=n[B],i=n[y];return e?i&&Date.now()>i-6e4?(console.log("[AuthService] Token expired, attempting refresh..."),await this.refreshAccessToken()?await this.getAccessToken():null):e:(console.log("[AuthService] No access token, attempting restore from refresh token..."),await this.getRefreshToken()&&await this.refreshAccessToken()?this.getAccessToken():null)}catch(n){return console.error("[AuthService] Error getting access token:",n),null}}async getRefreshToken(){try{return(await this.storageGet([k]))[k]||null}catch(n){return console.error("[AuthService] Error getting refresh token:",n),null}}async clearTokens(){await this.storageClear([B,k,y,w]),this.refreshTimer&&(clearTimeout(this.refreshTimer),this.refreshTimer=null),console.log("[AuthService] Tokens cleared")}async storeUserProfile(n){await this.storageSet({[w]:n})}async getUserProfile(){try{return(await this.storageGet([w]))[w]||null}catch(n){return console.error("[AuthService] Error getting user profile:",n),null}}scheduleTokenRefresh(n){this.refreshTimer&&clearTimeout(this.refreshTimer);const e=Math.max(1e3*(n-300),6e4);this.refreshTimer=window.setTimeout(async()=>{console.log("[AuthService] Auto-refreshing token..."),await this.refreshAccessToken()},e)}async refreshAccessToken(){const n=await this.getRefreshToken();if(!n)return console.log("[AuthService] No refresh token available"),!1;try{const e=await fetch(`${x}/auth/refresh`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh_token:n})});if(!e.ok)return console.error("[AuthService] Token refresh failed"),await this.clearTokens(),!1;const i=await e.json(),t=Date.now()+1e3*i.expires_in;return await chrome.storage.session.set({[B]:i.access_token,[y]:t}),this.scheduleTokenRefresh(i.expires_in),this.emit("tokenRefreshed"),console.log("[AuthService] Token refreshed successfully"),!0}catch(n){return console.error("[AuthService] Token refresh error:",n),!1}}async login(n,e,i){try{const t=await fetch(`${x}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:e,tenant_id:i})}),o=await t.json();if(!t.ok||!o.ok)return{success:!1,error:o.error||"Login failed"};let s;if(await this.storeTokens({access_token:o.access_token,refresh_token:o.refresh_token,expires_in:o.expires_in}),o.user){const n=o.user,e=n.preference||{};s={user_id:n.user_id,tenant_id:n.tenant_id||"",email:n.email,display_name:n.display_name,first_name:n.first_name,preferred_name:n.preferred_name,greeting_name:n.preferred_name||n.first_name||n.display_name,timezone:n.timezone||"America/New_York",locale:n.locale||"en-US",is_onboarded:n.is_onboarded||!1,activities:(n.activities||[]).map(n=>n.activity_code),tone:e.tone||"professional",greeting_enabled:!1!==e.greeting_enabled,autonomy_routine_tasks:e.autonomy_routine_tasks||"confirm_first",autonomy_sensitive_tasks:e.autonomy_sensitive_tasks||"manual"},await this.storeUserProfile(s)}return this.emit("login",s),{success:!0,user:s}}catch(n){return console.error("[AuthService] Login error:",n),{success:!1,error:"Network error"}}}async register(n,e,i,t,o){try{const s=await fetch(`${x}/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:e,display_name:i,first_name:t,tenant_id:o})}),r=await s.json();if(!s.ok||!r.ok)return{success:!1,error:r.error||"Registration failed"};let a;if(await this.storeTokens({access_token:r.access_token,refresh_token:r.refresh_token,expires_in:r.expires_in}),r.user){const n=r.user,e=n.preference||{};a={user_id:n.user_id,tenant_id:n.tenant_id||"",email:n.email,display_name:n.display_name,first_name:n.first_name,preferred_name:n.preferred_name,greeting_name:n.preferred_name||n.first_name||n.display_name,timezone:n.timezone||"America/New_York",locale:n.locale||"en-US",is_onboarded:n.is_onboarded||!1,activities:(n.activities||[]).map(n=>n.activity_code),tone:e.tone||"professional",greeting_enabled:!1!==e.greeting_enabled,autonomy_routine_tasks:e.autonomy_routine_tasks||"confirm_first",autonomy_sensitive_tasks:e.autonomy_sensitive_tasks||"manual"},await this.storeUserProfile(a)}return this.emit("login",a),{success:!0,user:a}}catch(n){return console.error("[AuthService] Registration error:",n),{success:!1,error:"Network error"}}}async logout(){const n=await this.getRefreshToken();if(n)try{await fetch(`${x}/auth/logout`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh_token:n})})}catch(n){console.warn("[AuthService] Logout API call failed:",n)}await this.clearTokens(),this.emit("logout")}async getCurrentUser(){const n=await this.getAccessToken();if(!n)return null;try{const e=await fetch(`${x}/auth/me`,{method:"GET",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}});if(!e.ok)return null;const i=await e.json();if(i.ok&&i.user){const n=i.user,e=n.preference||{},t={user_id:n.user_id,tenant_id:n.tenant_id,email:n.email,display_name:n.display_name,first_name:n.first_name,preferred_name:n.preferred_name,greeting_name:n.preferred_name||n.first_name||n.display_name||"there",avatar_url:n.avatar_url,timezone:n.timezone||"America/New_York",locale:n.locale||"en-US",is_onboarded:n.is_onboarded||!1,activities:(n.activities||[]).map(n=>n.activity_code),tone:e.tone||"professional",greeting_enabled:!1!==e.greeting_enabled,autonomy_routine_tasks:e.autonomy_routine_tasks||"confirm_first",autonomy_sensitive_tasks:e.autonomy_sensitive_tasks||"manual"};return await this.storeUserProfile(t),t}return null}catch(n){return console.error("[AuthService] Error fetching current user:",n),null}}async isAuthenticated(){return null!==await this.getAccessToken()}async getAuthState(){if(!await this.getAccessToken())return"unauthenticated";const n=await this.getUserProfile();return n&&!n.is_onboarded?"onboarding":"authenticated"}async checkEmail(n,e){try{const i=await fetch(`${x}/auth/check-email`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,tenant_id:e})}),t=await i.json();return{exists:!0===t.exists,user:t.user}}catch(n){return console.error("[AuthService] Error checking email:",n),{exists:!1}}}}let z=null;function _(){return z||(z=new v),z}const S=E;async function q(n,e={}){const i=_(),t=await i.getAccessToken(),o=new Headers(e.headers);return o.set("Content-Type","application/json"),t&&o.set("Authorization",`Bearer ${t}`),fetch(n,{...e,headers:o})}async function M(n,e){const i=await q(`${S}/mini/status`,{method:"POST",body:JSON.stringify({session_id:n,patient_key:e})});if(!i.ok){const n=await i.json();throw new Error(n.error||"Failed to fetch mini status")}return i.json()}const T='\n<svg viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <rect width="32" height="32" rx="6" fill="#0891b2"/>\n  <path d="M16 6L22 18H10L16 6Z" fill="white" opacity="0.9"/>\n  <circle cx="16" cy="22" r="4" fill="white" opacity="0.9"/>\n  <path d="M8 24C8 20 11 17 16 17C21 17 24 20 24 24" stroke="white" stroke-width="2" stroke-linecap="round" opacity="0.6"/>\n</svg>\n',N={CMHC:T,"Aspire Health":T,"Aspire Health FL":T},D={CMHC:"Aspire Health FL"};function Y({logoUrl:n,clientName:e,compact:i=!1}){const t=document.createElement("div");t.className=i?"client-logo client-logo-compact":"client-logo";const o=D[e]||e,s=N[e];if(n){const e=document.createElement("img");e.src=n,e.alt=o,t.appendChild(e)}else if(s&&s.trim().startsWith("<svg")){const n=document.createElement("div");n.className="client-logo-svg";const e=i?"18px":"24px";n.style.cssText=`width: ${e}; height: ${e}; flex-shrink: 0; display: flex; align-items: center; justify-content: center;`,n.innerHTML=s.trim();const o=n.querySelector("svg");o&&(o.style.cssText="width: 100%; height: 100%; display: block;"),t.appendChild(n)}else if(s){const n=document.createElement("img");n.src=s,n.alt=o,t.appendChild(n)}else{const n=document.createElement("div");n.className="client-logo-placeholder";const e=o.split(/\s+/).filter(Boolean).map(n=>n[0]?.toUpperCase()).join("").slice(0,3);n.textContent=e||o.slice(0,1).toUpperCase(),t.appendChild(n)}if(!i){const n=document.createElement("span");n.className="client-name",n.textContent=o,t.appendChild(n)}return t}function j({status:n,size:e=32}){const i="undefined"!=typeof crypto&&"function"==typeof crypto.randomUUID?crypto.randomUUID():String(Math.random()).slice(2),t=`infinityGradNormal_${i}`,o=`infinityGradProcessing_${i}`,s=document.createElement("div");s.className=`mobius-logo status-${n}`,s.style.cssText=`width: ${e}px; height: ${e}px; display: flex; align-items: center; justify-content: center; flex-shrink: 0;`;const r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("viewBox","0 0 100 100"),r.setAttribute("width",e.toString()),r.setAttribute("height",e.toString());const a=document.createElementNS("http://www.w3.org/2000/svg","defs"),A=document.createElementNS("http://www.w3.org/2000/svg","linearGradient");A.setAttribute("id",t),A.setAttribute("x1","0%"),A.setAttribute("y1","50%"),A.setAttribute("x2","100%"),A.setAttribute("y2","50%");const d=document.createElementNS("http://www.w3.org/2000/svg","stop");d.setAttribute("offset","0%"),d.setAttribute("style","stop-color:#666;stop-opacity:1"),A.appendChild(d);const c=document.createElementNS("http://www.w3.org/2000/svg","stop");c.setAttribute("offset","50%"),c.setAttribute("style","stop-color:#ffffff;stop-opacity:1"),A.appendChild(c);const l=document.createElementNS("http://www.w3.org/2000/svg","stop");l.setAttribute("offset","100%"),l.setAttribute("style","stop-color:#666;stop-opacity:1"),A.appendChild(l),a.appendChild(A);const b=document.createElementNS("http://www.w3.org/2000/svg","linearGradient");b.setAttribute("id",o),b.setAttribute("x1","0%"),b.setAttribute("y1","50%"),b.setAttribute("x2","100%"),b.setAttribute("y2","50%");const m=document.createElementNS("http://www.w3.org/2000/svg","stop");m.setAttribute("offset","0%"),m.setAttribute("style","stop-color:#666;stop-opacity:1");const p=document.createElementNS("http://www.w3.org/2000/svg","animate");p.setAttribute("attributeName","stop-color"),p.setAttribute("values","#666;#ffffff;#666"),p.setAttribute("dur","2s"),p.setAttribute("repeatCount","indefinite"),m.appendChild(p),b.appendChild(m);const u=document.createElementNS("http://www.w3.org/2000/svg","stop");u.setAttribute("offset","50%"),u.setAttribute("style","stop-color:#ffffff;stop-opacity:1");const g=document.createElementNS("http://www.w3.org/2000/svg","animate");g.setAttribute("attributeName","stop-color"),g.setAttribute("values","#ffffff;#666;#ffffff"),g.setAttribute("dur","2s"),g.setAttribute("repeatCount","indefinite"),u.appendChild(g),b.appendChild(u);const C=document.createElementNS("http://www.w3.org/2000/svg","stop");C.setAttribute("offset","100%"),C.setAttribute("style","stop-color:#666;stop-opacity:1");const E=document.createElementNS("http://www.w3.org/2000/svg","animate");E.setAttribute("attributeName","stop-color"),E.setAttribute("values","#666;#ffffff;#666"),E.setAttribute("dur","2s"),E.setAttribute("repeatCount","indefinite"),C.appendChild(E),b.appendChild(C),a.appendChild(b),r.appendChild(a);const h="M 25 50 C 25 30, 35 20, 50 30 C 50 30, 50 30, 50 50 C 50 70, 70 80, 80 50 C 80 30, 70 20, 50 30 C 50 30, 50 30, 50 50 C 50 70, 30 80, 25 50",f=document.createElementNS("http://www.w3.org/2000/svg","g");f.setAttribute("class","path-normal");const x=document.createElementNS("http://www.w3.org/2000/svg","path");x.setAttribute("d",h),x.setAttribute("stroke",`url(#${t})`),x.setAttribute("stroke-width","4.5"),x.setAttribute("fill","none"),x.setAttribute("stroke-linecap","round"),f.appendChild(x),r.appendChild(f);const B=document.createElementNS("http://www.w3.org/2000/svg","g");B.setAttribute("class","path-processing");const k=document.createElementNS("http://www.w3.org/2000/svg","path");return k.setAttribute("d",h),k.setAttribute("stroke",`url(#${o})`),k.setAttribute("stroke-width","4.5"),k.setAttribute("fill","none"),k.setAttribute("stroke-linecap","round"),B.appendChild(k),r.appendChild(B),s.appendChild(r),s}const P="mobius.privacyMode";function L(n){const e=n.trim().split(/\s+/);return 0===e.length?"":e.map(n=>n.charAt(0).toUpperCase()).join(".")+"."}function W(n,e){return e?L(n.displayName):n.displayName}function $(n,e){return e?n.shortName.split(/\s+/)[0].charAt(0).toUpperCase()+".":n.shortName}function U(n,e){return e?L(n.displayName)+"'s":n.possessive}function R(n,e){const{isPrivate:i,record:t,staff:o}=e,s={"{{name}}":W(t,i),"{{shortName}}":$(t,i),"{{possessive}}":U(t,i),"{{staffName}}":o?i?L(o.displayName):o.displayName:"Team member","{{staffShortName}}":o?i?o.shortName.charAt(0)+".":o.shortName:""};let r=n;for(const[n,e]of Object.entries(s))r=r.replace(new RegExp(n.replace(/[{}]/g,"\\$&"),"g"),e);return r}const I={isEnabled:async()=>new Promise(n=>{"undefined"!=typeof chrome&&chrome.storage?.local?chrome.storage.local.get([P],e=>{n(!0===e[P])}):n("true"===localStorage.getItem(P))}),setEnabled:async n=>new Promise(e=>{"undefined"!=typeof chrome&&chrome.storage?.local?chrome.storage.local.set({[P]:n},()=>{e()}):(localStorage.setItem(P,String(n)),e())}),async toggle(){const n=!await this.isEnabled();return await this.setEnabled(n),n}},Q=["batch","backend","page","user"],O={batch:"🌙",backend:"📚",page:"📄",user:"✓"};function Z(n){return function(n){try{const e=new Date(n),i=(new Date).getTime()-e.getTime(),t=Math.floor(i/6e4),o=Math.floor(i/36e5),s=Math.floor(i/864e5);return t<1?"just now":t<60?`${t}m ago`:o<24?`${o}h ago`:s<7?`${s}d ago`:e.toLocaleDateString()}catch{return"unknown time"}}(n)}function H(n,e,i,t,o,s){const r=document.createElement("div");r.className="sidecar-bottleneck-item",r.dataset.id=n.id;const a=document.createElement("div");a.className="sidecar-bottleneck-question-row";const A=document.createElement("div");A.className="sidecar-bottleneck-question",A.textContent=R(n.question_text,e),a.appendChild(A);const d=function(n){const e=[];if(n.user&&e.push({source:"user",value:n.user.value,timestamp:n.user.set_at}),n.page&&e.push({source:"page",value:n.page.value,timestamp:n.page.detected_at}),n.backend&&e.push({source:"backend",value:n.backend.value,timestamp:n.backend.fetched_at}),n.batch&&e.push({source:"batch",value:n.batch.value,timestamp:n.batch.updated_at}),0===e.length)return null;e.sort((n,e)=>Q.indexOf(e.source)-Q.indexOf(n.source));const i=e[0],t=new Set(e.map(n=>n.value.toLowerCase().trim())).size>1;let o;return t&&(o=e.filter(n=>n.value.toLowerCase().trim()!==i.value.toLowerCase().trim()).map(n=>n.source)),{value:i.value,source:i.source,timestamp:i.timestamp,hasConflict:t,conflictingSources:o}}(n.sources);if(d&&"user"!==d.source){const n=document.createElement("span");n.className="sidecar-source-badge",n.textContent=(c=d.source,O[c]||""),n.title="Data "+("batch"===d.source?"from batch analysis":"detected on page"),a.appendChild(n)}var c;if(function(n){const e=[];return n.user&&e.push(n.user.value.toLowerCase().trim()),n.page&&e.push(n.page.value.toLowerCase().trim()),n.backend&&e.push(n.backend.value.toLowerCase().trim()),n.batch&&e.push(n.batch.value.toLowerCase().trim()),new Set(e).size>1}(n.sources)){const n=document.createElement("span");n.className="sidecar-conflict-badge",n.textContent="⚠️",n.title="Different sources show different values",a.appendChild(n)}const l=function(n,e,i){const t=document.createElement("div");t.className="sidecar-assign-dropdown";const o=document.createElement("button");o.className="sidecar-assign-btn",o.innerHTML='\n    <span class="sidecar-assign-label">Assign</span>\n    <span class="sidecar-assign-arrow">▾</span>\n  ',o.title="Assign task";const s=document.createElement("div");s.className="sidecar-assign-menu",s.style.display="none";const r=document.createElement("button");r.className="sidecar-assign-option",r.innerHTML='\n    <span class="sidecar-assign-option-text">Let Mobius handle</span>\n    <span class="sidecar-assign-option-hint">Fully automated</span>\n  ',n.mobius_action&&(r.title=n.mobius_action),r.addEventListener("click",i=>{i.stopPropagation(),s.style.display="none",o.querySelector(".sidecar-assign-label").textContent="Mobius",o.classList.add("sidecar-assign-btn--assigned"),e(n.id,"agentic")}),s.appendChild(r);const a=document.createElement("button");a.className="sidecar-assign-option",a.innerHTML='\n    <span class="sidecar-assign-option-text">Watch Mobius do it</span>\n    <span class="sidecar-assign-option-hint">You review each step</span>\n  ',a.addEventListener("click",i=>{i.stopPropagation(),s.style.display="none",o.querySelector(".sidecar-assign-label").textContent="Copilot",o.classList.add("sidecar-assign-btn--assigned"),e(n.id,"copilot")}),s.appendChild(a);const A=document.createElement("div");A.className="sidecar-assign-divider",s.appendChild(A);const d=document.createElement("button");return d.className="sidecar-assign-option",d.innerHTML='\n    <span class="sidecar-assign-option-text">I\'ll do it myself</span>\n    <span class="sidecar-assign-option-hint">Manual resolution</span>\n  ',d.addEventListener("click",e=>{e.stopPropagation(),s.style.display="none",o.querySelector(".sidecar-assign-label").textContent="Me",o.classList.add("sidecar-assign-btn--assigned"),i(n.id)}),s.appendChild(d),o.addEventListener("click",n=>{n.stopPropagation();const e="none"!==s.style.display;s.style.display=e?"none":"block"}),document.addEventListener("click",()=>{s.style.display="none"}),t.appendChild(o),t.appendChild(s),t}(n,t,o);a.appendChild(l),r.appendChild(a);const b=document.createElement("div");b.className="sidecar-bottleneck-answers";for(const e of n.answer_options){const t=F(e,()=>{i(n.id,e.id)});b.appendChild(t)}if(r.appendChild(b),n.mobius_can_handle){const n=document.createElement("div");n.className="sidecar-bottleneck-mobius-tip",n.innerHTML='<span class="sidecar-mobius-tip-icon">✦</span> Mobius can handle this for you',r.appendChild(n)}const m=document.createElement("div");m.className="sidecar-bottleneck-note-row";const p=document.createElement("div");p.className="sidecar-bottleneck-note-wrap";const u=document.createElement("input");u.type="text",u.className="sidecar-bottleneck-note-input",u.placeholder="Add note...";const g=document.createElement("button");g.className="sidecar-bottleneck-note-send",g.type="button",g.innerHTML='<svg viewBox="0 0 24 24" aria-hidden="true"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"></path></svg>',g.title="Send note";const C=()=>{const e=u.value.trim();e&&(s(n.id,e),u.value="")};return g.addEventListener("click",C),u.addEventListener("keydown",n=>{"Enter"===n.key&&(n.preventDefault(),C())}),p.appendChild(u),p.appendChild(g),m.appendChild(p),r.appendChild(m),r}function F(n,e){const i=document.createElement("button");return i.className="sidecar-answer-btn",i.textContent=n.label,n.description&&(i.title=n.description),i.addEventListener("click",()=>{!function(n){const e=n.closest(".sidecar-bottleneck-answers");e?(e.querySelectorAll(".sidecar-answer-btn").forEach(n=>{n.classList.remove("sidecar-answer-btn--selected")}),n.classList.add("sidecar-answer-btn--selected"),console.log("[BottleneckCard] Selected button:",n.textContent,"Classes:",n.className)):console.log("[BottleneckCard] Container not found for button")}(i),e()}),i}function X(n,e){const i=document.createElement("div");i.className=`sidecar-milestone sidecar-milestone--${n.status}`;const t=document.createElement("div");t.className="sidecar-milestone-header";const o=document.createElement("span");o.className="sidecar-milestone-icon",o.textContent={complete:"✓",in_progress:"◐",blocked:"✗",pending:"○"}[n.status]||"○",t.appendChild(o);const s=document.createElement("span");s.className="sidecar-milestone-label",s.textContent=R(n.label,e),t.appendChild(s);const r=n.history.length>0||n.substeps.length>0;if(r){const n=document.createElement("span");n.className="sidecar-milestone-arrow",n.textContent="▸",t.appendChild(n)}if(i.appendChild(t),r){const e=document.createElement("div");if(e.className="sidecar-milestone-details",e.style.display="none",n.substeps.length>0){const i=document.createElement("div");i.className="sidecar-substeps";for(const e of n.substeps){const n=document.createElement("div");n.className=`sidecar-substep sidecar-substep--${e.status}`,n.innerHTML=`\n          <span class="sidecar-substep-icon">${"complete"===e.status?"✓":"current"===e.status?"●":"○"}</span>\n          <span class="sidecar-substep-label">${e.label}</span>\n        `,i.appendChild(n)}e.appendChild(i)}if(n.history.length>0){const i=function(n){const e=document.createElement("div");e.className="sidecar-timeline";const i=document.createElement("div");i.className="sidecar-timeline-title",i.textContent="History",e.appendChild(i);for(const i of n.slice().reverse()){const n=document.createElement("div");n.className="sidecar-timeline-entry";const t=document.createElement("span");t.className=`sidecar-timeline-actor sidecar-timeline-actor--${i.actor}`,t.textContent=i.actor_name||i.actor,n.appendChild(t);const o=document.createElement("span");o.className="sidecar-timeline-action",o.textContent=i.action,n.appendChild(o);const s=document.createElement("span");if(s.className="sidecar-timeline-time",s.textContent=Z(i.timestamp),n.appendChild(s),i.artifact){const e=document.createElement("a");e.className="sidecar-timeline-artifact",e.textContent=i.artifact.label,i.artifact.url&&(e.href=i.artifact.url,e.target="_blank"),n.appendChild(e)}e.appendChild(n)}return e}(n.history);e.appendChild(i)}i.appendChild(e),t.style.cursor="pointer",t.addEventListener("click",()=>{const n="none"!==e.style.display;e.style.display=n?"none":"block";const i=t.querySelector(".sidecar-milestone-arrow");i&&(i.textContent=n?"▸":"▾")})}return i}const G="mobius-toast-container",V="mobius.notificationsEnabled",J={win:5e3,update:3e3,reminder:0,conflict:0};let K=!1,nn=!1,en=null,tn=new Set,on=[],sn=new Map,rn=!0,an=null,An=null;function dn(n){if(!K)return console.warn("[ToastManager] Not initialized, queueing toast"),void on.push(n);rn||"conflict"===n.type?function(n){const e=document.getElementById(G);if(!e)return void console.error("[ToastManager] Container not found");if(sn.has(n.id))return;const i=document.createElement("div");i.className="mobius-toast",i.dataset.type=n.type,i.dataset.id=n.id;const t=document.createElement("span");t.className="mobius-toast-emoji",t.textContent=function(n){switch(n){case"win":return"🎉";case"update":return"✓";case"reminder":return"⏰";case"conflict":return"⚠️";default:return"📋"}}(n.type),i.appendChild(t);const o=document.createElement("div");o.className="mobius-toast-content";const s=document.createElement("div");if(s.className="mobius-toast-title",s.textContent=n.title,o.appendChild(s),n.subtitle){const e=document.createElement("div");e.className="mobius-toast-subtitle",e.textContent=n.subtitle,o.appendChild(e)}i.appendChild(o);const r=document.createElement("button");r.className="mobius-toast-close",r.innerHTML="×",r.addEventListener("click",e=>{e.stopPropagation(),cn(n.id)}),i.appendChild(r),n.patient_key&&i.addEventListener("click",()=>{var e;e=n.patient_key,An?An(e):console.warn("[ToastManager] No jump-to-patient callback registered"),cn(n.id)}),e.appendChild(i),sn.set(n.id,i);const a=n.auto_dismiss_ms??J[n.type];a>0&&setTimeout(()=>{cn(n.id)},a)}(n):console.log("[ToastManager] Notifications disabled, skipping toast:",n.id)}function cn(n){const e=sn.get(n);e&&(e.classList.add("mobius-toast-exit"),setTimeout(()=>{e.remove(),sn.delete(n)},300))}async function ln(){try{const n=await async function(){const n=_(),e=await n.getAccessToken();return e?{Authorization:`Bearer ${e}`}:null}();if(!n)return;const e=await fetch("/api/v1/user/alerts",{method:"GET",headers:{"Content-Type":"application/json",...n}});if(!e.ok)return void console.error("[ToastManager] Failed to fetch alerts:",e.status);const i=await e.json(),t=i.alerts.filter(n=>!tn.has(n.id));tn=new Set(i.alerts.map(n=>n.id));for(const n of t)dn(bn(n))}catch(n){console.error("[ToastManager] Error polling alerts:",n)}}function bn(n){const e={id:n.id,type:n.type,title:n.title,subtitle:n.subtitle,patient_key:n.patient_key,auto_dismiss_ms:J[n.type]};return"reminder"===n.type&&(e.actions=[{id:"still_on_it",label:"Still on it"},{id:"hand_to_mobius",label:"Hand to Mobius"}]),e}const mn=[{id:"light",label:"Light",icon:"○"},{id:"dark",label:"Dark",icon:"●"},{id:"blue",label:"Blue",icon:"◑"},{id:"glass",label:"Glass",icon:"◐"}];function pn(n){const{onHistoryClick:e,onSettingsClick:i,onHelpClick:t,onPrivacyChange:o,onNotificationsChange:s,onThemeChange:r}=n,a=document.createElement("div");a.className="sidecar-menu";const A=document.createElement("button");A.className="sidecar-menu-btn",A.innerHTML='<svg viewBox="0 0 24 24"><circle cx="12" cy="5" r="2"/><circle cx="12" cy="12" r="2"/><circle cx="12" cy="19" r="2"/></svg>',A.title="Menu";const d=document.createElement("div");d.className="sidecar-menu-dropdown",d.style.display="none",A.addEventListener("click",n=>{n.stopPropagation(),d.style.display="none"===d.style.display?"block":"none"}),document.addEventListener("click",()=>{d.style.display="none"});const c=[{label:"Notifications",icon:"bell",toggle:{key:"notifications",getState:async()=>rn,onChange:async n=>{await async function(n){if(rn=n,await async function(n){return new Promise(e=>{"undefined"!=typeof chrome&&chrome.storage?.local?chrome.storage.local.set({[V]:n},()=>{e()}):(localStorage.setItem(V,String(n)),e())})}(n),!n)for(const[n,e]of sn.entries()){const i=e.dataset.type;"conflict"!==i&&"reminder"!==i&&cn(n)}}(n),s(n)}}},{label:"Privacy mode",icon:"lock",toggle:{key:"privacy",getState:()=>I.isEnabled(),onChange:async n=>{await I.setEnabled(n),o(n)}}},{label:"divider",icon:""},{label:"Theme",icon:"palette",submenu:!0},{label:"divider",icon:""},{label:"History",icon:"history",onClick:()=>{d.style.display="none",e()}},{label:"Settings",icon:"settings",onClick:()=>{d.style.display="none",i()}},{label:"Help",icon:"help",onClick:()=>{d.style.display="none",t()}}];for(const n of c){if("divider"===n.label){const n=document.createElement("div");n.className="sidecar-menu-divider",d.appendChild(n);continue}const e=document.createElement("div");e.className="sidecar-menu-item";const i=document.createElement("span");i.className="sidecar-menu-icon",i.innerHTML=un(n.icon),e.appendChild(i);const t=document.createElement("span");if(t.className="sidecar-menu-label",t.textContent=n.label,e.appendChild(t),n.toggle){const i=Cn(n.toggle.key,n.toggle.getState,n.toggle.onChange);e.appendChild(i)}else if(n.submenu&&"Theme"===n.label){const n=document.createElement("span");n.className="sidecar-menu-arrow",n.textContent="›",e.appendChild(n);const i=gn(r);e.appendChild(i),e.addEventListener("mouseenter",()=>{i.style.display="block"}),e.addEventListener("mouseleave",()=>{i.style.display="none"})}else n.onClick&&(e.addEventListener("click",n.onClick),e.style.cursor="pointer");d.appendChild(e)}return a.appendChild(A),a.appendChild(d),a}function un(n){return{bell:'<svg viewBox="0 0 24 24"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5v6z"/></svg>',lock:'<svg viewBox="0 0 24 24"><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/></svg>',palette:'<svg viewBox="0 0 24 24"><path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-.23-.26-.38-.61-.38-.99 0-.83.67-1.5 1.5-1.5H16c2.76 0 5-2.24 5-5 0-4.42-4.03-8-9-8zm-5.5 9c-.83 0-1.5-.67-1.5-1.5S5.67 9 6.5 9 8 9.67 8 10.5 7.33 12 6.5 12zm3-4C8.67 8 8 7.33 8 6.5S8.67 5 9.5 5s1.5.67 1.5 1.5S10.33 8 9.5 8zm5 0c-.83 0-1.5-.67-1.5-1.5S13.67 5 14.5 5s1.5.67 1.5 1.5S15.33 8 14.5 8zm3 4c-.83 0-1.5-.67-1.5-1.5S16.67 9 17.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/></svg>',history:'<svg viewBox="0 0 24 24"><path d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"/></svg>',settings:'<svg viewBox="0 0 24 24"><path d="M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/></svg>',help:'<svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"/></svg>'}[n]||""}function gn(n){const e=document.createElement("div");e.className="sidecar-menu-submenu",e.style.display="none";for(const i of mn){const t=document.createElement("div");t.className="sidecar-menu-submenu-item",t.innerHTML=`\n      <span class="sidecar-menu-theme-icon">${i.icon}</span>\n      <span class="sidecar-menu-theme-label">${i.label}</span>\n    `,t.addEventListener("click",t=>{t.stopPropagation();const o=document.getElementById("mobius-os-sidebar");o&&(o.classList.remove("theme-light","theme-dark","theme-blue","theme-glass"),o.classList.add(`theme-${i.id}`)),n?.(i.id),e.style.display="none"}),e.appendChild(t)}return e}function Cn(n,e,i){const t=document.createElement("label");t.className="sidecar-menu-toggle";const o=document.createElement("input");o.type="checkbox",o.className="sidecar-menu-toggle-input",o.dataset.key=n;const s=document.createElement("span");return s.className="sidecar-menu-toggle-slider",e().then(n=>{o.checked=n}),o.addEventListener("change",()=>{i(o.checked)}),t.addEventListener("click",n=>{n.stopPropagation()}),t.appendChild(o),t.appendChild(s),t}const En=[{attr:"data-patient-mrn",type:"mrn",source:"context",selector:"#mobius-patient-context"},{attr:"data-selected-patient-mrn",type:"mrn",source:"selected",selector:'.detail-panel[style*="block"]'},{attr:"data-selected-patient-mrn",type:"mrn",source:"selected"},{attr:"data-patient-mrn",type:"mrn",source:"epic"},{attr:"data-patient-name",type:"patient_key",source:"epic"},{attr:"data-epic-mrn",type:"mrn",source:"epic"},{attr:"data-epic-patient-id",type:"patient_key",source:"epic"},{attr:"data-cerner-mrn",type:"mrn",source:"cerner"},{attr:"data-cerner-patient",type:"patient_key",source:"cerner"},{attr:"data-cerner-patient-id",type:"patient_key",source:"cerner"},{attr:"data-athena-record-number",type:"mrn",source:"athena"},{attr:"data-athena-full-name",type:"patient_key",source:"athena"},{attr:"data-athena-patient-id",type:"patient_key",source:"athena"},{attr:"data-allscripts-id",type:"mrn",source:"allscripts"},{attr:"data-allscripts-name",type:"patient_key",source:"allscripts"},{attr:"data-allscripts-mrn",type:"mrn",source:"allscripts"},{attr:"data-netsmart-mrn",type:"mrn",source:"netsmart"},{attr:"data-netsmart-client",type:"patient_key",source:"netsmart"},{attr:"data-qualifacts-mrn",type:"mrn",source:"qualifacts"},{attr:"data-qualifacts-client",type:"patient_key",source:"qualifacts"},{attr:"data-id",type:"mrn",source:"legacy"},{attr:"data-name",type:"patient_key",source:"legacy"},{attr:"data-mrn",type:"mrn",source:"unknown"},{attr:"data-patient-id",type:"patient_key",source:"unknown"},{attr:"data-record-id",type:"mrn",source:"unknown"}],hn=[{regex:/[?&]mrn=([^&]+)/i,type:"mrn"},{regex:/[?&]MRN=([^&]+)/,type:"mrn"},{regex:/[?&]patient_id=([^&]+)/i,type:"patient_key"},{regex:/[?&]patientId=([^&]+)/i,type:"patient_key"},{regex:/[?&]patient=([^&]+)/i,type:"patient_key"},{regex:/[?&]record_id=([^&]+)/i,type:"mrn"},{regex:/[?&]chart_id=([^&]+)/i,type:"mrn"},{regex:/\/patient\/([A-Za-z0-9-]+)/i,type:"patient_key"},{regex:/\/patients\/([A-Za-z0-9-]+)/i,type:"patient_key"},{regex:/\/chart\/([A-Za-z0-9-]+)/i,type:"mrn"},{regex:/\/record\/([A-Za-z0-9-]+)/i,type:"mrn"},{regex:/\/mrn\/([A-Za-z0-9-]+)/i,type:"mrn"},{regex:/\/Epic\/Patient\/([A-Za-z0-9-]+)/i,type:"patient_key"},{regex:/\/powerchart\/patient\/([A-Za-z0-9-]+)/i,type:"patient_key"},{regex:/\/athenaone\/patient\/([A-Za-z0-9-]+)/i,type:"patient_key"}],fn=[{regex:/MRN[:\s]+([A-Z0-9-]+)/i,type:"mrn"},{regex:/Medical\s*Record\s*(?:Number|#|No\.?)[:\s]+([A-Z0-9-]+)/i,type:"mrn"},{regex:/Record\s*#[:\s]*([A-Z0-9-]+)/i,type:"mrn"},{regex:/Chart\s*#[:\s]*([A-Z0-9-]+)/i,type:"mrn"},{regex:/Patient\s*ID[:\s]+([A-Z0-9-]+)/i,type:"patient_key"},{regex:/Patient\s*#[:\s]*([A-Z0-9-]+)/i,type:"patient_key"},{regex:/Patient\s*Number[:\s]+([A-Z0-9-]+)/i,type:"patient_key"},{regex:/Account\s*#[:\s]*([A-Z0-9-]+)/i,type:"patient_key"},{regex:/Encounter\s*#[:\s]*([A-Z0-9-]+)/i,type:"patient_key"}],xn={dataAttributes:En,urlPatterns:hn,textPatterns:fn};function Bn(n=En,e=document){const i=document.getElementById("mobius-patient-context");if(i){const n=i.getAttribute("data-patient-mrn");if(console.log("[PatternMatcher] Context element found, MRN:",n),n&&n.trim())return{id_type:"mrn",id_value:n.trim(),source_hint:"context",confidence:"high",detected_at:(new Date).toISOString()}}for(const i of n){const n=i.selector?`${i.selector}[${i.attr}]`:`[${i.attr}]`,t=e.querySelector(n);if(t){const n=t.getAttribute(i.attr);if(n&&n.trim())return console.log("[PatternMatcher] Found:",i.attr,"=",n,"on",t.id||t.className),{id_type:i.type,id_value:n.trim(),source_hint:i.source,confidence:"high",detected_at:(new Date).toISOString()}}}return null}function kn(n=hn,e=window.location.href){for(const i of n){const n="string"==typeof i.regex?new RegExp(i.regex):i.regex,t=e.match(n);if(t){const n=t[i.captureGroup??1];if(n&&n.trim())return{id_type:i.type,id_value:decodeURIComponent(n.trim()),source_hint:"url",confidence:"high",detected_at:(new Date).toISOString()}}}return null}function yn(n=fn,e=document){for(const i of n){const n="string"==typeof i.regex?new RegExp(i.regex):i.regex;let t;if(i.selector){const n=e.querySelector(i.selector);t=n?.textContent||""}else{const n=["header",'[class*="patient"]','[class*="header"]','[class*="banner"]','[id*="patient"]',"main"];t="";for(const i of n)e.querySelectorAll(i).forEach(n=>{t+=" "+(n.textContent||"")});t.trim()||(t=e.body?.textContent||"")}const o=t.match(n);if(o){const n=o[i.captureGroup??1];if(n&&n.trim())return{id_type:i.type,id_value:n.trim(),source_hint:"text",confidence:"medium",detected_at:(new Date).toISOString()}}}return null}function wn(n,e){return{dataAttributes:[...e.dataAttributes||[],...n.dataAttributes],urlPatterns:[...e.urlPatterns||[],...n.urlPatterns],textPatterns:[...e.textPatterns||[],...n.textPatterns]}}const vn={debounceMs:500,strategies:["dataAttributes","url","domText"],customPatterns:{},autoStart:!1,observeMutations:!0};class zn{constructor(n={}){this.observer=null,this.debounceTimer=null,this.isRunning=!1,this.currentPatient=null,this.listeners=new Map,this.lastUrl="",this.options={...vn,...n},this.patterns=wn(xn,this.options.customPatterns||{}),this.listeners.set("patientDetected",new Set),this.listeners.set("patientChanged",new Set),this.listeners.set("patientCleared",new Set),this.listeners.set("detectionError",new Set),this.options.autoStart&&this.start()}start(){this.isRunning?console.log("[PatientContextDetector] Already running"):(console.log("[PatientContextDetector] Starting..."),this.isRunning=!0,this.lastUrl=window.location.href,this.scheduleDetection(),this.setupUrlChangeDetection(),this.options.observeMutations&&this.setupMutationObserver())}stop(){this.isRunning&&(console.log("[PatientContextDetector] Stopping..."),this.isRunning=!1,null!==this.debounceTimer&&(window.clearTimeout(this.debounceTimer),this.debounceTimer=null),this.observer&&(this.observer.disconnect(),this.observer=null))}detect(){try{const n=function(n=["dataAttributes","url","domText"],e=xn){for(const i of n){let n=null;switch(i){case"dataAttributes":n=Bn(e.dataAttributes);break;case"url":n=kn(e.urlPatterns);break;case"domText":n=yn(e.textPatterns)}if(n)return n}return null}(this.options.strategies,this.patterns);return this.handleDetectionResult(n),n}catch(n){return console.error("[PatientContextDetector] Detection error:",n),this.emit("detectionError",null),null}}on(n,e){const i=this.listeners.get(n);return i&&i.add(e),()=>this.off(n,e)}off(n,e){const i=this.listeners.get(n);i&&i.delete(e)}getCurrentPatient(){return this.currentPatient}updatePatterns(n){this.patterns=wn(xn,n),this.isRunning&&this.scheduleDetection()}updatePatternsFromConfig(n){const e=function(n){if(!n||"object"!=typeof n)return{};const e={},i=n;return Array.isArray(i.dataAttributes)&&(e.dataAttributes=i.dataAttributes),Array.isArray(i.urlPatterns)&&(e.urlPatterns=i.urlPatterns.map(n=>({regex:new RegExp(n.regex),type:n.type,captureGroup:n.captureGroup}))),Array.isArray(i.textPatterns)&&(e.textPatterns=i.textPatterns.map(n=>({regex:new RegExp(n.regex),type:n.type,captureGroup:n.captureGroup,selector:n.selector}))),e}(n);this.updatePatterns(e)}isActive(){return this.isRunning}setupMutationObserver(){this.observer=new MutationObserver(n=>{n.some(n=>{if(n.addedNodes.length>0||n.removedNodes.length>0)return!0;if("attributes"===n.type){const e=n.target,i=n.attributeName||"";return(i.includes("patient")||i.includes("mrn")||i.includes("selected"))&&console.log("[PatientContextDetector] Attribute mutation:",i,"on",e.id||e.className),this.patterns.dataAttributes.some(n=>n.attr===i)||i.includes("patient")||i.includes("mrn")||i.includes("id")}return!1})&&(console.log("[PatientContextDetector] Relevant mutation detected, scheduling detection"),this.scheduleDetection())}),this.observer.observe(document.body,{childList:!0,subtree:!0,attributes:!0})}setupUrlChangeDetection(){window.addEventListener("popstate",()=>{window.location.href!==this.lastUrl&&(this.lastUrl=window.location.href,this.scheduleDetection())});const n=new MutationObserver(()=>{window.location.href!==this.lastUrl&&(this.lastUrl=window.location.href,this.scheduleDetection())}),e=document.querySelector("title");e&&n.observe(e,{childList:!0,characterData:!0}),setInterval(()=>{this.isRunning&&window.location.href!==this.lastUrl&&(this.lastUrl=window.location.href,this.scheduleDetection())},1e3)}scheduleDetection(){null!==this.debounceTimer&&window.clearTimeout(this.debounceTimer),this.debounceTimer=window.setTimeout(()=>{this.debounceTimer=null,this.detect()},this.options.debounceMs)}handleDetectionResult(n){const e=this.currentPatient;null===n&&null!==e?(this.currentPatient=null,this.emit("patientCleared",null),console.log("[PatientContextDetector] Patient context cleared")):null!==n&&null===e?(this.currentPatient=n,this.emit("patientDetected",n),console.log("[PatientContextDetector] Patient detected:",n)):null!==n&&null!==e&&(this.isSamePatient(n,e)||(this.currentPatient=n,this.emit("patientChanged",n),console.log("[PatientContextDetector] Patient changed:",n)))}isSamePatient(n,e){return n.id_type===e.id_type&&n.id_value===e.id_value}emit(n,e){const i=this.listeners.get(n);i&&i.forEach(i=>{try{i(e,n)}catch(e){console.error(`[PatientContextDetector] Error in ${n} listener:`,e)}})}}const _n=E;function Sn(n){const e=document.createElement("div");return e.textContent=n,e.innerHTML}let qn,Mn=null;const Tn="mobius-os-mini",Nn="mobius-os-mini-modal",Dn="mobius-os-mini-toast",Yn="mobius.allowedDomains",jn="mobius.miniPos",Pn="mobius.patientOverride",Ln="mobius.miniTheme";function Wn(n,e){n.classList.remove("theme-light","theme-dark","theme-blue","theme-glass"),n.classList.add(`theme-${e}`)}let $n=null,Un={color:"grey",text:"Proceed: Not assessed"},Rn={color:"grey",text:"Tasking: Not applicable"},In=null,Qn=null,On=null,Zn={color:"grey",problemStatement:null,userStatus:null},Hn=0,Fn=null,Xn=0,Gn=null,Vn=!1,Jn=!1;async function Kn(){if(!Jn)try{await async function(n){K?console.log("[ToastManager] Already initialized"):(console.log("[ToastManager] Initializing..."),n?.onAction&&(an=n.onAction),n?.onJumpToPatient&&(An=n.onJumpToPatient),rn=await async function(){return new Promise(n=>{if("undefined"!=typeof chrome&&chrome.storage?.local)chrome.storage.local.get([V],e=>{n(!1!==e[V])});else{const e=localStorage.getItem(V);n("false"!==e)}})}(),function(){const n=document.getElementById(G);n&&n.remove();const e=document.createElement("div");e.id=G,e.setAttribute("style","\n    position: fixed !important;\n    top: 16px !important;\n    right: 16px !important;\n    z-index: 2147483647 !important;\n    display: flex !important;\n    flex-direction: column !important;\n    gap: 8px !important;\n    pointer-events: none !important;\n    max-width: 320px !important;\n  "),document.body.appendChild(e),function(){const n="mobius-toast-styles";if(document.getElementById(n))return;const e=document.createElement("style");e.id=n,e.textContent="\n    .mobius-toast {\n      pointer-events: auto !important;\n      background: rgba(255, 255, 255, 0.95) !important;\n      backdrop-filter: blur(8px) !important;\n      border-radius: 6px !important;\n      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1) !important;\n      padding: 6px 10px !important;\n      display: flex !important;\n      align-items: center !important;\n      gap: 6px !important;\n      cursor: pointer !important;\n      animation: mobius-toast-enter 0.2s ease-out !important;\n      border: 1px solid rgba(11, 18, 32, 0.08) !important;\n      max-width: 260px !important;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;\n    }\n    \n    .mobius-toast-emoji {\n      font-size: 14px !important;\n      line-height: 1 !important;\n      flex-shrink: 0 !important;\n    }\n    \n    .mobius-toast-content {\n      flex: 1 !important;\n      min-width: 0 !important;\n    }\n    \n    .mobius-toast-title {\n      font-weight: 500 !important;\n      font-size: 10px !important;\n      color: #0b1220 !important;\n      margin: 0 !important;\n      line-height: 1.3 !important;\n      white-space: nowrap !important;\n      overflow: hidden !important;\n      text-overflow: ellipsis !important;\n    }\n    \n    .mobius-toast-subtitle {\n      font-size: 9px !important;\n      color: rgba(91, 102, 122, 0.7) !important;\n      margin: 0 !important;\n      line-height: 1.3 !important;\n      white-space: nowrap !important;\n      overflow: hidden !important;\n      text-overflow: ellipsis !important;\n    }\n    \n    .mobius-toast-close {\n      background: none !important;\n      border: none !important;\n      cursor: pointer !important;\n      color: rgba(91, 102, 122, 0.4) !important;\n      font-size: 12px !important;\n      line-height: 1 !important;\n      padding: 0 !important;\n      margin-left: 2px !important;\n      flex-shrink: 0 !important;\n    }\n    \n    .mobius-toast-close:hover {\n      color: rgba(91, 102, 122, 0.7) !important;\n    }\n    \n    .mobius-toast-exit {\n      animation: mobius-toast-exit 0.2s ease-in forwards !important;\n    }\n    \n    @keyframes mobius-toast-enter {\n      from {\n        opacity: 0;\n        transform: translateY(-8px);\n      }\n      to {\n        opacity: 1;\n        transform: translateY(0);\n      }\n    }\n    \n    @keyframes mobius-toast-exit {\n      from {\n        opacity: 1;\n        transform: translateY(0);\n      }\n      to {\n        opacity: 0;\n        transform: translateY(-8px);\n      }\n    }\n  ",document.head.appendChild(e)}()}(),K=!0,console.log("[ToastManager] Initialized, notifications enabled:",rn))}({onAction:(n,e)=>{console.log("[Mobius] Toast action:",n,e)},onJumpToPatient:async n=>{console.log("[Mobius] Jump to patient:",n),In={name:"Patient",id:n},await be({[Pn]:In}),await we()}}),nn?console.log("[ToastManager] Already polling"):(console.log("[ToastManager] Starting polling..."),nn=!0,ln(),en=window.setInterval(()=>{ln()},3e4)),Jn=!0,console.log("[Mobius] Toast manager initialized")}catch(n){console.error("[Mobius] Failed to initialize toast manager:",n)}}function ne(){const n=document.getElementById(Tn);if(!n)return;const e=n.querySelector(".mobius-mini-question-text"),i=n.querySelector(".mobius-mini-badge-text"),t=n.querySelector(".mobius-mini-attention-row .mobius-mini-dot");if(!e)return;const o=Zn.color||"grey";if(Fn){if("resolved"===Fn.status)return e.textContent="No issues detected",e.title=Fn.resolution_notes||"All checks passed",i&&(i.textContent="Resolved ✓"),void(t&&(t.className="mobius-mini-dot dot-green"));if(Fn.current_step){const n=Fn.current_step,s=50,r=n.question_text||"Action required";return e.textContent=r.length>s?r.slice(0,s)+"...":r,e.title=n.question_text||"",i&&(i.textContent="Set status ▾"),void(t&&(t.className=`mobius-mini-dot ${he(o)}`))}const n=Fn.other_role_tasks||0;return n>0?(e.textContent="Waiting on another team member",e.title=`${n} task(s) assigned to other roles`,i&&(i.textContent="Pending"),void(t&&(t.className=`mobius-mini-dot ${he(o)}`))):(e.textContent="All steps completed",i&&(i.textContent="Complete ✓"),void(t&&(t.className="mobius-mini-dot dot-green")))}e.textContent=Zn.problemStatement||"No issues detected",i&&(i.textContent="Set status"),t&&(t.className=`mobius-mini-dot ${he(o)}`)}function ee(){const n=document.getElementById(Tn);if(!n)return;const e=n.querySelector(".mobius-mini-task-badge-row");if(!e)return;const i=e.querySelector(".mobius-mini-task-count"),t=e.querySelector(".mobius-mini-task-label"),o=Xn>0?Xn:Hn;i&&(i.textContent=String(o)),t&&(t.textContent=1===o?"item remaining":"items remaining"),e.style.display=o>0?"":"none"}let ie=!1,te=null,oe=null,se=!1,re=null;const ae=1e4;function Ae(){de(),re=setInterval(async()=>{const n=In?.id?In.id:On?.found&&On.patient_key?On.patient_key:void 0;if(n)try{const e=await M(qn,n),i=e.needs_attention?.user_status||null;if(i!==Zn.userStatus){console.log("[Mobius] Status changed via polling:",i),e.needs_attention&&(Zn={color:e.needs_attention.color,problemStatement:e.needs_attention.problem_statement,userStatus:e.needs_attention.user_status});const n=document.getElementById(Tn);n&&function(n){let e=Zn.color;"resolved"===Zn.userStatus?e="green":"confirmed_unresolved"===Zn.userStatus?e="yellow":"unable_to_confirm"===Zn.userStatus&&(e="grey");const i=n.querySelector(".mobius-mini-attention-row");if(i){const n=i.querySelector(".mobius-mini-dot"),t=i.querySelector(".mobius-mini-problem-text"),o=i.querySelector(".mobius-mini-status-btn");n&&(n.className=`mobius-mini-dot ${he(e)}`),t&&("resolved"===Zn.userStatus?t.textContent="No issues detected":Zn.problemStatement?t.textContent=Zn.problemStatement:t.textContent="No issues detected"),o&&("resolved"===Zn.userStatus?(o.textContent="Resolved ▾",o.className="mobius-mini-status-btn resolved"):(o.textContent="Set status ▾",o.className="mobius-mini-status-btn"))}const t=n.querySelector(".mobius-mini-minimized-info .mobius-mini-dot");t&&(t.className=`mobius-mini-dot ${he(e)}`)}(n)}}catch(n){console.debug("[Mobius] Polling error:",n)}},ae),console.log("[Mobius] Status polling started")}function de(){re&&(clearInterval(re),re=null,console.log("[Mobius] Status polling stopped"))}function ce(){try{return window.location.hostname.toLowerCase()}catch{return""}}async function le(n){return new Promise(e=>{chrome.storage.local.get(n,n=>e(n))})}async function be(n){return new Promise(e=>{chrome.storage.local.set(n,()=>e())})}async function me(){const n=(await le([Yn]))[Yn];return Array.isArray(n)?n:[]}async function pe(n,e){const i=(n||"").toLowerCase();if(!i)return;const t=await me(),o=new Set(t.map(n=>String(n).toLowerCase()).filter(Boolean));e?o.add(i):o.delete(i),await be({[Yn]:Array.from(o).sort()})}function ue(){const n=document.getElementById(Tn);n&&n.remove();const e=document.getElementById(Nn);e&&e.remove(),Qn&&(Qn.stop(),console.log("[Mobius] Patient context detection stopped")),de()}function ge(){const n=document.getElementById("mobius-os-sidebar");n&&n.remove();const e=document.getElementById("mobius-os-page-adjust");e&&e.remove(),Mn=null}function Ce(n){const e=document.getElementById(Dn);e&&e.remove();const i=document.createElement("div");i.id=Dn,i.className="mobius-mini-toast",i.textContent=n,document.body.appendChild(i),window.setTimeout(()=>i.remove(),1600)}function Ee(n,e,i,t={}){const{preferAbove:o=!0,gap:s=8}=t,r=window.innerWidth,a=window.innerHeight;window.scrollX,window.scrollY;let A,d,c="top left";const l=n.top,b=a-n.bottom;o&&l>=i+s?(A=n.top-i-s,c="bottom"):b>=i+s?(A=n.bottom+s,c="top"):l>b?(A=Math.max(s,n.top-i-s),c="bottom"):(A=n.bottom+s,c="top");const m=r-n.left,p=n.right;return m>=e?(d=n.left,c+=" left"):p>=e?(d=n.right-e,c+=" right"):(d=Math.max(s,Math.min(n.left,r-e-s)),c+=" center"),{top:A,left:d,transformOrigin:c}}function he(n){switch(n){case"green":return"dot-green";case"yellow":return"dot-yellow";case"blue":return"dot-blue";case"red":return"dot-red";case"purple":return"dot-purple";default:return"dot-grey"}}function fe(n,e,i){return Math.max(e,Math.min(i,n))}async function xe(n,e){const i=function(n,e){const i=e.getBoundingClientRect(),t=window.innerWidth-i.width-8,o=window.innerHeight-i.height-8;return{x:fe(n.x,8,Math.max(8,t)),y:fe(n.y,8,Math.max(8,o))}}(e,n);n.style.left=`${i.x}px`,n.style.top=`${i.y}px`,$n=i,await be({[jn]:i})}function Be(){return In||(On?.found?{name:On.display_name||"Unknown",id:On.patient_key||"",dob:""}:{name:"Unknown",id:"",dob:""})}async function ke(n){if(!n)return void(On&&(On=null,console.log("[Mobius] Auto-detected patient cleared"),await qe()));console.log("[Mobius] Resolving detected patient:",n);const e=await async function(n){const e=window.location.hostname,i={id_type:n.id_type,id_value:n.id_value,source_hint:n.source_hint,domain:e,tenant_id:void 0};try{const e=await fetch(`${S}/context/detect`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!e.ok){const n=await e.json();throw new Error(n.error||"Failed to resolve patient context")}const t=await e.json();return{found:t.found,detected:n,patient_context_id:t.patient_context_id,patient_key:t.patient_key,display_name:t.display_name,id_masked:t.id_masked}}catch(e){return console.error("[API] Error resolving patient context:",e),{found:!1,detected:n}}}(n);e.found?(On=e,console.log("[Mobius] Patient resolved:",e),In&&(console.log("[Mobius] Clearing patient override in favor of auto-detected patient"),In=null,await be({[Pn]:null})),await async function(n){const e=document.getElementById(Tn);if(!e)return;const i=e.querySelector(".mobius-mini-patient-name"),t=e.querySelector(".mobius-mini-patient-id");i&&(i.textContent=n.display_name||"Unknown"),t&&n.id_masked&&(t.textContent=`ID ${n.id_masked}`);const o=e.querySelector(".mobius-mini-minimized-patient");if(o&&(o.textContent=n.display_name||"Unknown"),n.patient_key)try{const i=await M(qn,n.patient_key);Un=i.proceed,i.tasking&&(Rn=i.tasking),i.needs_attention&&(Zn={color:i.needs_attention.color,problemStatement:i.needs_attention.problem_statement,userStatus:i.needs_attention.user_status}),Hn=i.task_count||0,Fn=i.resolution_plan||null,Xn=i.actions_for_user||0;const t=e.querySelector(".mobius-mini-attention-row");let o=Zn.color;if("resolved"===Zn.userStatus?o="green":"confirmed_unresolved"===Zn.userStatus?o="yellow":"unable_to_confirm"===Zn.userStatus&&(o="grey"),t){const n=t.querySelector(".mobius-mini-dot"),e=t.querySelector(".mobius-mini-problem-text");n&&(n.className=`mobius-mini-dot ${he(o)}`),e&&("resolved"===Zn.userStatus?e.textContent="Resolved":Zn.problemStatement?e.textContent=Zn.problemStatement:e.textContent="No issues detected")}const s=e.querySelector(".mobius-mini-minimized-info .mobius-mini-dot");if(s&&(s.className=`mobius-mini-dot ${he(o)}`),ee(),ne(),Ce(`Patient detected: ${n.display_name||"Unknown"}`),Ae(),document.getElementById("mobius-os-sidebar")){console.log("[Mobius] Refreshing Sidecar with new patient");const e={patient:{name:n.display_name||"Unknown",id:n.patient_key||""},resolutionPlan:Fn,userProfile:te,needsAttention:Zn};await async function(n){ge(),await ve(n)}(e)}}catch(n){console.error("[Mobius] Error fetching status for auto-detected patient:",n)}}(e)):(console.log("[Mobius] Patient not found in system:",n),On=e)}function ye(){const n=document.createElement("div");n.id=Tn,n.className="mobius-mini";const e=document.createElement("div");e.className="mobius-mini-header";const i=document.createElement("div");i.className="mobius-mini-drag-handle",i.title="Drag",i.innerHTML='<div class="mobius-mini-drag-dots"></div>';const t=Y({clientName:"CMHC",compact:!0}),o=document.createElement("div");o.className="mobius-mini-brand-divider";const s=document.createElement("div");s.className="mobius-mini-brand",s.appendChild(t),s.appendChild(o),s.appendChild(j({status:"idle"}));const r=document.createElement("div");r.className="mobius-mini-brand-text",r.textContent="Mobius",s.appendChild(r);const a=document.createElement("button");a.className="mobius-mini-minimize-btn",a.type="button",a.textContent="−",a.setAttribute("aria-label","Minimize");const A=document.createElement("div");A.className="mobius-mini-minimized-info",A.innerHTML='\n    <span class="mobius-mini-dot"></span>\n    <span class="mobius-mini-minimized-patient"></span>\n  ';const d=document.createElement("button");d.className="mobius-mini-expand-btn",d.type="button",d.textContent="›",d.setAttribute("aria-label","Expand");const c=document.createElement("button");c.className="mobius-mini-menu-btn",c.type="button",c.textContent="⋮",c.setAttribute("aria-label","Menu");const l=document.createElement("div");l.className="mobius-mini-menu",l.style.cssText="\n    display: none;\n    position: fixed;\n    background: #fff;\n    border: 1px solid rgba(11, 18, 32, 0.12);\n    border-radius: 8px;\n    box-shadow: 0 4px 12px rgba(2,6,23,0.15);\n    z-index: 2147483647;\n    min-width: 120px;\n    padding: 4px 0;\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n    font-size: 11px;\n    pointer-events: auto;\n  ";let b=!1;const m="padding:6px 12px;cursor:pointer;display:flex;align-items:center;gap:6px;color:#374151;";l.innerHTML=`\n    <div class="mobius-mini-menu-item mobius-mini-theme-trigger" style="${m}">\n      Theme <span style="margin-left:auto;font-size:9px;opacity:0.5;">›</span>\n    </div>\n    <div class="mobius-mini-theme-submenu" style="display:none;border-top:1px solid rgba(11,18,32,0.06);padding:2px 0;margin:0 4px;">\n      <div class="mobius-mini-menu-item" data-theme="light" style="${m}font-size:10px;">Light</div>\n      <div class="mobius-mini-menu-item" data-theme="dark" style="${m}font-size:10px;">Dark</div>\n      <div class="mobius-mini-menu-item" data-theme="blue" style="${m}font-size:10px;">Blue</div>\n      <div class="mobius-mini-menu-item" data-theme="glass" style="${m}font-size:10px;">Glass</div>\n    </div>\n    <div style="height:1px;background:rgba(11,18,32,0.06);margin:2px 8px;"></div>\n    <div class="mobius-mini-menu-item danger" style="${m}color:#dc2626;font-size:10px;">Disable on this site</div>\n  `;const p=l.querySelector(".mobius-mini-theme-submenu"),u=l.querySelector(".mobius-mini-theme-trigger");console.log("[Mobius] Theme trigger found:",!!u);const g=l.querySelectorAll("[data-theme]");console.log("[Mobius] Theme options found:",g.length),u&&(u.onmousedown=n=>{n.stopPropagation(),n.preventDefault(),b=!b,p.style.display=b?"block":"none",console.log("[Mobius] Theme submenu toggled:",b)}),g.forEach(e=>{e.onmousedown=async i=>{i.stopPropagation(),i.preventDefault();const t=e.dataset.theme||"light";console.log("[Mobius] Theme option clicked:",t),await(async e=>{console.log("[Mobius] Applying theme:",e),Wn(n,e),await async function(n){try{await chrome.storage.local.set({[Ln]:n})}catch(n){console.warn("[Mobius] Failed to save theme:",n)}}(e),l.style.display="none",b=!1})(t)}}),l.querySelectorAll(".mobius-mini-menu-item").forEach(n=>{const e=n;e.onmouseenter=()=>{e.style.background="rgba(59,130,246,0.08)"},e.onmouseleave=()=>{e.style.background="transparent"}});const E=l.querySelector(".danger");E&&(E.onmousedown=async n=>{n.stopPropagation(),n.preventDefault(),console.log("[Mobius] Disable clicked"),l.style.display="none";const e=ce();try{await pe(e,!1),console.log("[Mobius] Disabled on:",e),ue(),document.body.contains(l)&&l.remove()}catch(n){console.error("[Mobius] Failed to disable:",n)}}),l.onmousedown=n=>{console.log("[Mobius] Menu mousedown, target:",n.target.className)};let h=!1;c.onmousedown=n=>{if(n.stopPropagation(),n.preventDefault(),h=!0,setTimeout(()=>{h=!1},150),"none"===l.style.display||""===l.style.display){const n=c.getBoundingClientRect();l.style.top=`${n.bottom+4}px`,l.style.right=window.innerWidth-n.right+"px",l.style.left="auto",l.style.display="block",p.style.display="none",b=!1,document.body.contains(l)||document.body.appendChild(l)}else l.style.display="none";console.log("[Mobius] Menu toggled:",l.style.display)},document.addEventListener("mousedown",e=>{h||l.contains(e.target)||n.contains(e.target)||"none"!==l.style.display&&(console.log("[Mobius] Closing menu - clicked outside"),l.style.display="none",p.style.display="none",b=!1)}),e.appendChild(A),e.appendChild(s),e.appendChild(a),e.appendChild(d),e.appendChild(c),n.appendChild(e);const f=document.createElement("div");f.className="mobius-mini-greeting-row",f.style.display="none",f.innerHTML='\n    <button class="mobius-mini-greeting-main" type="button">\n      <span class="mobius-mini-greeting-text">Hello</span>\n      <svg class="mobius-mini-greeting-chevron" viewBox="0 0 24 24" width="14" height="14">\n        <path fill="currentColor" d="M7 10l5 5 5-5z"/>\n      </svg>\n    </button>\n    <button class="mobius-mini-greeting-dismiss" type="button" title="Hide greeting">\n      <svg viewBox="0 0 24 24" width="12" height="12">\n        <path fill="currentColor" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>\n      </svg>\n    </button>\n  ',n.appendChild(f);let x=null;f.querySelector(".mobius-mini-greeting-main")?.addEventListener("click",n=>{n.stopPropagation(),(()=>{if(x)return x.remove(),void(x=null);const n=f.getBoundingClientRect();x=document.createElement("div"),x.className="mobius-mini-user-dropdown";const e=Math.max(n.width,200),i=Ee(n,e,180,{preferAbove:!1,gap:4});x.style.cssText=`\n      position: fixed;\n      top: ${i.top}px;\n      left: ${i.left}px;\n      width: ${e}px;\n      background: white;\n      border-radius: 8px;\n      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);\n      z-index: 2147483647;\n      overflow: hidden;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n      transform-origin: ${i.transformOrigin};\n    `;const t=te?.display_name||te?.email||"User",o=te?.email||"",s=(t||"?")[0].toUpperCase();x.innerHTML=`\n      <div style="display:flex;align-items:center;gap:10px;padding:12px;background:#f8fafc;">\n        <div style="width:36px;height:36px;border-radius:50%;background:#3b82f6;color:white;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:14px;">${s}</div>\n        <div style="flex:1;min-width:0;">\n          <div style="font-size:11px;font-weight:600;color:#0b1220;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;">${t}</div>\n          ${o?`<div style="font-size:9px;color:#64748b;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;">${o}</div>`:""}\n        </div>\n      </div>\n      <div style="height:1px;background:#e2e8f0;"></div>\n      <button class="mobius-mini-dropdown-item" data-action="preferences" style="display:flex;align-items:center;gap:10px;width:100%;padding:10px 12px;background:none;border:none;cursor:pointer;font-size:10px;color:#374151;text-align:left;">\n        <svg viewBox="0 0 24 24" width="14" height="14" style="color:#64748b;flex-shrink:0;">\n          <path fill="currentColor" d="M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/>\n        </svg>\n        <span>My Preferences</span>\n      </button>\n      <button class="mobius-mini-dropdown-item" data-action="switch" style="display:flex;align-items:center;gap:10px;width:100%;padding:10px 12px;background:none;border:none;cursor:pointer;font-size:10px;color:#374151;text-align:left;">\n        <svg viewBox="0 0 24 24" width="14" height="14" style="color:#64748b;flex-shrink:0;">\n          <path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>\n        </svg>\n        <span>Not you? Sign in differently</span>\n      </button>\n      <div style="height:1px;background:#e2e8f0;"></div>\n      <button class="mobius-mini-dropdown-item" data-action="signout" style="display:flex;align-items:center;gap:10px;width:100%;padding:10px 12px;background:none;border:none;cursor:pointer;font-size:10px;color:#dc2626;text-align:left;">\n        <svg viewBox="0 0 24 24" width="14" height="14" style="color:#dc2626;flex-shrink:0;">\n          <path fill="currentColor" d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/>\n        </svg>\n        <span>Sign out</span>\n      </button>\n    `,document.body.appendChild(x),x.querySelectorAll(".mobius-mini-dropdown-item").forEach(n=>{n.addEventListener("mouseenter",()=>{n.style.background="#f8fafc"}),n.addEventListener("mouseleave",()=>{n.style.background="transparent"}),n.addEventListener("click",async()=>{const e=n.dataset.action;if("signout"===e){const n=_();await n.logout(),ie=!1,te=null,oe=null,await qe(),Ce("Signed out")}else if("preferences"===e)B();else if("switch"===e){const n=_();await n.logout(),ie=!1,te=null,await qe()}x&&(x.remove(),x=null)})});const r=n=>{!x||x.contains(n.target)||f.contains(n.target)||(x.remove(),x=null,document.removeEventListener("click",r))};setTimeout(()=>document.addEventListener("click",r),0)})()}),f.querySelector(".mobius-mini-greeting-dismiss")?.addEventListener("click",n=>{n.stopPropagation(),se=!0,f.style.display="none"});const B=async()=>{if(!document.getElementById("mobius-prefs-styles")){const n=document.createElement("style");n.id="mobius-prefs-styles",n.textContent="\n.mobius-prefs-modal {\n  position: fixed;\n  inset: 0;\n  z-index: 10000;\n}\n\n.mobius-prefs-backdrop {\n  position: absolute;\n  inset: 0;\n  background: rgba(0, 0, 0, 0.5);\n}\n\n.mobius-prefs-container {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background: white;\n  border-radius: 12px;\n  width: 90%;\n  max-width: 420px;\n  max-height: 85vh;\n  display: flex;\n  flex-direction: column;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);\n}\n\n.mobius-prefs-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 16px 20px;\n  border-bottom: 1px solid #e2e8f0;\n}\n\n.mobius-prefs-header h2 {\n  margin: 0;\n  font-size: 14px;\n  font-weight: 600;\n  color: #0b1220;\n}\n\n.mobius-prefs-close {\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 4px;\n  color: #64748b;\n}\n\n.mobius-prefs-close:hover {\n  color: #374151;\n}\n\n.mobius-prefs-tabs {\n  display: flex;\n  border-bottom: 1px solid #e2e8f0;\n  padding: 0 12px;\n}\n\n.mobius-prefs-tab {\n  padding: 10px 12px;\n  background: none;\n  border: none;\n  border-bottom: 2px solid transparent;\n  font-size: 11px;\n  color: #64748b;\n  cursor: pointer;\n  transition: all 0.15s;\n}\n\n.mobius-prefs-tab:hover {\n  color: #374151;\n}\n\n.mobius-prefs-tab.active {\n  color: #3b82f6;\n  border-bottom-color: #3b82f6;\n}\n\n.mobius-prefs-content {\n  flex: 1;\n  overflow-y: auto;\n  padding: 16px 20px;\n}\n\n.mobius-prefs-section {\n  margin-bottom: 16px;\n}\n\n.mobius-prefs-section:last-child {\n  margin-bottom: 0;\n}\n\n.mobius-prefs-label {\n  display: block;\n  font-size: 11px;\n  font-weight: 500;\n  color: #374151;\n  margin-bottom: 8px;\n}\n\n.mobius-prefs-desc {\n  font-size: 10px;\n  color: #64748b;\n  margin: 0 0 12px;\n}\n\n.mobius-prefs-input,\n.mobius-prefs-select {\n  width: 100%;\n  padding: 8px 10px;\n  border: 1px solid #e2e8f0;\n  border-radius: 6px;\n  font-size: 12px;\n  box-sizing: border-box;\n}\n\n.mobius-prefs-input:focus,\n.mobius-prefs-select:focus {\n  outline: none;\n  border-color: #3b82f6;\n}\n\n/* Activities */\n.mobius-prefs-activities {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 6px;\n}\n\n.mobius-prefs-activity {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  padding: 6px 10px;\n  background: #f8fafc;\n  border: 1px solid #e2e8f0;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 10px;\n  color: #374151;\n  transition: all 0.15s;\n}\n\n.mobius-prefs-activity:hover {\n  background: #f1f5f9;\n}\n\n.mobius-prefs-activity.selected {\n  background: #eff6ff;\n  border-color: #3b82f6;\n}\n\n.mobius-prefs-activity input {\n  display: none;\n}\n\n.mobius-prefs-activity-check {\n  width: 14px;\n  height: 14px;\n  border: 1px solid #cbd5e1;\n  border-radius: 3px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n}\n\n.mobius-prefs-activity.selected .mobius-prefs-activity-check {\n  background: #3b82f6;\n  border-color: #3b82f6;\n}\n\n/* Options */\n.mobius-prefs-options {\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n}\n\n.mobius-prefs-option {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 10px 12px;\n  background: #f8fafc;\n  border: 1px solid #e2e8f0;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 11px;\n  color: #374151;\n  transition: all 0.15s;\n}\n\n.mobius-prefs-option:hover {\n  background: #f1f5f9;\n}\n\n.mobius-prefs-option.selected {\n  background: #eff6ff;\n  border-color: #3b82f6;\n}\n\n.mobius-prefs-option input {\n  display: none;\n}\n\n/* Toggle */\n.mobius-prefs-toggle {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  cursor: pointer;\n}\n\n.mobius-prefs-toggle input {\n  display: none;\n}\n\n.mobius-prefs-toggle-slider {\n  width: 36px;\n  height: 20px;\n  background: #e2e8f0;\n  border-radius: 10px;\n  position: relative;\n  transition: background 0.2s;\n}\n\n.mobius-prefs-toggle-slider::after {\n  content: '';\n  position: absolute;\n  width: 16px;\n  height: 16px;\n  background: white;\n  border-radius: 50%;\n  top: 2px;\n  left: 2px;\n  transition: transform 0.2s;\n  box-shadow: 0 1px 3px rgba(0,0,0,0.2);\n}\n\n.mobius-prefs-toggle input:checked + .mobius-prefs-toggle-slider {\n  background: #3b82f6;\n}\n\n.mobius-prefs-toggle input:checked + .mobius-prefs-toggle-slider::after {\n  transform: translateX(16px);\n}\n\n.mobius-prefs-toggle-label {\n  font-size: 11px;\n  color: #374151;\n}\n\n/* Footer */\n.mobius-prefs-footer {\n  display: flex;\n  justify-content: flex-end;\n  gap: 10px;\n  padding: 16px 20px;\n  border-top: 1px solid #e2e8f0;\n}\n\n.mobius-prefs-btn-cancel {\n  padding: 8px 16px;\n  background: none;\n  border: 1px solid #e2e8f0;\n  border-radius: 6px;\n  font-size: 11px;\n  color: #64748b;\n  cursor: pointer;\n}\n\n.mobius-prefs-btn-cancel:hover {\n  background: #f8fafc;\n}\n\n.mobius-prefs-btn-save {\n  padding: 8px 16px;\n  background: #3b82f6;\n  border: none;\n  border-radius: 6px;\n  font-size: 11px;\n  font-weight: 500;\n  color: white;\n  cursor: pointer;\n}\n\n.mobius-prefs-btn-save:hover {\n  background: #2563eb;\n}\n",document.head.appendChild(n)}const n=te?.activities||oe?.activities?.map(n=>n.code)||[],e={preferred_name:te?.preferred_name||te?.first_name||"",timezone:te?.timezone||"America/New_York",activities:n,tone:te?.tone||"professional",greeting_enabled:!1!==te?.greeting_enabled,autonomy_routine_tasks:te?.autonomy_routine_tasks||"confirm_first",autonomy_sensitive_tasks:te?.autonomy_sensitive_tasks||"manual"},i=await async function(n){const{preferences:e,onSave:i,onClose:t}=n;let o=n.activities||[];if(0===o.length)try{const n=await fetch(`${_n}/auth/activities`),e=await n.json();e.ok&&(o=e.activities)}catch(n){console.error("[PreferencesModal] Error fetching activities:",n)}const s={...e},r=[...s.activities||[]],a=document.createElement("div");a.className="mobius-prefs-modal";let A="profile";const d=()=>{a.innerHTML=`\n      <div class="mobius-prefs-backdrop"></div>\n      <div class="mobius-prefs-container">\n        <div class="mobius-prefs-header">\n          <h2>My Preferences</h2>\n          <button class="mobius-prefs-close" type="button">\n            <svg viewBox="0 0 24 24" width="18" height="18">\n              <path fill="currentColor" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>\n            </svg>\n          </button>\n        </div>\n        \n        <div class="mobius-prefs-tabs">\n          <button class="mobius-prefs-tab ${"profile"===A?"active":""}" data-tab="profile">Profile</button>\n          <button class="mobius-prefs-tab ${"activities"===A?"active":""}" data-tab="activities">Activities</button>\n          <button class="mobius-prefs-tab ${"ai"===A?"active":""}" data-tab="ai">AI Comfort</button>\n          <button class="mobius-prefs-tab ${"display"===A?"active":""}" data-tab="display">Display</button>\n        </div>\n        \n        <div class="mobius-prefs-content">\n          ${c()}\n        </div>\n        \n        <div class="mobius-prefs-footer">\n          <button class="mobius-prefs-btn-cancel" type="button">Cancel</button>\n          <button class="mobius-prefs-btn-save" type="button">Save Changes</button>\n        </div>\n      </div>\n    `,l()},c=()=>{switch(A){case"profile":return`\n          <div class="mobius-prefs-section">\n            <label class="mobius-prefs-label">Preferred Name</label>\n            <input type="text" class="mobius-prefs-input" id="pref-name" \n                   value="${Sn(s.preferred_name||"")}" \n                   placeholder="How should we greet you?" />\n          </div>\n          <div class="mobius-prefs-section">\n            <label class="mobius-prefs-label">Timezone</label>\n            <select class="mobius-prefs-select" id="pref-timezone">\n              <option value="America/New_York" ${"America/New_York"===s.timezone?"selected":""}>Eastern Time (ET)</option>\n              <option value="America/Chicago" ${"America/Chicago"===s.timezone?"selected":""}>Central Time (CT)</option>\n              <option value="America/Denver" ${"America/Denver"===s.timezone?"selected":""}>Mountain Time (MT)</option>\n              <option value="America/Los_Angeles" ${"America/Los_Angeles"===s.timezone?"selected":""}>Pacific Time (PT)</option>\n            </select>\n          </div>\n        `;case"activities":return`\n          <p class="mobius-prefs-desc">Select the activities you work on. This helps Mobius show you relevant quick actions and tasks.</p>\n          <div class="mobius-prefs-activities">\n            ${o.map(n=>`\n              <label class="mobius-prefs-activity ${r.includes(n.activity_code)?"selected":""}">\n                <input type="checkbox" value="${n.activity_code}" ${r.includes(n.activity_code)?"checked":""} />\n                <span class="mobius-prefs-activity-check">\n                  <svg viewBox="0 0 24 24" width="14" height="14">\n                    <path fill="currentColor" d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>\n                  </svg>\n                </span>\n                <span>${Sn(n.label)}</span>\n              </label>\n            `).join("")}\n          </div>\n        `;case"ai":return`\n          <div class="mobius-prefs-section">\n            <label class="mobius-prefs-label">For routine tasks (eligibility checks, status updates):</label>\n            <div class="mobius-prefs-options">\n              <label class="mobius-prefs-option ${"automatic"===s.autonomy_routine_tasks?"selected":""}">\n                <input type="radio" name="routine" value="automatic" ${"automatic"===s.autonomy_routine_tasks?"checked":""} />\n                <span>Do it automatically</span>\n              </label>\n              <label class="mobius-prefs-option ${"confirm_first"===s.autonomy_routine_tasks?"selected":""}">\n                <input type="radio" name="routine" value="confirm_first" ${"confirm_first"===s.autonomy_routine_tasks?"checked":""} />\n                <span>Show me first, then confirm</span>\n              </label>\n              <label class="mobius-prefs-option ${"manual"===s.autonomy_routine_tasks?"selected":""}">\n                <input type="radio" name="routine" value="manual" ${"manual"===s.autonomy_routine_tasks?"checked":""} />\n                <span>Just guide me, I'll do it</span>\n              </label>\n            </div>\n          </div>\n          <div class="mobius-prefs-section">\n            <label class="mobius-prefs-label">For sensitive tasks (billing, patient records):</label>\n            <div class="mobius-prefs-options">\n              <label class="mobius-prefs-option ${"automatic"===s.autonomy_sensitive_tasks?"selected":""}">\n                <input type="radio" name="sensitive" value="automatic" ${"automatic"===s.autonomy_sensitive_tasks?"checked":""} />\n                <span>Do it automatically</span>\n              </label>\n              <label class="mobius-prefs-option ${"confirm_first"===s.autonomy_sensitive_tasks?"selected":""}">\n                <input type="radio" name="sensitive" value="confirm_first" ${"confirm_first"===s.autonomy_sensitive_tasks?"checked":""} />\n                <span>Always show me before acting</span>\n              </label>\n              <label class="mobius-prefs-option ${"manual"===s.autonomy_sensitive_tasks?"selected":""}">\n                <input type="radio" name="sensitive" value="manual" ${"manual"===s.autonomy_sensitive_tasks?"checked":""} />\n                <span>Never act without my approval</span>\n              </label>\n            </div>\n          </div>\n        `;case"display":return`\n          <div class="mobius-prefs-section">\n            <label class="mobius-prefs-label">Communication Tone</label>\n            <div class="mobius-prefs-options">\n              <label class="mobius-prefs-option ${"professional"===s.tone?"selected":""}">\n                <input type="radio" name="tone" value="professional" ${"professional"===s.tone?"checked":""} />\n                <span>Professional</span>\n              </label>\n              <label class="mobius-prefs-option ${"friendly"===s.tone?"selected":""}">\n                <input type="radio" name="tone" value="friendly" ${"friendly"===s.tone?"checked":""} />\n                <span>Friendly</span>\n              </label>\n              <label class="mobius-prefs-option ${"concise"===s.tone?"selected":""}">\n                <input type="radio" name="tone" value="concise" ${"concise"===s.tone?"checked":""} />\n                <span>Concise</span>\n              </label>\n            </div>\n          </div>\n          <div class="mobius-prefs-section">\n            <label class="mobius-prefs-toggle">\n              <input type="checkbox" id="pref-greeting" ${s.greeting_enabled?"checked":""} />\n              <span class="mobius-prefs-toggle-slider"></span>\n              <span class="mobius-prefs-toggle-label">Show personalized greeting</span>\n            </label>\n          </div>\n        `;default:return""}},l=()=>{a.querySelector(".mobius-prefs-close")?.addEventListener("click",t),a.querySelector(".mobius-prefs-backdrop")?.addEventListener("click",t),a.querySelector(".mobius-prefs-btn-cancel")?.addEventListener("click",t),a.querySelector(".mobius-prefs-btn-save")?.addEventListener("click",async()=>{await m()}),a.querySelectorAll(".mobius-prefs-tab").forEach(n=>{n.addEventListener("click",()=>{A=n.dataset.tab||"profile",d()})}),a.querySelector("#pref-name")?.addEventListener("input",n=>{s.preferred_name=n.target.value}),a.querySelector("#pref-timezone")?.addEventListener("change",n=>{s.timezone=n.target.value}),a.querySelectorAll(".mobius-prefs-activity input").forEach(n=>{n.addEventListener("change",n=>{const e=n.target.value,i=n.target.checked,t=n.target.closest(".mobius-prefs-activity");if(i)r.includes(e)||r.push(e),t?.classList.add("selected");else{const n=r.indexOf(e);n>-1&&r.splice(n,1),t?.classList.remove("selected")}s.activities=[...r]})}),["routine","sensitive","tone"].forEach(n=>{a.querySelectorAll(`input[name="${n}"]`).forEach(e=>{e.addEventListener("change",e=>{const i=e.target.value;"routine"===n&&(s.autonomy_routine_tasks=i),"sensitive"===n&&(s.autonomy_sensitive_tasks=i),"tone"===n&&(s.tone=i),b(n)})})}),a.querySelector("#pref-greeting")?.addEventListener("change",n=>{s.greeting_enabled=n.target.checked})},b=n=>{a.querySelectorAll(`input[name="${n}"]`).forEach(n=>{const e=n.closest(".mobius-prefs-option");n.checked?e?.classList.add("selected"):e?.classList.remove("selected")})},m=async()=>{const n=a.querySelector(".mobius-prefs-btn-save");n&&(n.textContent="Saving...",n.disabled=!0);try{const n=_(),e=await n.getAccessToken();if(e){const t=await fetch(`${_n}/auth/preferences`,{method:"PUT",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({preferred_name:s.preferred_name,timezone:s.timezone,activities:r,tone:s.tone,greeting_enabled:s.greeting_enabled,autonomy_routine_tasks:s.autonomy_routine_tasks,autonomy_sensitive_tasks:s.autonomy_sensitive_tasks})});if(t.ok){console.log("[PreferencesModal] Preferences saved");const e=await n.getCurrentUser();e&&console.log("[PreferencesModal] User profile refreshed:",e),s.activities=[...r],i(s)}else{const n=await t.json().catch(()=>({}));console.error("[PreferencesModal] Error saving preferences:",n),alert("Failed to save preferences. Please try again.")}}}catch(n){console.error("[PreferencesModal] Error saving preferences:",n),alert("Failed to save preferences. Please try again.")}finally{n&&(n.textContent="Save Changes",n.disabled=!1)}};return d(),a}({preferences:e,onSave:async n=>{Ce("Preferences saved!"),te=null,oe=null;const e=_();te=await e.getCurrentUser(),await qe(),i.remove()},onClose:()=>{i.remove()}});document.body.appendChild(i)};let k=!1;a.onclick=e=>{e.stopPropagation(),k=!k,k?(n.classList.add("mobius-mini-minimized"),a.textContent="+",a.setAttribute("aria-label","Restore")):(n.classList.remove("mobius-mini-minimized"),a.textContent="−",a.setAttribute("aria-label","Minimize"))};const y=document.createElement("div");y.className="mobius-mini-row",y.innerHTML='\n    <div class="mobius-mini-row-label">PATIENT</div>\n    <div class="mobius-mini-row-body">\n      <div class="mobius-mini-patient-name"></div>\n      <div class="mobius-mini-patient-id"></div>\n      <div class="mobius-mini-patient-dob"></div>\n    </div>\n    <button class="mobius-mini-icon-btn" type="button" aria-label="Edit patient" title="Edit patient">\n      <svg viewBox="0 0 24 24" aria-hidden="true">\n        <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zm2.92 2.83H5v-.92l9.06-9.06.92.92L5.92 20.08zM20.71 7.04a1.003 1.003 0 0 0 0-1.42l-2.34-2.34a1.003 1.003 0 0 0-1.42 0l-1.83 1.83 3.75 3.75 1.84-1.82z"/>\n      </svg>\n    </button>\n  ',n.appendChild(y);const w=document.createElement("div");w.className="mobius-mini-row mobius-mini-attention-row",w.innerHTML='\n    <div class="mobius-mini-row-label">STATUS</div>\n    <div class="mobius-mini-attention-content">\n      <span class="mobius-mini-dot"></span>\n      <span class="mobius-mini-question-text">No issues detected</span>\n      <button class="mobius-mini-status-badge" type="button" aria-label="Answer">\n        <span class="mobius-mini-badge-text">Set status</span>\n        <span class="mobius-mini-dropdown-icon">▼</span>\n      </button>\n    </div>\n  ',n.appendChild(w);const v=document.createElement("div");v.className="mobius-mini-row mobius-mini-task-badge-row",v.style.display="none",v.innerHTML='\n    <div class="mobius-mini-row-label">PLAN</div>\n    <button class="mobius-mini-task-badge" type="button" aria-label="Open plan in Sidecar">\n      <span class="mobius-mini-task-count">0</span>\n      <span class="mobius-mini-task-label">items remaining</span>\n      <span style="margin-left: 4px;">→</span>\n    </button>\n  ',n.appendChild(v);const z=document.createElement("div");z.className="mobius-mini-row",z.style.display="none";const T=document.createElement("div");T.className="mobius-mini-row",T.style.display="none";const N=document.createElement("div");N.className="mobius-mini-row",N.innerHTML='\n    <div class="mobius-mini-row-label">NOTE</div>\n    <div class="mobius-mini-note-wrap">\n      <input class="mobius-mini-note-input" type="text" placeholder="Quick note…" />\n      <button class="mobius-mini-send-btn" type="button" aria-label="Send note">\n        <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"></path></svg>\n      </button>\n    </div>\n  ',n.appendChild(N);const D=()=>{const e=Be(),i=n.querySelector(".mobius-mini-patient-name"),t=n.querySelector(".mobius-mini-patient-id"),o=n.querySelector(".mobius-mini-patient-dob");i&&(i.textContent=e.name||"Unknown"),t&&(t.textContent=e.id?`ID ${e.id}`:""),o&&(o.textContent=e.dob?`DOB ${e.dob}`:"");const s=A.querySelector(".mobius-mini-minimized-patient");s&&(s.textContent=e.name||"Unknown")};D();const P=(n,e,i=!1)=>{const t=n.querySelector(".mobius-mini-dot"),o=n.querySelector(".mobius-mini-status-text");if(t&&(t.className=`mobius-mini-dot ${he(e.color)}`),o)if(i&&e.mode){const n=(n=>{switch(n){case"agentic":return"🤖";case"copilot":return"👤✓";case"user_driven":return"👤";default:return""}})(e.mode),i=e.mode_text||"";o.textContent=`${n} ${i}`}else o.textContent=e.text},L=()=>{const n=w.querySelector(".mobius-mini-dot"),e=w.querySelector(".mobius-mini-problem-text"),i=w.querySelector(".mobius-mini-badge-text"),t=w.querySelector(".mobius-mini-status-badge");let o=Zn.color;"resolved"===Zn.userStatus?o="green":"confirmed_unresolved"===Zn.userStatus?o="yellow":"unable_to_confirm"===Zn.userStatus&&(o="grey"),n&&(n.className=`mobius-mini-dot ${he(o)}`);const s=A.querySelector(".mobius-mini-dot");s&&(s.className=`mobius-mini-dot ${he(o)}`),e&&(e.textContent=Zn.problemStatement||"No issues detected"),i&&t&&("resolved"===Zn.userStatus?(i.textContent="Resolved",t.className="mobius-mini-status-badge status-resolved"):"confirmed_unresolved"===Zn.userStatus?(i.textContent="Unresolved",t.className="mobius-mini-status-badge status-unresolved"):"unable_to_confirm"===Zn.userStatus?(i.textContent="Unconfirmed",t.className="mobius-mini-status-badge status-unconfirmed"):(i.textContent="Set status",t.className="mobius-mini-status-badge"))},W=()=>{const n=v.querySelector(".mobius-mini-task-count"),e=v.querySelector(".mobius-mini-task-label"),i=Xn>0?Xn:Hn;n&&(n.textContent=String(i)),e&&(e.textContent=1===i?"item remaining":"items remaining"),v.style.display=i>0?"":"none"},$=()=>{ne()};L(),W(),$(),(()=>{const n=A.querySelector(".mobius-mini-dot"),e=A.querySelector(".mobius-mini-minimized-patient"),i=Be();if(e&&(e.textContent=i.name||"Unknown"),n){let e=Zn.color;"resolved"===Zn.userStatus?e="green":"confirmed_unresolved"===Zn.userStatus?e="yellow":"unable_to_confirm"===Zn.userStatus&&(e="grey"),n.className=`mobius-mini-dot ${he(e)}`}})(),P(z,Un),P(T,Rn,!0);const U=[{status:"resolved",label:"Resolved",icon:"✓",description:"Problem fixed, no further action"},{status:"confirmed_unresolved",label:"Confirmed, unresolved",icon:"⚠",description:"Issue verified, tasks remain"},{status:"unable_to_confirm",label:"Unable to confirm",icon:"?",description:"Needs investigation"}],R=w.querySelector(".mobius-mini-status-badge");R?.addEventListener("click",async n=>{n.stopPropagation(),document.querySelectorAll(".mobius-mini-status-dropdown").forEach(n=>n.remove());const e=R.getBoundingClientRect();if("resolved"===Fn?.status)return void Ce("All checks passed - no action needed");if(Fn?.current_step){const n=((n,e)=>{const i=document.createElement("div");i.className="mobius-mini-status-dropdown mobius-mini-answer-dropdown";const t=Math.max(e.width,200),o=Ee(e,t,160,{preferAbove:!0,gap:8});i.style.cssText=`\n      position: fixed;\n      top: ${o.top}px;\n      left: ${o.left}px;\n      min-width: ${t}px;\n      z-index: 2147483647;\n      transform-origin: ${o.transformOrigin};\n    `;const s=n?.answer_options||[],r=n?.system_suggestion;s.forEach(e=>{const t=document.createElement("button");t.type="button",t.className="mobius-mini-dropdown-item",r?.answer===e.code?t.innerHTML=`<span style="color: #16a34a;">✓</span> ${e.label} <span style="font-size: 9px; color: #64748b;">(suggested)</span>`:t.textContent=e.label,t.addEventListener("click",async()=>{i.remove();try{const i=await fetch(`${C}/api/v1/resolution/answer`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({step_id:n?.step_id,answer_code:e.code})});if(i.ok){const n=await i.json();Ce("Answer recorded"),n.plan&&(Fn=n.plan,Xn=n.plan.actions_for_user||0,ne(),ee())}else Ce("Failed to submit")}catch(n){console.error("[Mobius] Error submitting answer:",n),Ce("Connection error")}}),i.appendChild(t)});const a=document.createElement("div");a.style.cssText="border-top: 1px solid rgba(0,0,0,0.1); margin: 6px 0;",i.appendChild(a);const A=document.createElement("button");return A.type="button",A.className="mobius-mini-dropdown-item",A.innerHTML='<span style="color: #64748b;">Open full checklist →</span>',A.addEventListener("click",async()=>{i.remove(),await we()}),i.appendChild(A),i})(Fn.current_step,e);return void document.body.appendChild(n)}if("active"===Fn?.status){const n=Fn.other_role_tasks||0;if(n>0)return void Ce(`${n} task(s) waiting on other team members`)}const i=((n,e,i,t)=>{const o=document.createElement("div");o.className="mobius-mini-status-dropdown mobius-mini-attention-dropdown";const s=Ee(t,220,150,{preferAbove:!0,gap:4});o.style.cssText=`\n      position: fixed;\n      top: ${s.top}px;\n      left: ${s.left}px;\n      background: white;\n      border: 1px solid #e2e8f0;\n      border-radius: 6px;\n      box-shadow: 0 4px 16px rgba(0,0,0,0.18);\n      z-index: 2147483647;\n      min-width: 220px;\n      padding: 4px 0;\n      transform-origin: ${s.transformOrigin};\n    `,U.forEach(e=>{const i=e.status===n,t=document.createElement("button");t.type="button",t.style.cssText=`\n        display: flex;\n        flex-direction: column;\n        align-items: flex-start;\n        gap: 1px;\n        width: 100%;\n        padding: 6px 8px;\n        border: none;\n        background: ${i?"#f1f5f9":"transparent"};\n        cursor: pointer;\n        text-align: left;\n      `,t.innerHTML=`\n        <div style="display:flex;align-items:center;gap:6px;font-size:10px;font-weight:500;">\n          <span>${e.icon}</span>\n          <span>${e.label}</span>\n        </div>\n        <div style="font-size:8px;color:#64748b;padding-left:16px;">${e.description}</div>\n      `,t.addEventListener("click",n=>{n.stopPropagation(),(async n=>{Zn.userStatus=n,L();const e=Be().id;if(e)try{const i=await async function(n,e,i){const t=await fetch(`${S}/mini/ack`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:n,patient_key:e,attention_status:i})});if(!t.ok){const n=await t.json();throw new Error(n.error||"Failed to update attention status")}return t.json()}(qn,e,n);Ce("resolved"===n?"Marked as resolved":"Status updated"),i.open_sidecar&&await we()}catch(n){console.error("[Mobius] Failed to update attention status:",n),Ce("Failed to update status")}})(e.status),o.remove()}),t.addEventListener("mouseenter",()=>{t.style.background="#f1f5f9"}),t.addEventListener("mouseleave",()=>{t.style.background=i?"#f1f5f9":"transparent"}),o.appendChild(t)});const r=document.createElement("div");r.style.cssText="\n      height: 1px;\n      background: #e2e8f0;\n      margin: 4px 8px;\n    ",o.appendChild(r);const a=document.createElement("button");return a.type="button",a.style.cssText="\n      display: flex;\n      flex-direction: column;\n      align-items: flex-start;\n      gap: 1px;\n      width: 100%;\n      padding: 6px 8px;\n      border: none;\n      background: transparent;\n      cursor: pointer;\n      text-align: left;\n    ",a.innerHTML='\n      <div style="display:flex;align-items:center;gap:6px;font-size:10px;font-weight:500;color:#2563eb;">\n        <span>+</span>\n        <span>Report new issue</span>\n      </div>\n      <div style="font-size:8px;color:#64748b;padding-left:16px;">Add a new problem</div>\n    ',a.addEventListener("click",n=>{n.stopPropagation(),o.remove(),(()=>{const n=(n=>{const e=document.createElement("div");e.className="mobius-mini-modal-overlay",e.style.cssText="\n      position: fixed;\n      inset: 0;\n      background: rgba(0,0,0,0.3);\n      z-index: 2147483647;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    ";const i=document.createElement("div");i.className="mobius-mini-issue-modal",i.style.cssText="\n      background: white;\n      border-radius: 8px;\n      box-shadow: 0 8px 32px rgba(0,0,0,0.2);\n      width: 280px;\n      overflow: hidden;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n    ",i.innerHTML='\n      <div style="display:flex;align-items:center;justify-content:space-between;padding:10px 12px;border-bottom:1px solid #e2e8f0;">\n        <span style="font-size:11px;font-weight:600;color:#0b1220;">Report Issue</span>\n        <button type="button" class="modal-close" style="background:none;border:none;cursor:pointer;font-size:16px;color:#64748b;padding:0;line-height:1;">&times;</button>\n      </div>\n      <div style="padding:12px;">\n        <input type="text" class="issue-input" placeholder="Describe the issue..." style="\n          width:100%;\n          box-sizing:border-box;\n          padding:8px 10px;\n          border:1px solid #e2e8f0;\n          border-radius:6px;\n          font-size:10px;\n          outline:none;\n        " />\n      </div>\n      <div style="display:flex;gap:8px;justify-content:flex-end;padding:0 12px 12px;">\n        <button type="button" class="modal-cancel" style="\n          padding:6px 12px;\n          border:1px solid #e2e8f0;\n          border-radius:6px;\n          background:white;\n          font-size:10px;\n          cursor:pointer;\n        ">Cancel</button>\n        <button type="button" class="modal-submit" style="\n          padding:6px 12px;\n          border:none;\n          border-radius:6px;\n          background:#2563eb;\n          color:white;\n          font-size:10px;\n          font-weight:500;\n          cursor:pointer;\n        ">Submit</button>\n      </div>\n    ',e.appendChild(i);const t=i.querySelector(".issue-input"),o=i.querySelector(".modal-close"),s=i.querySelector(".modal-cancel"),r=i.querySelector(".modal-submit"),a=()=>e.remove();return o.addEventListener("click",a),s.addEventListener("click",a),e.addEventListener("click",n=>{n.target===e&&a()}),r.addEventListener("click",()=>{const e=t.value.trim();e&&(n(e),a())}),t.addEventListener("keydown",e=>{if("Enter"===e.key){const e=t.value.trim();e&&(n(e),a())}"Escape"===e.key&&a()}),setTimeout(()=>t.focus(),50),e})(async n=>{const e=Be().id;if(e)try{await async function(n,e,i){const t=await fetch(`${S}/mini/issue`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:n,patient_key:e,issue_text:i})});if(!t.ok){const n=await t.json();throw new Error(n.error||"Failed to report issue")}return t.json()}(qn,e,n),Ce("Issue reported")}catch(n){console.error("[Mobius] Failed to report issue:",n),Ce("Failed to report issue")}});document.body.appendChild(n)})()}),a.addEventListener("mouseenter",()=>{a.style.background="#eff6ff"}),a.addEventListener("mouseleave",()=>{a.style.background="transparent"}),o.appendChild(a),o})(Zn.userStatus,0,0,e);document.body.appendChild(i)});const I=v.querySelector(".mobius-mini-task-badge");I?.addEventListener("click",async()=>{await we()}),document.addEventListener("click",()=>{document.querySelectorAll(".mobius-mini-status-dropdown").forEach(n=>n.remove())}),y.querySelector(".mobius-mini-icon-btn")?.addEventListener("click",()=>{!function(n){const e=document.getElementById(Nn);e&&e.remove();const i=document.createElement("div");i.id=Nn,i.className="mobius-mini-modal-overlay",i.innerHTML='\n    <div class="mobius-mini-modal" role="dialog" aria-modal="true" aria-label="Edit patient">\n      <div class="mobius-mini-modal-header">\n        <div class="mobius-mini-modal-title">Patient</div>\n        <button class="mobius-mini-modal-close" type="button" aria-label="Close">×</button>\n      </div>\n      <div class="mobius-mini-modal-body">\n        <div class="mobius-mini-field">\n          <div class="mobius-mini-field-label">Name</div>\n          <div class="mobius-mini-search-input">\n            <span class="mobius-mini-search-icon" aria-hidden="true">\n              <svg viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79L20 21.5 21.5 20 15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>\n            </span>\n            <input class="mobius-mini-input mobius-mini-input-with-icon" id="mobius-mini-patient-name" autocomplete="off" />\n          </div>\n          <div class="mobius-mini-suggestions" data-for="name" aria-label="Name suggestions"></div>\n        </div>\n\n        <div class="mobius-mini-field">\n          <div class="mobius-mini-field-label">Patient ID</div>\n          <div class="mobius-mini-search-input">\n            <span class="mobius-mini-search-icon" aria-hidden="true">\n              <svg viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79L20 21.5 21.5 20 15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>\n            </span>\n            <input class="mobius-mini-input mobius-mini-input-with-icon" id="mobius-mini-patient-id" autocomplete="off" />\n          </div>\n          <div class="mobius-mini-suggestions" data-for="id" aria-label="ID suggestions"></div>\n        </div>\n\n        <div class="mobius-mini-field">\n          <div class="mobius-mini-field-label">Date of birth</div>\n          <input class="mobius-mini-input" id="mobius-mini-patient-dob" placeholder="YYYY-MM-DD" inputmode="numeric" autocomplete="bday" />\n        </div>\n\n        <div class="mobius-mini-field-hint">Start typing to search; select a suggestion to fill both fields.</div>\n      </div>\n      <div class="mobius-mini-modal-actions">\n        <button class="mobius-mini-btn-secondary" type="button" data-action="cancel">Cancel</button>\n        <button class="mobius-mini-btn-primary" type="button" data-action="save">Save</button>\n      </div>\n    </div>\n  ',document.body.appendChild(i);const t=()=>i.remove(),o=i.querySelector(".mobius-mini-modal-close");o?.addEventListener("click",t),i.addEventListener("click",n=>{n.target===i&&t()});const{name:s,id:r,dob:a}=Be(),A=i.querySelector("#mobius-mini-patient-name"),d=i.querySelector("#mobius-mini-patient-id"),c=i.querySelector("#mobius-mini-patient-dob");A&&(A.value=s),d&&(d.value=r),c&&(c.value=a||"");const l=i.querySelector('.mobius-mini-suggestions[data-for="name"]'),b=i.querySelector('.mobius-mini-suggestions[data-for="id"]');let m,p="name",u=[],g=-1;const C=()=>{u=[],g=-1,l&&(l.innerHTML=""),b&&(b.innerHTML=""),l&&(l.style.display="none"),b&&(b.style.display="none")},E=n=>{const e="name"===n?l:b;if(e){if(0===u.length)return e.innerHTML="",void(e.style.display="none");e.style.display="block",e.innerHTML=u.map((n,e)=>`<button type="button" class="${e===g?"mobius-mini-suggestion active":"mobius-mini-suggestion"}" data-idx="${e}"><span class="name">${n.name.replace(/</g,"&lt;").replace(/>/g,"&gt;")}</span><span class="id">ID ${n.id.replace(/</g,"&lt;").replace(/>/g,"&gt;")}</span></button>`).join(""),e.querySelectorAll(".mobius-mini-suggestion").forEach(n=>{n.addEventListener("click",()=>{const e=Number(n.getAttribute("data-idx")||"-1"),i=u[e];i&&(A&&(A.value=i.name),d&&(d.value=i.id),C())})})}},h=(n,e)=>{const i=e.trim();i.length<2?C():(m&&window.clearTimeout(m),m=window.setTimeout(async()=>{try{const e=await async function(n,e=8){const i=(n||"").trim(),t=new URL(`${S}/mini/patient/search`);t.searchParams.set("q",i),t.searchParams.set("limit",String(e));const o=await fetch(t.toString(),{method:"GET"});if(!o.ok){const n=await o.json();throw new Error(n.error||"Failed to search patients")}return o.json()}(i,8);((n,e)=>{u=e,g=-1,"name"===n?b&&(b.style.display="none"):l&&(l.style.display="none"),E(n)})(n,Array.isArray(e.results)?e.results:[])}catch{C()}},180))},f=n=>{if(u.length>0)if("ArrowDown"===n.key)n.preventDefault(),g=Math.min(u.length-1,g+1),E(p);else if("ArrowUp"===n.key)n.preventDefault(),g=Math.max(0,g-1),E(p);else if("Enter"===n.key){if(g>=0&&g<u.length){n.preventDefault();const e=u[g];A&&(A.value=e.name),d&&(d.value=e.id),C()}}else"Escape"===n.key&&C()};A?.addEventListener("focus",()=>{p="name"}),d?.addEventListener("focus",()=>{p="id"}),A?.addEventListener("input",()=>h("name",A.value)),d?.addEventListener("input",()=>h("id",d.value)),A?.addEventListener("keydown",f),d?.addEventListener("keydown",f),i.querySelector(".mobius-mini-modal")?.addEventListener("click",n=>{n.stopPropagation()}),i.addEventListener("click",()=>C()),i.querySelector('[data-action="cancel"]')?.addEventListener("click",t),i.querySelector('[data-action="save"]')?.addEventListener("click",()=>{const e=(c?.value||"").trim(),i={name:(A?.value||"").trim()||"Unknown",id:(d?.value||"").trim(),dob:e};n(i),t()}),A?.focus()}(n=>{(async n=>{if(In=n,await be({[Pn]:n}),D(),n.id)try{const e=await M(qn,n.id);Un=e.proceed,e.tasking&&(Rn=e.tasking),P(z,Un),P(T,Rn,!0),Zn=e.needs_attention?{color:e.needs_attention.color,problemStatement:e.needs_attention.problem_statement,userStatus:e.needs_attention.user_status}:{color:e.proceed.color,problemStatement:e.proceed.text,userStatus:null},L(),Hn=e.task_count||0,Fn=e.resolution_plan||null,Xn=e.actions_for_user||0,W(),$(),Ae()}catch(n){console.error("[Mobius] Failed to fetch status for patient:",n)}})(n)})});const Q=n.querySelector(".mobius-mini-note-input"),O=n.querySelector(".mobius-mini-send-btn"),Z=async()=>{const n=(Q?.value||"").trim();if(n)try{const e=Fn?{resolution_plan_id:Fn.plan_id,plan_step_id:Fn.current_step?.step_id}:void 0;await async function(n,e,i,t){const o=await q(`${S}/mini/ack`,{method:"POST",body:JSON.stringify({session_id:n,note:e,patient_key:i?.id||"",resolution_plan_id:t?.resolution_plan_id,plan_step_id:t?.plan_step_id})});if(!o.ok){const n=await o.json();throw new Error(n.error||"Failed to submit note")}return o.json()}(qn,n,Be(),e),Q&&(Q.value=""),Ce("Note sent")}catch(n){Ce(n instanceof Error?n.message:"Failed to send")}};O?.addEventListener("click",()=>{Z()}),Q?.addEventListener("keydown",n=>{"Enter"===n.key&&(n.preventDefault(),Z())}),d.addEventListener("click",()=>{(async()=>{l.style.display="none",await we()})()}),l.querySelector('[data-action="disable-site"]')?.addEventListener("click",()=>{l.style.display="none";const n=ce();(async()=>{await pe(n,!1),ue(),ge(),Ce("Disabled on this site")})()});let H=!1,F={x:0,y:0,left:0,top:0};const X=e=>{H=!0,e.currentTarget.setPointerCapture(e.pointerId);const i=n.getBoundingClientRect();F={x:e.clientX,y:e.clientY,left:i.left,top:i.top},e.preventDefault()},G=e=>{if(!H)return;const i=e.clientX-F.x,t=e.clientY-F.y;n.style.left=`${F.left+i}px`,n.style.top=`${F.top+t}px`},V=()=>{if(!H)return;H=!1;const e=n.getBoundingClientRect();xe(n,{x:e.left,y:e.top})};return e.addEventListener("pointerdown",n=>{(n=>{const e=n;return!!e&&!(e.closest("button")||e.closest("input")||e.closest("select")||e.closest("textarea"))})(n.target)&&X(n)}),e.addEventListener("pointermove",G),e.addEventListener("pointerup",V),i.addEventListener("pointerdown",X),i.addEventListener("pointermove",G),i.addEventListener("pointerup",V),window.addEventListener("resize",()=>{const e=n.getBoundingClientRect();xe(n,{x:e.left,y:e.top})}),n}async function we(){console.log("[Mobius OS] Expanding to sidebar...");const n=document.getElementById(Tn);if(n){const e=n.getBoundingClientRect();$n={x:e.left,y:e.top},await be({[jn]:$n}),n.style.display="none"}const e={patient:In||(On?.found?{name:On.display_name||"Patient",id:On.patient_key||""}:null),resolutionPlan:Fn,userProfile:te,needsAttention:Zn};await ve(e)}async function ve(n){if(console.log("[Mobius OS] Initializing Sidecar UI..."),document.getElementById("mobius-os-sidebar"))return void console.log("[Mobius OS] Sidebar already exists, skipping initialization");qn=await f(),Vn=await I.isEnabled();const e=n.patient,i=e?function(n,e){const i=e.split(/\s+/)[0]||e,t=i.endsWith("s")?`${i}'`:`${i}'s`;return{type:"patient",id:n,displayName:e,shortName:i,possessive:t}}(e.id,e.name):{type:"patient",id:"",displayName:"Unknown Patient",shortName:"Patient",possessive:"Patient's"},t=function(n,e,i=!1){return{isPrivate:i,record:n,staff:e?{displayName:e,shortName:e.split(/\s+/)[0]||e}:void 0}}(i,n.userProfile?.greeting_name||n.userProfile?.display_name,Vn);try{const t=e?.id||"",o=new URLSearchParams({session_id:qn,...t&&{patient_key:t}}),s=await fetch(`${C}/api/v1/sidecar/state?${o}`,{method:"GET",headers:{"Content-Type":"application/json",...await _e()}});s.ok?Gn=await s.json():(console.warn("[Mobius] Failed to fetch sidecar state, using fallback"),Gn=ze(n,i))}catch(e){console.error("[Mobius] Error fetching sidecar state:",e),Gn=ze(n,i)}Mn=document.createElement("div"),Mn.id="mobius-os-sidebar",Mn.setAttribute("style","\n    position: fixed !important;\n    top: 0 !important;\n    right: 0 !important;\n    width: 400px !important;\n    height: 100vh !important;\n    min-height: 100vh !important;\n    max-height: 100vh !important;\n    background: white !important;\n    z-index: 2147483646 !important;\n    box-shadow: -2px 0 8px rgba(0,0,0,0.1) !important;\n    overflow: hidden !important;\n    display: flex !important;\n    flex-direction: column !important;\n    margin: 0 !important;\n    padding: 0 !important;\n  ");const o=document.createElement("style");o.id="mobius-os-page-adjust",o.textContent="\n    body {\n      margin-right: 400px !important;\n      transition: margin-right 0.3s ease !important;\n    }\n    html {\n      overflow-x: hidden !important;\n    }\n  ",document.head.appendChild(o);const s=document.createElement("div");s.className="top-row",s.setAttribute("style","display: flex; align-items: center; justify-content: space-between; padding: 6px 12px; border-bottom: 1px solid rgba(11, 18, 32, 0.08); background: rgba(11, 18, 32, 0.02);");const r=document.createElement("div");r.className="header-left",r.setAttribute("style","display: flex; align-items: center; gap: 8px;"),r.appendChild(Y({clientName:"CMHC"}));const a=document.createElement("div");a.className="logo-section",a.setAttribute("style","display: flex; align-items: center; gap: 4px;"),a.appendChild(j({status:"idle"}));const A=document.createElement("span");A.className="logo-label",A.setAttribute("style","font-size: 11px; font-weight: 600; color: #0b1220;"),A.textContent="Mobius OS",a.appendChild(A),r.appendChild(a),s.appendChild(r);const d=document.createElement("div");d.setAttribute("style","display: flex; align-items: center; gap: 4px;");const c=function(n){const{alerts:e,onClick:i}=n,t=document.createElement("button");t.className="sidecar-alert-indicator",t.title="View alerts",t.addEventListener("click",i);const o=document.createElement("span");o.className="sidecar-alert-icon",o.innerHTML='\n    <svg viewBox="0 0 24 24" aria-hidden="true">\n      <path d="M12 3c-3.314 0-6 2.686-6 6v3.5l-1.5 2h15L18 12.5V9c0-3.314-2.686-6-6-6z" />\n      <path d="M9.5 17a2.5 2.5 0 0 0 5 0" />\n    </svg>\n  ',t.appendChild(o);const s=e.filter(n=>!n.read).length;if(s>0){const n=document.createElement("span");n.className="sidecar-alert-badge",n.textContent=s>9?"9+":String(s),t.appendChild(n),e.some(n=>!n.read&&"high"===n.priority)&&n.classList.add("sidecar-alert-badge--high")}return t}({alerts:Gn?.alerts||[],onClick:()=>{Ce("Inbox coming soon")}});if(d.appendChild(c),Vn){const n=document.createElement("span");n.className="sidecar-privacy-indicator",n.textContent="🔒",n.title="Privacy mode enabled",d.appendChild(n)}const l=pn({onCollapse:()=>{Se()},onHistoryClick:()=>Ce("History coming soon"),onSettingsClick:()=>Ce("Settings coming soon"),onHelpClick:()=>Ce("Help coming soon"),onPrivacyChange:async e=>{Vn=e,ge(),await ve(n)},onNotificationsChange:n=>{console.log("[Mobius] Notifications:",n)}});d.appendChild(l);const b=function(){const n=document.createElement("button");return n.className="sidecar-collapse-btn",n.innerHTML='<svg viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>',n.title="Collapse to mini",n.addEventListener("click",()=>{Se()}),n}();if(d.appendChild(b),s.appendChild(d),Mn.appendChild(s),Gn?.care_readiness){const n=function({careReadiness:n}){const e=document.createElement("div");e.className="sidecar-status-bar";const i=n.position,t=document.createElement("div");t.className="sidecar-status-bar-title-row";const o=document.createElement("div");o.className="sidecar-status-bar-title",o.textContent="Care Readiness",t.appendChild(o);const s=document.createElement("div");var r;s.className="sidecar-status-bar-context",s.textContent=(r=i,n.direction,r>=90?"Ready for affordable care":r>=70?"Enabling affordable care":r>=50?"Securing care access":r>=30?"Preparing care pathway":"Starting care journey"),t.appendChild(s),e.appendChild(t);const a=document.createElement("div");a.className="sidecar-status-bar-progress-row";const A=document.createElement("div");A.className="sidecar-status-bar-track-wrapper";const d=document.createElement("div");d.className="sidecar-status-bar-track";const c=document.createElement("div");c.className="sidecar-status-bar-progress",c.style.width=`${i}%`,d.appendChild(c);const l=document.createElement("div");l.className="sidecar-status-bar-marker",l.style.left=`${i}%`,d.appendChild(l),A.appendChild(d),a.appendChild(A);const b=document.createElement("div");return b.className="sidecar-status-bar-percent",b.textContent=`${Math.round(i)}%`,a.appendChild(b),e.appendChild(a),e.title=function(n){const e=[];e.push(`Care Readiness: ${Math.round(n.position)}%`);const i=n.factors,t=Object.values(i).filter(n=>"complete"===n.status).length,o=Object.values(i).length;return o>0&&e.push(`${t}/${o} milestones complete`),"improving"===n.direction?e.push("↑ Improving"):"declining"===n.direction&&e.push("↓ Needs attention"),e.join("\n")}(n),e}({careReadiness:Gn.care_readiness});Mn.appendChild(n)}const m=document.createElement("div");m.className="sidecar-main-content",m.setAttribute("style","flex: 1; overflow-y: auto; display: flex; flex-direction: column;");const p=document.createElement("div");p.className="sidecar-cards-container",p.setAttribute("style","padding: 8px 10px; flex-shrink: 0;");const u=document.createElement("div");u.className="sidecar-greeting";const g=te?.display_name?.split(" ")[0]||"there",E=(new Date).getHours(),h=E<12?"Good morning":E<17?"Good afternoon":"Good evening";if(u.innerHTML=`\n    <span class="sidecar-greeting-text">${h}, ${g}.</span>\n    <span class="sidecar-greeting-subtext">I'm here to help.</span>\n  `,p.appendChild(u),e){const n=document.createElement("div");n.className="sidecar-patient-row",n.setAttribute("style","\n      display: flex;\n      align-items: center;\n      gap: 6px;\n      padding: 4px 0;\n      border-bottom: 1px solid rgba(11, 18, 32, 0.08);\n      margin-bottom: 6px;\n    ");const i=document.createElement("div");i.setAttribute("style","\n      width: 40px;\n      flex: 0 0 auto;\n      font-size: 7px;\n      letter-spacing: 0.04em;\n      text-transform: uppercase;\n      color: rgba(91, 102, 122, 0.95);\n      font-weight: 600;\n    "),i.textContent="PATIENT",n.appendChild(i);const t=document.createElement("div");t.setAttribute("style","flex: 1; min-width: 0; display: flex; flex-direction: row; align-items: baseline; gap: 6px;");const o=document.createElement("span");o.setAttribute("style","font-size: 10px; font-weight: 500; color: #0b1220; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"),o.textContent=Vn?"Patient":e.name;const s=document.createElement("span");s.setAttribute("style","font-size: 9px; font-weight: 400; color: rgba(91, 102, 122, 0.7); white-space: nowrap;"),s.textContent=Vn?"****":`· ${e.id.slice(-4).padStart(8,"*")}`,t.appendChild(o),t.appendChild(s),n.appendChild(t);const r=document.createElement("button");r.className="sidecar-icon-btn",r.innerHTML='<svg viewBox="0 0 24 24"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/></svg>',r.title="Change patient",r.addEventListener("click",()=>{Ce("Patient search coming soon")}),n.appendChild(r),p.appendChild(n)}const x=function(n){const{bottlenecks:e,privacyContext:i,onAnswer:t,onAssign:o,onOwn:s,onAddNote:r,onBulkAssign:a}=n,A=document.createElement("div");if(A.className="sidecar-bottleneck-card",0===e.length)return A.innerHTML='\n      <div class="sidecar-bottleneck-clear">\n        <span class="sidecar-bottleneck-clear-icon">✓</span>\n        <span class="sidecar-bottleneck-clear-text">All clear! No issues detected.</span>\n      </div>\n    ',A;const d=document.createElement("div");d.className="sidecar-bottleneck-header",e.length>1?d.innerHTML=`\n      <span class="sidecar-bottleneck-count">${e.length} tasks</span>\n      <span class="sidecar-bottleneck-hint">Assign each to Mobius or resolve yourself</span>\n    `:d.innerHTML='\n      <span class="sidecar-bottleneck-count">1 task</span>\n      <span class="sidecar-bottleneck-hint">Assign to Mobius or resolve yourself</span>\n    ',A.appendChild(d);for(const n of e){const e=H(n,i,t,o,s,r);A.appendChild(e)}return A}({bottlenecks:Gn?.bottlenecks||[],privacyContext:t,onAnswer:async(n,i)=>{console.log("[Mobius] Answer:",n,i);try{await fetch(`${C}/api/v1/sidecar/answer`,{method:"POST",headers:{"Content-Type":"application/json",...await _e()},body:JSON.stringify({session_id:qn,patient_key:e?.id,bottleneck_id:n,answer_id:i})}),Ce("Answer recorded")}catch(n){console.error("[Mobius] Failed to submit answer:",n),Ce("Failed to submit answer")}},onAssign:async(n,i)=>{console.log("[Mobius] Assign to Mobius:",n,i);try{await fetch(`${C}/api/v1/sidecar/assign`,{method:"POST",headers:{"Content-Type":"application/json",...await _e()},body:JSON.stringify({session_id:qn,patient_key:e?.id,bottleneck_id:n,mode:i})}),Ce("Mobius is working on it...")}catch(n){console.error("[Mobius] Failed to assign:",n),Ce("Failed to assign")}},onOwn:async n=>{console.log("[Mobius] User taking ownership:",n);try{await fetch(`${C}/api/v1/sidecar/own`,{method:"POST",headers:{"Content-Type":"application/json",...await _e()},body:JSON.stringify({session_id:qn,patient_key:e?.id,bottleneck_id:n})}),Ce("Got it - you're on it")}catch(n){console.error("[Mobius] Failed to take ownership:",n)}},onAddNote:async(n,i)=>{try{await fetch(`${C}/api/v1/sidecar/note`,{method:"POST",headers:{"Content-Type":"application/json",...await _e()},body:JSON.stringify({session_id:qn,patient_key:e?.id,bottleneck_id:n,note_text:i})}),Ce("Note added")}catch(n){console.error("[Mobius] Failed to add note:",n)}},onBulkAssign:async n=>{console.log("[Mobius] Bulk assign:",n);try{await fetch(`${C}/api/v1/sidecar/assign-bulk`,{method:"POST",headers:{"Content-Type":"application/json",...await _e()},body:JSON.stringify({session_id:qn,patient_key:e?.id,bottleneck_ids:n})}),Ce(`Assigned ${n.length} items to Mobius`)}catch(n){console.error("[Mobius] Failed to bulk assign:",n)}}});if(p.appendChild(x),Gn?.milestones&&Gn?.knowledge_context){const e=function(n){const{milestones:e,knowledgeContext:i,privacyContext:t,resolutionPlan:o,defaultExpanded:s=!1}=n,r=document.createElement("div");r.className="sidecar-context-expander";const a=document.createElement("button");a.className="sidecar-context-expander-toggle",a.innerHTML=`\n    <span class="sidecar-context-expander-arrow">${s?"▾":"▸"}</span>\n    <span class="sidecar-context-expander-label">More info</span>\n  `;const A=document.createElement("div");if(A.className="sidecar-context-expander-content",A.style.display=s?"block":"none",a.addEventListener("click",()=>{const n="none"!==A.style.display;A.style.display=n?"none":"block";const e=a.querySelector(".sidecar-context-expander-arrow");e&&(e.textContent=n?"▸":"▾")}),o&&"resolved"!==o.status){const n=function(n,e){const i=document.createElement("div");i.className="sidecar-plan-section";const t=document.createElement("div");t.className="sidecar-section-title",t.textContent="Resolution Plan",i.appendChild(t);const o=document.createElement("div");o.className="sidecar-plan-summary";const s=Object.entries(n.factors||{});if(s.length>0){const n=document.createElement("div");n.className="sidecar-plan-factors";for(const[e,i]of s){const t=document.createElement("div");t.className="sidecar-plan-factor";const o=e.replace(/_/g," ").replace(/\b\w/g,n=>n.toUpperCase()),s=i.total>0?Math.round(i.done/i.total*100):0;t.innerHTML=`\n        <span class="sidecar-plan-factor-label">${o}</span>\n        <span class="sidecar-plan-factor-progress">${i.done}/${i.total}</span>\n        <div class="sidecar-plan-factor-bar">\n          <div class="sidecar-plan-factor-fill" style="width: ${s}%"></div>\n        </div>\n      `,n.appendChild(t)}o.appendChild(n)}if(i.appendChild(o),n.current_step){const t=document.createElement("div");t.className="sidecar-plan-current",t.innerHTML=`\n      <span class="sidecar-plan-current-label">Current:</span>\n      <span class="sidecar-plan-current-text">${R(n.current_step.question_text,e)}</span>\n    `,i.appendChild(t)}if(n.actions_for_user>0){const e=document.createElement("div");e.className="sidecar-plan-actions",e.textContent=`${n.actions_for_user} action${n.actions_for_user>1?"s":""} for you`,i.appendChild(e)}return i}(o,t);A.appendChild(n)}const d=function(n,e){const i=document.createElement("div");i.className="sidecar-milestones-section";const t=document.createElement("div");t.className="sidecar-section-title",t.textContent="Progress",i.appendChild(t);const o=document.createElement("div");o.className="sidecar-milestones-list";for(const i of n){const n=X(i,e);o.appendChild(n)}return i.appendChild(o),i}(e,t);if(A.appendChild(d),i.payer.name){const n=function(n){const e=document.createElement("div");e.className="sidecar-payer-section";const i=document.createElement("div");i.className="sidecar-section-title",i.textContent="Payer Info",e.appendChild(i);const t=document.createElement("div");t.className="sidecar-payer-info";const o=document.createElement("div");if(o.className="sidecar-payer-name",o.textContent=n.payer.name,t.appendChild(o),n.payer.phone){const e=document.createElement("div");e.className="sidecar-payer-phone",e.innerHTML=`📞 <a href="tel:${n.payer.phone}">${n.payer.phone}</a>`,t.appendChild(e)}if(n.payer.portal_url){const e=document.createElement("div");e.className="sidecar-payer-portal",e.innerHTML=`🌐 <a href="${n.payer.portal_url}" target="_blank">Payer Portal</a>`,t.appendChild(e)}if(n.payer.avg_response_time){const e=document.createElement("div");e.className="sidecar-payer-response-time",e.textContent=`⏱️ Typical response: ${n.payer.avg_response_time}`,t.appendChild(e)}if(e.appendChild(t),n.policy_excerpts.length>0){const i=document.createElement("div");i.className="sidecar-policy-excerpts";const t=document.createElement("div");t.className="sidecar-excerpts-title",t.textContent="Relevant Policies",i.appendChild(t);for(const e of n.policy_excerpts.slice(0,3)){const n=document.createElement("div");n.className="sidecar-policy-excerpt",n.innerHTML=`\n        <div class="sidecar-excerpt-topic">${e.topic}</div>\n        <div class="sidecar-excerpt-content">${e.content}</div>\n        <div class="sidecar-excerpt-source">${e.source}</div>\n      `,i.appendChild(n)}e.appendChild(i)}return e}(i);A.appendChild(n)}return r.appendChild(a),r.appendChild(A),r}({milestones:Gn.milestones,knowledgeContext:Gn.knowledge_context,privacyContext:t,resolutionPlan:n.resolutionPlan});p.appendChild(e)}m.appendChild(p);const B=document.createElement("div");B.className="sidecar-chat-container",B.setAttribute("style","flex: 1; min-height: 0; display: flex; flex-direction: column; border-top: 1px solid rgba(11, 18, 32, 0.08);"),m.appendChild(B),Mn.appendChild(m);const k=function(n){const{record:e,onSend:i,placeholder:t}=n,o=document.createElement("div");o.className="sidecar-quick-chat";const s=document.createElement("div");s.className="sidecar-quick-chat-wrapper";const r=document.createElement("input");r.type="text",r.className="sidecar-quick-chat-input",r.placeholder=t||`Ask about ${e.shortName}...`;const a=document.createElement("button");a.className="sidecar-quick-chat-send",a.innerHTML='\n    <svg viewBox="0 0 24 24" aria-hidden="true">\n      <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"></path>\n    </svg>\n  ',a.disabled=!0,a.title="Send",r.addEventListener("input",()=>{a.disabled=0===r.value.trim().length}),a.addEventListener("click",()=>{const n=r.value.trim();n&&(i(n),r.value="",a.disabled=!0)}),r.addEventListener("keydown",n=>{if("Enter"===n.key&&!n.shiftKey){n.preventDefault();const e=r.value.trim();e&&(i(e),r.value="",a.disabled=!0)}}),s.appendChild(r),s.appendChild(a),o.appendChild(s);const A=document.createElement("div");return A.className="sidecar-quick-chat-hint",A.textContent="Ask questions about coverage, auth requirements, history...",o.appendChild(A),o}({record:i,knowledgeContext:Gn?.knowledge_context||{payer:{name:""},policy_excerpts:[],relevant_history:[]},onSend:async n=>{console.log("[Mobius] Chat:",n),Ce("Chat coming soon")}});Mn.appendChild(k),document.body.appendChild(Mn),console.log("[Mobius OS] Sidecar UI initialized")}function ze(n,e){const i=[];if(n.resolutionPlan?.current_step){const e=n.resolutionPlan.current_step;i.push({id:e.step_id,milestone_id:e.factor_type||"unknown",question_text:e.question_text,answer_options:(e.answer_options||[]).map(n=>({id:n.code,label:n.label,description:n.description})),mobius_can_handle:!0,mobius_mode:e.system_suggestion?"agentic":"copilot",mobius_action:e.system_suggestion?.source||"Mobius will verify this for you",sources:{}})}return{ok:!0,session_id:qn,surface:"sidecar",record:e,care_readiness:{position:50,direction:"stable",factors:{visit_confirmed:{status:"pending"},eligibility_verified:{status:"pending"},authorization_secured:{status:"pending"},documentation_ready:{status:"pending"}}},bottlenecks:i,milestones:[],knowledge_context:{payer:{name:""},policy_excerpts:[],relevant_history:[]},alerts:[],user_owned_tasks:[],computed_at:(new Date).toISOString()}}async function _e(){const n=_(),e=await n.getAccessToken();return e?{Authorization:`Bearer ${e}`}:{}}async function Se(){ge(),await qe()}async function qe(){await async function(){const n=await le([jn,Pn]),e=n[jn];e&&"number"==typeof e.x&&"number"==typeof e.y&&($n={x:e.x,y:e.y});const i=n[Pn];i&&"string"==typeof i.name&&"string"==typeof i.id&&(In={name:i.name,id:i.id,dob:"string"==typeof i.dob?i.dob:void 0})}();const n=ce(),e=await async function(n){const e=(n||"").toLowerCase();return!!e&&(await me()).map(n=>n.toLowerCase()).includes(e)}(n);if(!e)return void ue();qn||(qn=await f());const i=_();ie=await i.isAuthenticated(),ie&&(te=await i.getUserProfile());let t=document.getElementById(Tn);if(t)t.style.display="";else{t=ye(),document.body.appendChild(t);const n=$n||{x:14,y:14};await xe(t,n);const e=await async function(){try{return(await chrome.storage.local.get(Ln))[Ln]||"light"}catch{return"light"}}();Wn(t,e)}const o=t.querySelector(".mobius-mini-greeting-row"),s=t.querySelector(".mobius-mini-row"),r=t.querySelector(".mobius-mini-attention-row"),a=t.querySelector(".mobius-mini-task-badge-row"),A=t.querySelectorAll(".mobius-mini-row")[3];let d=t.querySelector(".mobius-mini-locked-overlay");const c=C;if(!ie){if(!d){d=document.createElement("div"),d.className="mobius-mini-locked-overlay",d.style.cssText="\n        padding: 12px;\n        background: linear-gradient(180deg, rgba(248, 250, 252, 0.98), rgba(241, 245, 249, 0.98));\n      ",d.innerHTML='\n        <div style="text-align: center; margin-bottom: 10px;">\n          <div style="font-size: 20px; margin-bottom: 4px;">🔒</div>\n          <div style="font-size: 10px; font-weight: 600; color: #0b1220;">Sign in to Mobius</div>\n        </div>\n        <div class="mobius-mini-login-form">\n          <input type="email" class="mobius-mini-login-email" placeholder="Email" style="\n            width: 100%;\n            box-sizing: border-box;\n            padding: 8px 10px;\n            border: 1px solid rgba(11, 18, 32, 0.15);\n            border-radius: 6px;\n            font-size: 10px;\n            margin-bottom: 6px;\n            outline: none;\n          " value="sarah.chen@demo.clinic" />\n          <input type="password" class="mobius-mini-login-password" placeholder="Password" style="\n            width: 100%;\n            box-sizing: border-box;\n            padding: 8px 10px;\n            border: 1px solid rgba(11, 18, 32, 0.15);\n            border-radius: 6px;\n            font-size: 10px;\n            margin-bottom: 8px;\n            outline: none;\n          " value="demo1234" />\n          <button class="mobius-mini-signin-btn" style="\n            width: 100%;\n            padding: 8px 12px;\n            background: #2563eb;\n            color: white;\n            border: none;\n            border-radius: 6px;\n            font-size: 10px;\n            font-weight: 500;\n            cursor: pointer;\n          ">Sign in</button>\n          <div class="mobius-mini-login-error" style="\n            font-size: 9px;\n            color: #dc2626;\n            margin-top: 6px;\n            display: none;\n          "></div>\n          \n          \x3c!-- Divider --\x3e\n          <div style="display: flex; align-items: center; margin: 12px 0 10px;">\n            <div style="flex: 1; height: 1px; background: rgba(11, 18, 32, 0.1);"></div>\n            <span style="padding: 0 8px; font-size: 8px; color: #94a3b8;">or continue with</span>\n            <div style="flex: 1; height: 1px; background: rgba(11, 18, 32, 0.1);"></div>\n          </div>\n          \n          \x3c!-- OAuth options --\x3e\n          <div style="display: flex; gap: 8px; margin-bottom: 10px;">\n            <button class="mobius-mini-oauth-btn" data-provider="google" style="\n              flex: 1;\n              display: flex;\n              align-items: center;\n              justify-content: center;\n              gap: 6px;\n              padding: 8px;\n              background: white;\n              border: 1px solid rgba(11, 18, 32, 0.15);\n              border-radius: 6px;\n              font-size: 9px;\n              color: #374151;\n              cursor: pointer;\n            ">\n              <svg width="12" height="12" viewBox="0 0 24 24">\n                <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>\n                <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>\n                <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>\n                <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>\n              </svg>\n              Google\n            </button>\n            <button class="mobius-mini-oauth-btn" data-provider="microsoft" style="\n              flex: 1;\n              display: flex;\n              align-items: center;\n              justify-content: center;\n              gap: 6px;\n              padding: 8px;\n              background: white;\n              border: 1px solid rgba(11, 18, 32, 0.15);\n              border-radius: 6px;\n              font-size: 9px;\n              color: #374151;\n              cursor: pointer;\n            ">\n              <svg width="12" height="12" viewBox="0 0 23 23">\n                <path fill="#f35325" d="M1 1h10v10H1z"/>\n                <path fill="#81bc06" d="M12 1h10v10H12z"/>\n                <path fill="#05a6f0" d="M1 12h10v10H1z"/>\n                <path fill="#ffba08" d="M12 12h10v10H12z"/>\n              </svg>\n              Microsoft\n            </button>\n          </div>\n          \n          \x3c!-- Enterprise SSO --\x3e\n          <button class="mobius-mini-sso-btn" style="\n            width: 100%;\n            padding: 8px 12px;\n            background: #f8fafc;\n            border: 1px solid rgba(11, 18, 32, 0.15);\n            border-radius: 6px;\n            font-size: 9px;\n            color: #374151;\n            cursor: pointer;\n            margin-bottom: 10px;\n          ">\n            <span style="display: flex; align-items: center; justify-content: center; gap: 6px;">\n              <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                <path d="M12 2L2 7l10 5 10-5-10-5z"/>\n                <path d="M2 17l10 5 10-5"/>\n                <path d="M2 12l10 5 10-5"/>\n              </svg>\n              Enterprise SSO\n            </span>\n          </button>\n          \n          \x3c!-- Create account link --\x3e\n          <div style="text-align: center; font-size: 9px; color: #64748b;">\n            Don\'t have an account? \n            <a href="#" class="mobius-mini-create-account" style="color: #2563eb; text-decoration: none; font-weight: 500;">Create one</a>\n          </div>\n          \n          <div style="font-size: 8px; color: #94a3b8; margin-top: 8px; text-align: center;">\n            Demo: sarah.chen@demo.clinic\n          </div>\n        </div>\n      ',t.appendChild(d);const n=d.querySelector(".mobius-mini-login-email"),e=d.querySelector(".mobius-mini-login-password"),i=d.querySelector(".mobius-mini-signin-btn"),o=d.querySelector(".mobius-mini-login-error"),s=async()=>{const t=n?.value.trim()||"",s=e?.value||"";if(t&&s){i&&(i.textContent="Signing in...",i.disabled=!0);try{const n=_(),e=await n.login(t,s);e.success?(Ce("Signed in successfully!"),await qe()):o&&(o.textContent=e.error||"Login failed",o.style.display="block")}catch(n){o&&(o.textContent="Connection error",o.style.display="block")}finally{i&&(i.textContent="Sign in",i.disabled=!1)}}else o&&(o.textContent="Please enter email and password",o.style.display="block")};i?.addEventListener("click",()=>{s()}),e?.addEventListener("keydown",n=>{"Enter"===n.key&&s()}),d.querySelectorAll(".mobius-mini-oauth-btn").forEach(n=>{n.addEventListener("click",()=>{const e=n.dataset.provider;Ce(("google"===e?"Google":"Microsoft")+" sign-in coming soon"),console.log(`[Mobius] OAuth login with ${e}`)}),n.addEventListener("mouseenter",()=>{n.style.background="#f1f5f9"}),n.addEventListener("mouseleave",()=>{n.style.background="white"})});const r=d.querySelector(".mobius-mini-sso-btn");r?.addEventListener("click",()=>{Ce("Enterprise SSO coming soon"),console.log("[Mobius] Enterprise SSO login")}),r?.addEventListener("mouseenter",()=>{r.style.background="#f1f5f9"}),r?.addEventListener("mouseleave",()=>{r.style.background="#f8fafc"});const a=d.querySelector(".mobius-mini-create-account");a?.addEventListener("click",n=>{n.preventDefault(),(()=>{d||(d=document.createElement("div"),d.className="mobius-mini-locked-overlay",d.style.cssText="\n        padding: 12px;\n        background: linear-gradient(180deg, rgba(248, 250, 252, 0.98), rgba(241, 245, 249, 0.98));\n      ",t.appendChild(d)),d.innerHTML='\n      <div style="text-align: center; margin-bottom: 12px;">\n        <div style="font-size: 18px; margin-bottom: 4px;">✨</div>\n        <div style="font-size: 11px; font-weight: 600; color: #0b1220;">Create Your Account</div>\n        <div style="font-size: 9px; color: #64748b; margin-top: 2px;">Step 1 of 2</div>\n      </div>\n      <div class="mobius-mini-register-form">\n        <input type="text" class="mobius-mini-reg-firstname" placeholder="First name *" style="\n          width: 100%;\n          box-sizing: border-box;\n          padding: 8px 10px;\n          border: 1px solid rgba(11, 18, 32, 0.15);\n          border-radius: 6px;\n          font-size: 10px;\n          margin-bottom: 6px;\n          outline: none;\n        " />\n        <input type="text" class="mobius-mini-reg-lastname" placeholder="Last name (optional)" style="\n          width: 100%;\n          box-sizing: border-box;\n          padding: 8px 10px;\n          border: 1px solid rgba(11, 18, 32, 0.15);\n          border-radius: 6px;\n          font-size: 10px;\n          margin-bottom: 6px;\n          outline: none;\n        " />\n        <input type="email" class="mobius-mini-reg-email" placeholder="Email address *" style="\n          width: 100%;\n          box-sizing: border-box;\n          padding: 8px 10px;\n          border: 1px solid rgba(11, 18, 32, 0.15);\n          border-radius: 6px;\n          font-size: 10px;\n          margin-bottom: 6px;\n          outline: none;\n        " />\n        <input type="password" class="mobius-mini-reg-password" placeholder="Password (8+ characters) *" style="\n          width: 100%;\n          box-sizing: border-box;\n          padding: 8px 10px;\n          border: 1px solid rgba(11, 18, 32, 0.15);\n          border-radius: 6px;\n          font-size: 10px;\n          margin-bottom: 6px;\n          outline: none;\n        " />\n        <input type="password" class="mobius-mini-reg-confirm" placeholder="Confirm password *" style="\n          width: 100%;\n          box-sizing: border-box;\n          padding: 8px 10px;\n          border: 1px solid rgba(11, 18, 32, 0.15);\n          border-radius: 6px;\n          font-size: 10px;\n          margin-bottom: 8px;\n          outline: none;\n        " />\n        <button class="mobius-mini-reg-submit" style="\n          width: 100%;\n          padding: 8px 12px;\n          background: #2563eb;\n          color: white;\n          border: none;\n          border-radius: 6px;\n          font-size: 10px;\n          font-weight: 500;\n          cursor: pointer;\n        ">Continue</button>\n        <div class="mobius-mini-reg-error" style="\n          font-size: 9px;\n          color: #dc2626;\n          margin-top: 6px;\n          display: none;\n        "></div>\n        <div style="text-align: center; font-size: 9px; color: #64748b; margin-top: 10px;">\n          Already have an account? \n          <a href="#" class="mobius-mini-back-to-login" style="color: #2563eb; text-decoration: none; font-weight: 500;">Sign in</a>\n        </div>\n      </div>\n    ';const n=d.querySelector(".mobius-mini-reg-firstname"),e=d.querySelector(".mobius-mini-reg-lastname"),i=d.querySelector(".mobius-mini-reg-email"),o=d.querySelector(".mobius-mini-reg-password"),s=d.querySelector(".mobius-mini-reg-confirm"),r=d.querySelector(".mobius-mini-reg-submit"),a=d.querySelector(".mobius-mini-reg-error"),A=d.querySelector(".mobius-mini-back-to-login"),l=n=>{a&&(a.textContent=n,a.style.display="block")},b=async()=>{const t=n?.value.trim()||"",A=e?.value.trim()||"",b=i?.value.trim()||"",m=o?.value||"",p=s?.value||"";if(t)if(b)if(m)if(m.length<8)l("Password must be at least 8 characters");else if(m===p){r&&(r.textContent="Creating account...",r.disabled=!0),a&&(a.style.display="none");try{const n=await fetch(`${c}/api/v1/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:b,password:m,first_name:t,display_name:A?`${t} ${A}`:t})}),e=await n.json();if(e.ok&&e.access_token){const n=_();await n.storeTokens({access_token:e.access_token,refresh_token:e.refresh_token,expires_in:e.expires_in||3600}),(async(n,e)=>{if(!d)return;const i=await(async()=>{try{const n=await fetch(`${c}/api/v1/auth/activities`),e=await n.json();if(e.ok&&e.activities)return e.activities}catch(n){console.error("[Mobius] Failed to fetch activities:",n)}return[{activity_code:"verify_eligibility",label:"Verify Insurance Eligibility"},{activity_code:"check_in_patients",label:"Check In Patients"},{activity_code:"schedule_appointments",label:"Schedule Appointments"},{activity_code:"submit_claims",label:"Submit Claims"},{activity_code:"rework_claims",label:"Rework Denied Claims"},{activity_code:"prior_auth",label:"Prior Authorizations"},{activity_code:"patient_collections",label:"Patient Collections"},{activity_code:"post_payments",label:"Post Payments"}]})();d.style.cssText="\n      display: flex;\n      flex-direction: column;\n      height: 100%;\n      max-height: 500px;\n      padding: 12px;\n      background: linear-gradient(180deg, rgba(248, 250, 252, 0.98), rgba(241, 245, 249, 0.98));\n      overflow: hidden;\n    ",d.innerHTML=`\n      <div style="text-align: center; margin-bottom: 10px; flex-shrink: 0;">\n        <div style="font-size: 16px; margin-bottom: 4px;">👋</div>\n        <div style="font-size: 11px; font-weight: 600; color: #0b1220;">Welcome, ${n}!</div>\n        <div style="font-size: 9px; color: #64748b; margin-top: 2px;">Step 2 of 2 - Your preferences</div>\n      </div>\n      \n      <div class="mobius-mini-onboarding-form" style="flex: 1; overflow-y: auto; padding-right: 4px; min-height: 0;">\n        \x3c!-- Preferred Name --\x3e\n        <div style="margin-bottom: 10px;">\n          <label style="font-size: 9px; font-weight: 500; color: #374151; display: block; margin-bottom: 4px;">What should we call you?</label>\n          <input type="text" class="mobius-mini-onb-name" placeholder="${n}" value="${n}" style="\n            width: 100%;\n            box-sizing: border-box;\n            padding: 6px 8px;\n            border: 1px solid rgba(11, 18, 32, 0.15);\n            border-radius: 6px;\n            font-size: 10px;\n            outline: none;\n          " />\n        </div>\n        \n        \x3c!-- Activities --\x3e\n        <div style="margin-bottom: 10px;">\n          <label style="font-size: 9px; font-weight: 500; color: #374151; display: block; margin-bottom: 4px;">What do you do? (select all that apply)</label>\n          <div class="mobius-mini-onb-activities" style="display: flex; flex-wrap: wrap; gap: 4px;">\n            ${i.map(n=>`\n              <label style="display: flex; align-items: center; gap: 4px; padding: 4px 8px; background: #f8fafc; border-radius: 12px; cursor: pointer; font-size: 9px; color: #374151; border: 1px solid transparent; transition: all 0.15s;">\n                <input type="checkbox" value="${n.activity_code}" style="width: 12px; height: 12px; margin: 0;" />\n                <span>${n.label}</span>\n              </label>\n            `).join("")}\n          </div>\n        </div>\n        \n        \x3c!-- AI Experience --\x3e\n        <div style="margin-bottom: 10px;">\n          <label style="font-size: 9px; font-weight: 500; color: #374151; display: block; margin-bottom: 4px;">How familiar are you with AI tools?</label>\n          <div class="mobius-mini-onb-experience" style="display: flex; flex-direction: column; gap: 4px;">\n            <label style="display: flex; align-items: center; gap: 6px; padding: 6px 8px; background: #f8fafc; border-radius: 6px; cursor: pointer; font-size: 9px;">\n              <input type="radio" name="ai_exp" value="beginner" style="margin: 0;" />\n              <span><strong>New to AI</strong> - I haven't used ChatGPT or similar tools</span>\n            </label>\n            <label style="display: flex; align-items: center; gap: 6px; padding: 6px 8px; background: #f8fafc; border-radius: 6px; cursor: pointer; font-size: 9px;">\n              <input type="radio" name="ai_exp" value="regular" checked style="margin: 0;" />\n              <span><strong>Regular user</strong> - I've used AI tools for work or personal use</span>\n            </label>\n            <label style="display: flex; align-items: center; gap: 6px; padding: 6px 8px; background: #f8fafc; border-radius: 6px; cursor: pointer; font-size: 9px;">\n              <input type="radio" name="ai_exp" value="power_user" style="margin: 0;" />\n              <span><strong>Power user</strong> - I use AI daily and understand its capabilities</span>\n            </label>\n          </div>\n        </div>\n        \n        \x3c!-- Autonomy - Routine Tasks --\x3e\n        <div style="margin-bottom: 10px;">\n          <label style="font-size: 9px; font-weight: 500; color: #374151; display: block; margin-bottom: 4px;">For routine tasks (like sending reminders), should Mobius:</label>\n          <div class="mobius-mini-onb-routine" style="display: flex; flex-direction: column; gap: 4px;">\n            <label style="display: flex; align-items: center; gap: 6px; padding: 6px 8px; background: #f8fafc; border-radius: 6px; cursor: pointer; font-size: 9px;">\n              <input type="radio" name="routine" value="automatic" style="margin: 0;" />\n              <span><strong>Act automatically</strong> - Just do it and let me know</span>\n            </label>\n            <label style="display: flex; align-items: center; gap: 6px; padding: 6px 8px; background: #f8fafc; border-radius: 6px; cursor: pointer; font-size: 9px;">\n              <input type="radio" name="routine" value="confirm_first" checked style="margin: 0;" />\n              <span><strong>Ask first</strong> - Show me what you'll do before doing it</span>\n            </label>\n            <label style="display: flex; align-items: center; gap: 6px; padding: 6px 8px; background: #f8fafc; border-radius: 6px; cursor: pointer; font-size: 9px;">\n              <input type="radio" name="routine" value="manual" style="margin: 0;" />\n              <span><strong>I'll do it</strong> - Just guide me, I'll take action myself</span>\n            </label>\n          </div>\n        </div>\n        \n        \x3c!-- Autonomy - Sensitive Tasks --\x3e\n        <div style="margin-bottom: 10px;">\n          <label style="font-size: 9px; font-weight: 500; color: #374151; display: block; margin-bottom: 4px;">For sensitive tasks (like submitting claims), should Mobius:</label>\n          <div class="mobius-mini-onb-sensitive" style="display: flex; flex-direction: column; gap: 4px;">\n            <label style="display: flex; align-items: center; gap: 6px; padding: 6px 8px; background: #f8fafc; border-radius: 6px; cursor: pointer; font-size: 9px;">\n              <input type="radio" name="sensitive" value="confirm_first" style="margin: 0;" />\n              <span><strong>Ask first</strong> - Always confirm before taking action</span>\n            </label>\n            <label style="display: flex; align-items: center; gap: 6px; padding: 6px 8px; background: #f8fafc; border-radius: 6px; cursor: pointer; font-size: 9px;">\n              <input type="radio" name="sensitive" value="manual" checked style="margin: 0;" />\n              <span><strong>I'll do it</strong> - Just prepare it, I'll submit myself</span>\n            </label>\n          </div>\n        </div>\n        \n        \x3c!-- Communication Style --\x3e\n        <div style="margin-bottom: 12px;">\n          <label style="font-size: 9px; font-weight: 500; color: #374151; display: block; margin-bottom: 4px;">How should Mobius communicate with you?</label>\n          <div class="mobius-mini-onb-tone" style="display: flex; gap: 6px;">\n            <label style="flex: 1; display: flex; flex-direction: column; align-items: center; padding: 8px; background: #f8fafc; border-radius: 6px; cursor: pointer; font-size: 9px; border: 2px solid transparent;" class="tone-option" data-tone="professional">\n              <input type="radio" name="tone" value="professional" checked style="margin: 0 0 4px 0;" />\n              <span style="font-weight: 500;">Professional</span>\n              <span style="color: #64748b; font-size: 8px;">Clear & formal</span>\n            </label>\n            <label style="flex: 1; display: flex; flex-direction: column; align-items: center; padding: 8px; background: #f8fafc; border-radius: 6px; cursor: pointer; font-size: 9px; border: 2px solid transparent;" class="tone-option" data-tone="friendly">\n              <input type="radio" name="tone" value="friendly" style="margin: 0 0 4px 0;" />\n              <span style="font-weight: 500;">Friendly</span>\n              <span style="color: #64748b; font-size: 8px;">Warm & helpful</span>\n            </label>\n            <label style="flex: 1; display: flex; flex-direction: column; align-items: center; padding: 8px; background: #f8fafc; border-radius: 6px; cursor: pointer; font-size: 9px; border: 2px solid transparent;" class="tone-option" data-tone="concise">\n              <input type="radio" name="tone" value="concise" style="margin: 0 0 4px 0;" />\n              <span style="font-weight: 500;">Concise</span>\n              <span style="color: #64748b; font-size: 8px;">Brief & direct</span>\n            </label>\n          </div>\n        </div>\n      </div>\n      \n      <div style="flex-shrink: 0; padding-top: 8px;">\n        <button class="mobius-mini-onb-submit" style="\n          width: 100%;\n          padding: 10px 12px;\n          background: #2563eb;\n          color: white;\n          border: none;\n          border-radius: 6px;\n          font-size: 10px;\n          font-weight: 500;\n          cursor: pointer;\n        ">Get Started</button>\n        <div class="mobius-mini-onb-error" style="\n          font-size: 9px;\n          color: #dc2626;\n          margin-top: 6px;\n          display: none;\n        "></div>\n        <div style="text-align: center; font-size: 8px; color: #94a3b8; margin-top: 6px;">\n          You can change these anytime in preferences\n        </div>\n      </div>\n    `;const t=d.querySelector(".mobius-mini-onb-name"),o=d.querySelector(".mobius-mini-onb-submit"),s=d.querySelector(".mobius-mini-onb-error");d.querySelectorAll(".tone-option").forEach(n=>{const e=n.querySelector('input[type="radio"]');e?.checked&&(n.style.borderColor="#2563eb",n.style.background="#eff6ff"),n.addEventListener("click",()=>{d.querySelectorAll(".tone-option").forEach(n=>{n.style.borderColor="transparent",n.style.background="#f8fafc"}),n.style.borderColor="#2563eb",n.style.background="#eff6ff"})}),d.querySelectorAll('.mobius-mini-onb-activities input[type="checkbox"]').forEach(n=>{n.addEventListener("change",()=>{const e=n.closest("label");n.checked?(e.style.borderColor="#2563eb",e.style.background="#eff6ff"):(e.style.borderColor="transparent",e.style.background="#f8fafc")})}),o?.addEventListener("click",()=>{(async()=>{const i=t?.value.trim()||n,r=[];d.querySelectorAll('.mobius-mini-onb-activities input[type="checkbox"]:checked').forEach(n=>{r.push(n.value)});const a=d.querySelector('input[name="ai_exp"]:checked')?.value||"regular",A=d.querySelector('input[name="routine"]:checked')?.value||"confirm_first",l=d.querySelector('input[name="sensitive"]:checked')?.value||"manual",b=d.querySelector('input[name="tone"]:checked')?.value||"professional";o&&(o.textContent="Setting up...",o.disabled=!0);try{const n=await fetch(`${c}/api/v1/auth/onboarding`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({preferred_name:i,activities:r,ai_experience_level:a,autonomy_routine_tasks:A,autonomy_sensitive_tasks:l,tone:b,greeting_enabled:!0})}),t=await n.json();if(t.ok){Ce(`Welcome to Mobius, ${i}!`);const n=_();te=await n.getCurrentUser(),ie=!0,await qe()}else s&&(s.textContent=t.error||"Failed to save preferences",s.style.display="block"),o&&(o.textContent="Get Started",o.disabled=!1)}catch(n){s&&(s.textContent="Connection error. Please try again.",s.style.display="block"),o&&(o.textContent="Get Started",o.disabled=!1)}})()})})(t,e.access_token)}else l(e.error||"Registration failed"),r&&(r.textContent="Continue",r.disabled=!1)}catch(n){l("Connection error. Please try again."),r&&(r.textContent="Continue",r.disabled=!1)}}else l("Passwords do not match");else l("Password is required");else l("Email is required");else l("First name is required")};r?.addEventListener("click",()=>{b()}),s?.addEventListener("keydown",n=>{"Enter"===n.key&&b()}),A?.addEventListener("click",n=>{n.preventDefault(),qe()})})()})}return d.style.display="",o&&(o.style.display="none"),s&&(s.style.display="none"),r&&(r.style.display="none"),a&&(a.style.display="none"),void(A&&(A.style.display="none"))}d&&(d.style.display="none"),s&&(s.style.display=""),r&&(r.style.display=""),A&&(A.style.display="");try{const n=In?.id||void 0,e=await M(qn,n);if(Un={color:e.proceed.color||"grey",text:e.proceed.text||""},e.tasking&&(Rn={color:e.tasking.color||"grey",text:e.tasking.text||"",mode:e.tasking.mode,mode_text:e.tasking.mode_text}),e.user&&(te={...te,user_id:e.user.user_id,display_name:e.user.display_name,greeting_name:e.user.greeting_name,is_onboarded:e.user.is_onboarded}),e.personalization){if(oe=e.personalization,o&&oe.greeting&&!se){const n=o.querySelector(".mobius-mini-greeting-text");n&&(n.textContent=oe.greeting),o.style.display=""}}else if(te&&!se){const n=te.display_name||te.email?.split("@")[0]||"there",e=o?.querySelector(".mobius-mini-greeting-text");e&&(e.textContent=`Hello, ${n}`),o&&(o.style.display="")}if(Zn=e.needs_attention?{color:e.needs_attention.color||"grey",problemStatement:e.needs_attention.problem_statement||null,userStatus:e.needs_attention.user_status||null}:{color:e.proceed.color||"grey",problemStatement:e.proceed.text||null,userStatus:null},Hn=e.task_count||0,Fn=e.resolution_plan||null,Xn=e.actions_for_user||0,e.patient?.found&&e.patient.display_name){const n=t.querySelector(".mobius-mini-patient-name"),i=t.querySelector(".mobius-mini-patient-id");n&&(n.textContent=e.patient.display_name),i&&e.patient.id_masked&&(i.textContent=`ID ${e.patient.id_masked}`);const o=t.querySelector(".mobius-mini-minimized-patient");o&&(o.textContent=e.patient.display_name)}}catch{}let l=Zn.color;if("resolved"===Zn.userStatus?l="green":"confirmed_unresolved"===Zn.userStatus?l="yellow":"unable_to_confirm"===Zn.userStatus&&(l="grey"),r){const n=r.querySelector(".mobius-mini-dot"),e=r.querySelector(".mobius-mini-problem-text"),i=r.querySelector(".mobius-mini-badge-text"),t=r.querySelector(".mobius-mini-status-badge");n&&(n.className=`mobius-mini-dot ${he(l)}`),e&&(e.textContent=Zn.problemStatement||"No issues detected"),i&&t&&("resolved"===Zn.userStatus?(i.textContent="Resolved",t.className="mobius-mini-status-badge status-resolved"):"confirmed_unresolved"===Zn.userStatus?(i.textContent="Unresolved",t.className="mobius-mini-status-badge status-unresolved"):"unable_to_confirm"===Zn.userStatus?(i.textContent="Unconfirmed",t.className="mobius-mini-status-badge status-unconfirmed"):(i.textContent="Set status",t.className="mobius-mini-status-badge"))}const b=t.querySelector(".mobius-mini-minimized-info");if(b){const n=b.querySelector(".mobius-mini-dot");n&&(n.className=`mobius-mini-dot ${he(l)}`)}if(a){const n=a.querySelector(".mobius-mini-task-count");n&&(n.textContent=String(Hn)),a.style.display=Hn>0?"":"none"}t.querySelectorAll(".mobius-mini-row"),Qn||(Qn?console.log("[Mobius] Patient context detector already initialized"):(Qn=new zn({debounceMs:500,strategies:["dataAttributes","url","domText"],observeMutations:!0,autoStart:!1}),Qn.on("patientDetected",n=>{n&&ke(n)}),Qn.on("patientChanged",n=>{n&&ke(n)}),Qn.on("patientCleared",()=>{ke(null)}),Qn.on("detectionError",()=>{console.warn("[Mobius] Patient detection error")}),async function(n){const e=new URL(`${S}/context/config`);e.searchParams.set("domain",n);try{const n=await fetch(e.toString(),{method:"GET"});if(!n.ok){const e=await n.json();throw new Error(e.error||"Failed to fetch detection config")}const i=await n.json();return i.has_config?i.patterns:null}catch(n){return console.error("[API] Error fetching detection config:",n),null}}(window.location.hostname).then(n=>{n&&Qn&&(console.log("[Mobius] Applying tenant detection config:",n),Qn.updatePatterns(n))}),console.log("[Mobius] Patient context detector initialized"))),Qn&&!Qn.isActive()&&(Qn.start(),console.log("[Mobius] Patient context detection started"))}console.log("[Mobius OS] Content script loaded. URL:",window.location.href),chrome.runtime.onMessage.addListener((n,e,i)=>{const t=n&&n.type;if(t)return(async()=>{try{if("mobius:setDomainAllowed"===t)return await pe(String(n.hostname||""),Boolean(n.allowed)),Boolean(n.allowed)||ge(),await qe(),void i({ok:!0});if("mobius:expand"===t)return await we(),void i({ok:!0});if("mobius:collapse"===t)return await Se(),void i({ok:!0});if("mobius:refreshMini"===t)return await qe(),void i({ok:!0});i({ok:!1,error:"unknown_message"})}catch(n){const e=n instanceof Error?n.message:String(n);i({ok:!1,error:e})}})(),!0}),(async()=>{qn=await f(),await Kn(),await qe()})()})();
//# sourceMappingURL=content.js.map